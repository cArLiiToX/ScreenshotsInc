###############################################################################
# Custom .htaccess
###############################################################################
DirectoryIndex index.php
Order allow,deny
Allow from all
ErrorDocument 404 /pub/errors/404.php
ErrorDocument 403 /pub/errors/404.php

##### Prevent encoding issues from server overrides ###########################
AddDefaultCharset Off
#AddDefaultCharset UTF-8
AddType 'text/html; charset=UTF-8' html

##### Add support for SVG Images and CSS3 Pie #################################
AddType image/svg+xml svg svgz
AddEncoding gzip svgz
AddType text/x-component .htc

##### Block unwanted Crawler Bots #############################################
RewriteCond %{HTTP_USER_AGENT} MJ12bot
RewriteRule .* - [F]
RewriteCond %{HTTP_USER_AGENT} 80legs [NC]
RewriteRule ^ - [F]

##### Redirect urls with old .html extension ##################################
#### redirectMatch 301 ^(.*)\.html $1

##### Disable ETags ###########################################################
#FileETag None

##### PHP Settings ############################################################
<IfModule mod_php5.c>
  php_value memory_limit 768M
  php_value max_execution_time 18000
  php_flag session.auto_start off
  php_flag suhosin.session.cryptua off
  php_flag zend.ze1_compatibility_mode Off
</IfModule>

<IfModule mod_php7.c>
  php_value memory_limit 768M
  php_value max_execution_time 18000
  php_flag session.auto_start off
  php_flag suhosin.session.cryptua off
  php_flag zend.ze1_compatibility_mode Off
</IfModule>

##### disable POST processing to prevent breaking image upload ################
<IfModule mod_security.c>
  SecFilterEngine Off
  SecFilterScanPOST Off
</IfModule>

#### Rewrite Directives #######################################################
<IfModule mod_rewrite.c>
  Options +FollowSymLinks
  RewriteEngine on
  RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
  RewriteCond %{REQUEST_METHOD} ^TRAC[EK]
  RewriteRule .* - [L,R=405]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-l
  RewriteRule .* index.php [L]
  RewriteRule ^index.php/?(.*).html$ /$1 [R=301,L]
</IfModule>

<Files *.php>
  SetOutputFilter DEFLATE
</Files>

#### SSL Directives ###########################################################
<IfModule mod_ssl.c>
  SSLOptions StdEnvVars
</IfModule>

#### Header Directives ########################################################
<IfModule mod_headers.c>
  Header set Access-Control-Allow-Origin "*"
  #Header unset ETag
  #Header unset Last-Modified
  Header set X-UA-Compatible "IE=edge"
  <FilesMatch "\.(appcache|atom|bbaw|bmp|crx|css|cur|eot|f4[abpv]|flv|geojson|gif|htc|ico|jpe?g|js|json(ld)?|m4[av]|manifest|map|mp4|oex|og[agv]|opus|otf|pdf|png|rdf|rss|safariextz|svgz?|swf|topojson|tt[cf]|txt|vcard|vcf|vtt|webapp|web[mp]|webmanifest|woff2?|xloc|xml|xpi)$">
      Header unset X-UA-Compatible
  </FilesMatch>
  <filesmatch "\.(ico|flv|jpg|jpeg|png|gif|css|swf)$">
  Header set Cache-Control "max-age=2678400, public"
  </filesmatch>
  <filesmatch "\.(html|htm)$">
  Header set Cache-Control "max-age=7200, private, must-revalidate"
  </filesmatch>
  <filesmatch "\.(pdf)$">
  Header set Cache-Control "max-age=86400, public"
  </filesmatch>
  <filesmatch "\.(js)$">
  Header set Cache-Control "max-age=2678400, private"
  </filesmatch>
</IfModule>

#### SERVER SIDE CACHING ######################################################
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType text/html "access 1 month"
  ExpiresByType image/jpg "access 1 month"
  ExpiresByType image/jpeg "access 1 month"
  ExpiresByType image/gif "access 1 month"
  ExpiresByType image/png "access 1 month"
  ExpiresByType text/css "access 1 month"
  ExpiresByType application/pdf "access 1 month"
  ExpiresByType application/javascript "access 1 month"
  ExpiresByType application/x-javascript "access 1 month"
  ExpiresByType application/x-shockwave-flash "access 1 month"
  ExpiresByType image/x-icon "access 1 year"
  ExpiresDefault "access plus 1 month"
</IfModule>

##### mod_deflate compresses your output ######################################
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/rss+xml
  AddOutputFilterByType DEFLATE application/vnd.ms-fontobject
  AddOutputFilterByType DEFLATE application/x-font
  AddOutputFilterByType DEFLATE application/x-font-opentype
  AddOutputFilterByType DEFLATE application/x-font-otf
  AddOutputFilterByType DEFLATE application/x-font-truetype
  AddOutputFilterByType DEFLATE application/x-font-ttf
  AddOutputFilterByType DEFLATE application/x-javascript
  AddOutputFilterByType DEFLATE application/xhtml+xml
  AddOutputFilterByType DEFLATE application/xml
  AddOutputFilterByType DEFLATE font/opentype
  AddOutputFilterByType DEFLATE font/otf
  AddOutputFilterByType DEFLATE font/ttf
  AddOutputFilterByType DEFLATE image/svg+xml
  AddOutputFilterByType DEFLATE image/x-icon
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript
  BrowserMatch ^Mozilla/4 gzip-only-text/html
  BrowserMatch ^Mozilla/4\.0[678] no-gzip
  BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
  SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary
  Header append Vary User-Agent env=!dont-vary
  php_flag zlib.output_compression on
</IfModule>

##### Mod gzip and caching ####################################################
<ifModule mod_gzip.c>
  mod_gzip_on Yes
  mod_gzip_dechunk Yes
  mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$
  mod_gzip_item_include handler ^cgi-script$
  mod_gzip_item_include mime ^text/.*
  mod_gzip_item_include mime ^application/x-javascript.*
  mod_gzip_item_exclude mime ^image/.*
  mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule>

##### Mime Type Caching for Magento ###########################################
<IfModule mod_mime.c>
  AddCharset utf-8 .atom .css .js .json .rss .vtt .webapp .xml

  ##### AUDIO #####
  AddType audio/mp4 m4a f4a f4b
  AddType audio/ogg oga ogg

  ##### JAVASCRIPT #####
  # Normalize to standard type (it's sniffed in IE anyways):
  # http://tools.ietf.org/html/rfc4329#section-7.2
  AddType application/javascript js jsonp
  AddType application/json json

  ##### VIDEO #####
  AddType video/mp4                                   mp4 m4v f4v f4p
  AddType video/ogg                                   ogv
  AddType video/webm                                  webm
  AddType video/x-flv                                 flv

  ##### WEB FONTS #####
  AddType application/font-woff                       woff
  AddType application/vnd.ms-fontobject               eot

  ##### Browsers usually ignore the font MIME types	and sniff the content #####
  ##### however, Chrome shows a warning if other MIME types are used for #####
  ##### the following fonts. #####
  AddType application/x-font-ttf                      ttc ttf
  AddType font/opentype                               otf

  ##### OTHER #####
  AddType application/octet-stream                    safariextz
  AddType application/x-chrome-extension              crx
  AddType application/x-opera-extension               oex
  AddType application/x-shockwave-flash               swf
  AddType application/x-web-app-manifest+json         webapp
  AddType application/x-xpinstall                     xpi
  AddType application/xml                             atom rdf rss xml
  AddType image/webp                                  webp
  AddType image/x-icon                                ico
  AddType text/cache-manifest                         appcache manifest
  AddType text/vtt                                    vtt
  AddType text/x-component                            htc
  AddType text/x-vcard                                vcf
</IfModule>

##### disable POST processing to prevent breaking image upload ################
<IfModule mod_security.c>
  SecFilterEngine Off
  SecFilterScanPOST Off
</IfModule>

##### Permanent 301 Redirects #################################################
redirect 301 /design-studio.html /design-studio
redirect 301 /shop/apparel.html /shop/apparel
redirect 301 /unisex-jerset-short-sleev-t-shirt.html /unisex-jerset-short-sleev-t-shirt
redirect 301 /shop.html /shop
redirect 301 /shop/hats-caps.html /shop/hats-caps
redirect 301 /ladies-the-favorite-t-shirt.html /ladies-the-favorite-t-shirt
redirect 301 /shop/outdoor-wear.html /shop/outdoor-wear
redirect 301 /j-america-adult-game-day-jersey-1.html /j-america-adult-game-day-jersey-1
redirect 301 /design-studio.html /design-studio
redirect 301 /sports-apparel/womens-sport-apparel.html /sports-apparel/womens-sport-apparel
redirect 301 /apparel/women.html /apparel/women
redirect 301 /sports-apparel/mens-sport-apparel.html /sports-apparel/mens-sport-apparel
redirect 301 /signs-banners/vinyl-banners.html /signs-banners/vinyl-banners
redirect 301 /custom-design-service /design-services
redirect 301 /custom-design-service.html /design-services
redirect 301 /gildan-adult-dryblend-50-50-t-shirt.html /gildan-adult-dryblend-50-50-t-shirt
redirect 301 /gildan-adult-ultra-cotton-tank.html /gildan-adult-ultra-cotton-tank
redirect 301 /gildan-adult-ultra-cotton-tank.html/ /gildan-adult-ultra-cotton-tank
redirect 301 /next-level-unisex-triblend-3-4-sleeve-raglan-1.html /next-level-unisex-triblend-3-4-sleeve-raglan-1
redirect 301 /next-level-unisex-triblend-3-4-sleeve-raglan.html /next-level-unisex-triblend-3-4-sleeve-raglan
redirect 301 /signs-banners/signs.html /signs-banners/signs
redirect 301 /shop.html?cat=3 /shop?cat=3
redirect 301 /3x6-vinyl-banner.html /3x6-vinyl-banner
redirect 301 /shop.html?price=5- /shop?price=5-
redirect 301 /shop.html?cat=32 /shop?cat=32
redirect 301 /3x8-vinyl-banner.html /3x8-vinyl-banner
redirect 301 /shop.html?manufacturer=82 /shop?manufacturer=82
redirect 301 /4x2-vinyl-banner.html /4x2-vinyl-banner
redirect 301 /shop.html?price=4-5 /shop?price=4-5
redirect 301 /2x4-vinyl-banner.html /2x4-vinyl-banner
redirect 301 /shop/hats-caps.html?manufacturer=86 /shop/hats-caps?manufacturer=86
redirect 301 /shop/hats-caps.html?manufacturer=98 /shop/hats-caps?manufacturer=98
redirect 301 /shop.html?price=-10 /shop?price=-10
redirect 301 /gildan-classic-t-shirt.html /gildan-classic-t-shirt
redirect 301 /design-studio/t-shirts-apparel.html /design-studio/t-shirts-apparel
redirect 301 /wholesale-application /Wholesaler
redirect 301 /shop.html?price=10-20 /shop?price=10-20
redirect 301 /design-studio.html?p=2 /design-studio?p=2
redirect 301 /design-studio/pants-bottoms.html /design-studio/pants-bottoms
redirect 301 /shop/apparel.html?price=7-10%2C7- /shop/apparel?price=7-10%2C7-
redirect 301 /design-studio/work.html /design-studio/work
redirect 301 /shop.html?price=40-50 /shop?price=40-50
redirect 301 /shop.html?price=60- /shop?price=60-
redirect 301 /shop.html?price=30-40 /shop?price=30-40
redirect 301 /customer/account/login/referer/aHR0cHM6Ly93d3cuc2NyZWVuc2hvdHNpbmMuY29tL3Nob3AuaHRtbD9jYXQ9MjkmcHJpY2U9NDAtNTAlMkMxMC0lMkM1LQ,,/ /customer/account/login/
redirect 301 /shop.html?p=2 /shop?p=2
redirect 301 /design-studio/gildan-adult-ultra-cotton-sleeveless-t-shirt.html /design-studio/gildan-adult-ultra-cotton-sleeveless-t-shirt
redirect 301 /shop.html?cat=29 /shop?cat=29
redirect 301 /customer/account/login/referer/aHR0cHM6Ly93d3cuc2NyZWVuc2hvdHNpbmMuY29tL3Nob3AuaHRtbD9tYW51ZmFjdHVyZXI9MTc5JnByaWNlPTctMTAlMkM3LSUyQzUt/ /customer/account/login/
redirect 301 /wholesaler-info-requests /wholesale
redirect 301 /signs-banners/stickers-and-decals.html /signs-banners/stickers-and-decals
redirect 301 /design-studio/gildan-ladies-heavy-blend-50-50-fleece-crew.html /design-studio/gildan-ladies-heavy-blend-50-50-fleece-crew
redirect 301 /signs-banners/stickers-and-decals.html /signs-banners/stickers-and-decals
redirect 301 /apparel/youth.html /apparel/youth
redirect 301 /sports-apparel/mens-sport-apparel.html/ /sports-apparel/mens-sport-apparel
redirect 301 /signs-banners.html/ /signs-banners
redirect 301 /sports-apparel/youth-sport-apparel.html/ /sports-apparel/youth-sport-apparel
redirect 301 /apparel/women.html/ /apparel/women
redirect 301 /signs-banners/signs.html/ /signs-banners/signs
redirect 301 /custom-design-service/ /design-services
redirect 301 /signs-banners/vinyl-banners.html/ /signs-banners/vinyl-banners
redirect 301 /ladies-favorite-t-shirt.html /ladies-favorite-t-shirt
redirect 301 /gildan-classic-t-shirt.html/ /gildan-classic-t-shirt
redirect 301 /wholesale-application/ /Wholesaler
redirect 301 /gildan-adult-heavy-blend-8-oz-50-50-hood.html/ /gildan-adult-heavy-blend-8-oz-50-50-hood
redirect 301 /design-studio.html/ /design-studio
redirect 301 /next-level-ladies-triblend-crew.html /next-level-ladies-triblend-crew
redirect 301 /next-level-mens-triblend-crew.html /next-level-mens-triblend-crew
redirect 301 /4x8-vinyl-banner.html /4x8-vinyl-banner
redirect 301 /gildan-adult-ultra-cotton-6-oz-long-sleeve-t-shirt.html /gildan-adult-ultra-cotton-6-oz-long-sleeve-t-shirt
redirect 301 /shop/apparel.html?p=2 /shop/apparel?p=2
redirect 301 /gildan-adult-heavy-blend-8-oz-50-50-fleece-crew.html/ /gildan-adult-heavy-blend-8-oz-50-50-fleece-crew
redirect 301 /shop/hats-caps.html?manufacturer=222 /shop/hats-caps?manufacturer=222
redirect 301 /gildan-adult-dryblend-50-50-t-shirt.html/ /gildan-adult-dryblend-50-50-t-shirt
redirect 301 /shop/apparel.html?price=6-7%2C-10 /shop/apparel?price=6-7%2C-10
redirect 301 /products/sports-apparel/mens-sport-apparel.html /products/sports-apparel/mens-sport-apparel
redirect 301 /products/sports-apparel/mens-sport-apparel.html/?SID=p20am1g0acc1vlilskk1l7q5e3 /products/sports-apparel/mens-sport-apparel
redirect 301 /inkxe/youth.html/?SID=8i41br7sodpboe0nk478iavh15 /inkxe/youth
redirect 301 /test-pre-deco-template.html/?SID=pi9bpbjhkmki3eu3k59ojng9e2 /design-studio
redirect 301 /inkxe/youth.html/?SID=novklpo6pnrqgdb2fasemaoka0 /inkxe/youth
redirect 301 /signs-banners/stickers-and-decals.html/?SID=jd76o13dbh0bbaef9e6q2gb0m5 /signs-banners/stickers-and-decals
redirect 301 /products/apparel/women.html/?SID=6lp84avcpg7n0d8k2sqcq1li42 /products/apparel/women
redirect 301 /shop.html?cat=3&manufacturer=82&price=4-5 /shop?cat=3&manufacturer=82&price=4-5
redirect 301 /signs-banners/stickers-and-decals.html/?SID=gmae1rv4qn1tnthkjord3cnf80 /signs-banners/stickers-and-decals
redirect 301 /inkxe/youth.html/?SID=r5ju61jgtu21tbolpdph0bpf04 /inkxe/youth
redirect 301 /test-pre-deco-template.html/ /design-studio
redirect 301 /signs-banners/stickers-and-decals.html/?SID=vvqndj4l3mnde0j0pg4av63f07 /signs-banners/stickers-and-decals
redirect 301 /sports-apparel/womens-sport-apparel.html/ /sports-apparel/womens-sport-apparel
redirect 301 /sports-apparel/youth-sport-apparel.html/?SID=8vcc4vr20gholl5kh5rof044e7 /sports-apparel/youth-sport-apparel
redirect 301 /products/sports-apparel/womens-sport-apparel.html/?SID=r3rdpn8obv0rp9ej4anggbj5s7 /products/sports-apparel/womens-sport-apparel
redirect 301 /signs-banners/stickers-and-decals.html/?SID=bjq0ihah7fcs9gkgn8rrula1p3 /signs-banners/stickers-and-decals
redirect 301 /products/sports-apparel/womens-sport-apparel.html/?SID=t0u0mul2eokdg439q4e5t9bce1 /products/sports-apparel/womens-sport-apparel
redirect 301 /inkxe/youth.html/?SID=0tp2rda8khpa21hbgn0u586h25 /inkxe/youth
redirect 301 /inkxe/youth.html/?SID=0ihv11i2ij07rsksho6nr8lh41 /inkxe/youth
redirect 301 /products/signs-banners/stickers-and-decals.html/?SID=vr5a7maor6b2akkqctag3svfb1 /products/signs-banners/stickers-and-decals
redirect 301 /products/sports-apparel/mens-sport-apparel.html/?SID=b1qkp90qcpl5o0kj3dtrahdgp0 /products/sports-apparel/mens-sport-apparel
redirect 301 /signs-banners/stickers-and-decals.html/?SID=ri5uqu7c7tvvfibn59a129fqm3 /signs-banners/stickers-and-decals
redirect 301 /shop.html?cat=32&price=4-5 /shop?cat=32&price=4-5
redirect 301 /shop/signs-banners.html /shop/signs-banners
redirect 301 /shop/workwear.html /shop/workwear
redirect 301 /shop/pants-and-bottoms.html /shop/pants-and-bottoms
redirect 301 /shop/promotional-items.html /shop/promotional-items
redirect 301 /signs-banners/stickers-and-decals /shop/signs-banners
redirect 301 /sports-apparel/youth-sport-apparel /shop/athletics
redirect 301 /design-studio/signs-and-banners.html /design-studio?cat=48
redirect 301 /design-studio/gildan-adult-ultra-cotton-tank.html /gildan-adult-ultra-cotton-tank
redirect 301 /gildan-adult-dryblend-50-50-pocket-t-shirt.html/ /gildan-adult-dryblend-50-50-pocket-t-shirt
redirect 301 /hanes-men-s-6-1-oz-taglessr-t-shirt.html /hanes-men-s-6-1-oz-taglessr-t-shirt
redirect 301 /design-studio/next-level-ladies-triblend-crew.html /next-level-ladies-triblend-crew
redirect 301 /american-apparel-ladies-fine-jersey-short-sleeve-t-shirt.html /american-apparel-ladies-fine-jersey-short-sleeve-t-shirt
redirect 301 /american-apparel-unisex-fine-jersey-short-sleeve-v-neck.html /american-apparel-unisex-fine-jersey-short-sleeve-v-neck
redirect 301 /american-apparel-unisex-poly-cotton-short-sleeve-crewneck.html /american-apparel-unisex-poly-cotton-short-sleeve-crewneck
redirect 301 /flexfit-adult-wooly-6-panel-cap.html /flexfit-adult-wooly-6-panel-cap
redirect 301 /design-studio.html?cat=39 /design-studio?cat=39
redirect 301 /design-studio/gildan-adult-heavy-blend-8-oz-50-50-hood.html /gildan-adult-heavy-blend-8-oz-50-50-hood
redirect 301 /design-studio/promotional.html /design-studio/promotional
redirect 301 /shop/athletics.html /shop/athletics
redirect 301 /gildan-adult-heavy-blend-8-oz-50-50-hood.html /gildan-adult-heavy-blend-8-oz-50-50-hood
redirect 301 /signs-banners /shop/signs-banners
redirect 301 /gildan-classic-t-shirt /design-studio
redirect 301 /unisex-jersey-short-sleev-t-shirt.html /design-studio
redirect 301 /gildan-adult-heavy-blend-8-oz-50-50-fleece-crew.html /gildan-adult-heavy-blend-8-oz-50-50-fleece-crew
redirect 301 /sports-apparel/womens-sport-apparel /design-studio/athletic-wear
