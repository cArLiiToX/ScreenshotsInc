angular.module("product",[]),angular.module("colorSwaches",[]),angular.module("discountSlab",[]),angular.module("printSetting",[]),angular.module("setting",[]),angular.module("design",[]),angular.module("background",[]),angular.module("shape",[]),angular.module("mask",[]),angular.module("distressEffect",[]),angular.module("palette",[]),angular.module("wordCloud",[]),angular.module("webfonts",[]),angular.module("textFX",[]),angular.module("printArea",[]),angular.module("template",[]),angular.module("MiscelleneousModel",[]),angular.module("printSettingWizard",[]),angular.module("textArt",[]),angular.module("order",[]),angular.module("authentication",[]),angular.module("dashBoard",[]),angular.module("productTemplate",[]),angular.module("preDecoratedProduct",[]),angular.module("backgroundPattern",[]);var AppRoot=angular.module("appMain",["product","colorSwaches","discountSlab","printSetting","webStorageModule","design","background","angularFileUpload","shape","setting","mask","distressEffect","palette","wordCloud","webfonts","angularSpectrumColorpicker","ngTagsInput","textFX","printArea","template","MiscelleneousModel","printSettingWizard","textArt","order","authentication","dashBoard","ui.bootstrap","productTemplate","preDecoratedProduct","backgroundPattern","dndLists"]);AppRoot.constant("AppConfig",function(){var e=[{name:"products",category:"PM",label:"Products",status:!1,icon:"p"},{name:"graphics",category:"GM",label:"Graphics",status:!1,icon:"g"},{name:"texts",category:"TM",label:"Text",status:!1,icon:"d"},{name:"setting",category:"SM",label:"Settings",status:!1,icon:"fa-cog"},{name:"product",category:"P",label:"Product List",icon:"pl"},{name:"colorSwaches",category:"C",label:"Color Swaches",status:!1,icon:"cs"},{name:"design",category:"G",label:"Designs",icon:"d"},{name:"background",category:"G",label:"Designs Background",icon:"b"},{name:"backgroundPattern",category:"G",label:"Background Pattern",icon:"p"},{name:"mask",category:"G",label:"Masks",icon:"m"},{name:"shape",category:"G",label:"Shapes",icon:"s"},{name:"distressEffect",category:"G",label:"Distress Effect",icon:"e"},{name:"template",category:"G",label:"Template",icon:"T"},{name:"palette",category:"N",label:"Color Palettes",status:!1,icon:"fa-tint"},{name:"textFX",category:"T",label:"Text FX",icon:"tf"},{name:"wordCloud",category:"T",label:"Word Cloud",icon:"wc"},{name:"webFonts",category:"T",label:"Web Fonts",icon:"wf"},{name:"printSettingWizard",category:"W",label:"Print Profile",status:!1,icon:"ps"},{name:"orders",category:"O",label:"Orders",status:!1,icon:"o"},{name:"authentication",category:"A",label:"User Accounts",icon:"u"},{name:"dashBoard",category:"D",label:"Dashboard",icon:"d"},{name:"productTemplate",category:"PT",label:"Product Template",icon:"pt"},{name:"preDecoratedProducts",category:"PD",label:"Predecorated Product",icon:"pdp"}],t=RIAXEAPP.localSettings.api_key;return{MODULE_LIST:e,API_KEY:t}}()),AppRoot.controller("MainController",["$scope","$rootScope","$timeout","MainEvent","SigninService","ForgotpwdService","MainService","translateService","AppConfig","webStorage","AppModel",function($scope,$rootScope,$timeout,MainEvent,SigninService,ForgotpwdService,MainService,translateService,AppConfig,webStorage,AppModel){function CheckIdleTime(){idleSecondsCounter++,idleSecondsCounter>=IDLE_TIMEOUT&&(webStorage.local.has("icons",!1)?window.clearInterval(idleSecondsTimer):MainService.userLogOut().then(function(e){"success"==e.data.status&&(window.clearInterval(idleSecondsTimer),webStorage.local.clear(),window.location.reload())}))}$scope.modulePath="modules/dashBoard/views/view.html",$scope.currentModule="Dashboard",$scope.selectedItem="",$scope.isItemPresent=!1,$scope.versionInfo=!1,$scope.errorApiKey=!1,$scope.user={},$scope.user.email="",$scope.user.password="",$scope.isNewVersion=!0,$scope.availableVersion="",$scope.app={name:"Designer Admin",version:"version 4.0.0"},$scope.userEmail={email:"",lickey:"",secretQuestion:"",secretAnswer:""},$scope.userReset={email:"",pwd:"",cpwd:""},$scope.versionData=[],$scope.getLocation=function(e){var t=document.createElement("a");return t.href=e,t},$rootScope.demoFlag=0,$scope.domainName="";var date=new Date;$scope.year=date.getFullYear();var selectedCategoryId=0,selectedSubCategoryId=0;$scope.catCount=0,$scope.initializeView=function(){(-1!=window.location.hostname.search("localhost")||-1!=window.location.hostname.search("inkxe.com"))&&($scope.user.email="mydemo@gmail.com",$scope.user.password="mydemo",$rootScope.demoFlag=1),$scope.init=!1;var e="";if("dev"==RIAXEAPP.localSettings.enviroment)var e=$scope.getLocation(RIAXEAPP.localSettings.base_url);else{var t=RIAXEAPP.localSettings.base_url.split("/");e=t[3]?window.location.protocol+"//"+window.location.hostname+"/"+t[3]+"/":window.location.protocol+"//"+window.location.hostname+"/",e=$scope.getLocation(e)}$scope.domainName=e.hostname.replace(/\./g,"_");var a=$scope.domainName.replace(/www_/g,"");$rootScope.baseUrl=e,$rootScope.serviceAPI=e+RIAXEAPP.localSettings.service_api_url,$rootScope.storeAPI=e+RIAXEAPP.localSettings.store_api_path,$rootScope.language=RIAXEAPP.localSettings.language,$rootScope.license_key=RIAXEAPP.localSettings.license_key,$rootScope.storeType=-1!=RIAXEAPP.localSettings.store_type.search("prestashop")?!1:!0,$rootScope.assertsPath=e+"designer-tool/designer-assets/"+a+"/images/",$rootScope.ordersPath=e+"designer-tool/designer-assets/"+a+"/",translateService.init().then(function(){$scope.init=!0,webStorage.local.has("products",!1)||webStorage.local.has("designs",!1)?($scope.logo_rxe(),$scope.allowModule=webStorage.local.get("moduleAllow"),$scope.userType=webStorage.local.get("type"),$scope.userName=webStorage.local.get("name"),"1"==$scope.userType?$scope.getSideMenu():$scope.getUserAdminMenu(),$scope.setLogInStatus(!1)):webStorage.local.has("icons",!1)?($scope.getSideMenu(),$scope.userName=webStorage.local.get("name"),$scope.logo_rxe(),$scope.initialPath="views/view.html",$scope.setLogInStatus(!0)):($scope.loginProcess=!1,$scope.initialPath="views/partials/admin_signin.html")}),MainService.fetchgeneralSettings(),MainService.fetchPrintSizes(),$scope.getInkxeCurrentVersion()},$rootScope.$on(MainEvent.APP_MODEL_READY,function(){$scope.appCurrency=AppModel.getCurrency(),$scope.printUnit=AppModel.getUnit(),$scope.changeUnit=AppModel.getUnit()}),$scope.getSideMenu=function(){for(var e=0;AppConfig.MODULE_LIST.length>e;e++)AppConfig.MODULE_LIST[e].status=!0;$scope.moduleList=AppConfig.MODULE_LIST,$scope.initialPath="views/view.html"},$scope.getUserAdminMenu=function(){for(var e=0;$scope.allowModule.length>e;e++){for(var t=0;AppConfig.MODULE_LIST.length>t;t++)AppConfig.MODULE_LIST[t].label==$scope.allowModule[e]&&(AppConfig.MODULE_LIST[t].status=!0);$scope.moduleList=AppConfig.MODULE_LIST,$scope.initialPath="views/view.html"}},$scope.login=function(){try{$scope.loginProcess=!0,$scope.authError=null,$scope.moduleList=[],SigninService.authenticateUser($scope.user.email,$scope.user.password).then(function(e){if(e.data.status.products){var t=Base64.decode(e.data.status.products),a=t.split("@");"SUCCESS"==a[0]?(idleSecondsTimer=window.setInterval(CheckIdleTime,1e3),$scope.loginProcess=!1,$scope.logo_rxe(),Base64.decode(e.data.status.designs),webStorage.local.add("type",e.data.status.type,!1),webStorage.local.add("moduleAllow",e.data.status.moduleAllow,!1),webStorage.local.add("products",e.data.status.products,!1),webStorage.local.add("designs",e.data.status.designs,!1),webStorage.local.add("name",e.data.status.name,!1),webStorage.local.add("id",e.data.status.id,!1),$scope.allowModule=webStorage.local.get("moduleAllow"),$scope.userType=webStorage.local.get("type"),"1"==$scope.userType?($scope.userName=webStorage.local.get("name"),$scope.getSideMenu(),$scope.initialPath="views/view.html"):($scope.userName=webStorage.local.get("name"),$scope.getUserAdminMenu(),$scope.initialPath="views/view.html"),$scope.selectedItem="",$scope.isItemPresent=!1,$scope.setLogInStatus(!1)):($scope.loginProcess=!1,$scope.cssClass="text-danger",$scope.authError="Error in Login")}else if("mydemo@gmail.com"==$scope.user.email&&"mydemo"==$scope.user.password&&1==$rootScope.demoFlag){webStorage.local.add("name","inkxe",!1),$scope.logo_rxe();var o=Base64.encode("false");webStorage.local.add("icons",o,!1);for(var r=0;AppConfig.MODULE_LIST.length>r;r++)AppConfig.MODULE_LIST[r].status=!0;$scope.userName=webStorage.local.get("name"),$scope.moduleList=AppConfig.MODULE_LIST,$scope.initialPath="views/view.html",$scope.selectedItem="",$scope.isItemPresent=!1,$scope.setLogInStatus(!0)}else $scope.loginProcess=!1,$scope.authError=e.data.status,$scope.cssClass="text-danger"})}catch(e){console.log("Error in :: Login")}},$scope.forgotPwdLink=function(){$scope.authError=null,$scope.initialPath="views/partials/admin_forgotpwd.html"},$scope.passwordForgot=function(){$scope.authError=null,$scope.isButton=!0,ForgotpwdService.forgottenPassword($scope.userEmail.email,$scope.userEmail.lickey).then(function(e){"success"==e.data.status?($scope.userEmail.secretQuestion=e.data.question,$scope.initialPath="views/partials/admin_Secret_Question.html"):($scope.isButton=!1,$scope.cssClass="text-danger",$scope.userEmail.lickey="",$scope.authError=translateService.translateText("Invalid Details"))})},$scope.cancelForgotPassword=function(){$scope.userEmail={email:"",lickey:"",secretQuestion:"",secretAnswer:""},$scope.initialPath="views/partials/admin_signin.html",$scope.authError=null,$scope.isButton=!1,$scope.userReset={email:"",pwd:"",cpwd:""}},$scope.checkSecretQuestion=function(){$scope.authError=null,MainService.checkSecretQuestion($scope.userEmail.email,$scope.userEmail.secretQuestion,$scope.userEmail.secretAnswer).then(function(e){"success"==e.data.status?$scope.initialPath="views/partials/admin_resetpassword.html":($scope.cssClass="text-danger",$scope.userEmail.secretAnswer="",$scope.authError=translateService.translateText("Your answer is incorrect"))})},$scope.resetPassword=function(){$scope.authError=null,$scope.userReset.pwd.length>4?0==$scope.userReset.pwd.localeCompare($scope.userReset.cpwd)?MainService.adminResetPassword($scope.userEmail.email,$scope.userReset.pwd).then(function(e){"success"==e.data.status?($scope.cancelForgotPassword(),$scope.cssClass="text-success",$scope.authError=translateService.translateText("Password changed Successfully")):($scope.cssClass="text-danger",$scope.authError=translateService.translateText("Password changed Failed"))}):($scope.cssClass="text-danger",resetPassword(),$scope.authError=translateService.translateText("Password Mismatch")):($scope.cssClass="text-danger",resetPassword(),$scope.authError=translateService.translateText("Password should contain at least"))},$scope.setLogInStatus=function(e){$scope.demoStatus=1==e?!0:!1},$scope.seletModule=function(e){for(var t=0;$scope.moduleList.length>t;t++)$scope.moduleList[t].name==e&&$scope.openModule($scope.moduleList[t])},$scope.openModule=function(e){$scope.logo_rxe(),$scope.isItemPresent=!1,$rootScope.Id="",$scope.currentModule=translateService.translateText(e.label),$scope.modulePath="modules/"+e.name+"/views/view.html",$scope.$emit(MainEvent.LOAD_MODULE_ON_SITEMAP_CLICK,e.label)},$scope.loadModule=function(e){$scope.isItemPresent=!1,$scope.$emit(MainEvent.LOAD_MODULE_ON_SITEMAP_CLICK,e)},$rootScope.$on(MainEvent.CONFIGURE_CUSTOM_SIZE,function(e,t){$scope.isItemPresent=!1,$scope.currentModule="PRINT AREA",$scope.modulePath="modules/"+t+"/views/view.html"}),$rootScope.$on(MainEvent.SHORTCUT_LINK,function(e,t,a){$scope.currentModule=translateService.translateText(t.label),$rootScope.Id=a,$scope.modulePath="modules/"+t.name+"/views/view.html"}),$rootScope.$on(MainEvent.PRINT_PROFILE_LINK,function(e,t,a){$scope.currentModule=translateService.translateText(t.label),$rootScope.Id=a,$scope.modulePath="modules/"+t.name+"/views/view.html"}),$rootScope.$on(MainEvent.SHOW_NOTIFICATION,function(e,t){$(".pgn-wrapper").show(),$(".pgn-wrapper").empty(),$("body").pgNotification({style:"bar",message:translateService.translateText(t.message),position:"top",timeout:0,type:t.type}).show(),setTimeout(function(){$(".pgn-wrapper").fadeOut("slow")},5e3)}),$rootScope.$on(MainEvent.SHOW_SOCIAL_IMAGE_NOTIFICATION,function(e,t){$("#socialImageModal").show(),$("#socialImageModal").pgNotification({style:"bar",message:translateService.translateText(t.message),position:"top",timeout:1e3,type:t.type}).show()}),$rootScope.$on(MainEvent.SHOW_SIZE_NOTIFICATION,function(e,t){$("#customSizeModal").show(),$(".pgn-wrapper").empty(),$("#customSizeModal").pgNotification({style:"bar",message:translateService.translateText(t.message),position:"top",timeout:1e3,type:t.type}).show()}),$rootScope.$on(MainEvent.UNIT_MODAL_NOTIFICATION,function(e,t){$("#unitModalNoti").show(),$(".pgn-wrapper").empty(),$("#unitModalNoti").pgNotification({style:"bar",message:translateService.translateText(t.message),position:"top",timeout:1e3,type:t.type}).show()}),$rootScope.$on(MainEvent.SHOW_MASK_NOTIFICATION,function(e,t){$(".pgn-wrapper").show(),$(".pgn-wrapper").empty(),$("#customMaskkModal").pgNotification({style:"bar",message:translateService.translateText(t.message),position:"top",timeout:0,type:t.type}).show(),setTimeout(function(){$(".pgn-wrapper").fadeOut("slow")},5e3)}),$rootScope.$on(MainEvent.SHOW_TEMPLATE_NOTIFICATION,function(e,t){$(".pgn-wrapper").show(),$(".pgn-wrapper").empty(),$("#templateModal").pgNotification({style:"bar",message:translateService.translateText(t.message),position:"top",timeout:0,type:t.type}).show(),setTimeout(function(){$(".pgn-wrapper").fadeOut("slow")},5e3)}),$rootScope.$on(MainEvent.SHOW_PALETTE_NOTIFICATION,function(e,t){$(".pgn-wrapper").show(),$(".pgn-wrapper").empty(),$("#paletteModal").pgNotification({style:"bar",message:translateService.translateText(t.message),position:"top",timeout:0,type:t.type}).show(),setTimeout(function(){$(".pgn-wrapper").fadeOut("slow")},5e3)}),$rootScope.$on(MainEvent.SHOW_DESIGN_NOTIFICATION,function(e,t){$(".pgn-wrapper").show(),$(".pgn-wrapper").empty(),$("#designManageCategoryModal").pgNotification({style:"bar",message:translateService.translateText(t.message),position:"top",timeout:0,type:t.type}).show(),setTimeout(function(){$(".pgn-wrapper").fadeOut("slow")},5e3)}),$rootScope.$on(MainEvent.SHOW_BACKGROUND_NOTIFICATION,function(e,t){$(".pgn-wrapper").show(),$(".pgn-wrapper").empty(),$("#backgroundManageCategoryModal").pgNotification({style:"bar",message:translateService.translateText(t.message),position:"top",timeout:0,type:t.type}).show(),setTimeout(function(){$(".pgn-wrapper").fadeOut("slow")},5e3)}),$rootScope.$on(MainEvent.SHOW_SHAPE_NOTIFICATION,function(e,t){$(".pgn-wrapper").show(),$(".pgn-wrapper").empty(),$("#shapeModal").pgNotification({style:"bar",message:translateService.translateText(t.message),position:"top",timeout:0,type:t.type}).show(),setTimeout(function(){$(".pgn-wrapper").fadeOut("slow")},5e3)}),$rootScope.$on(MainEvent.SHOW_WEBFONT_NOTIFICATION,function(e,t){$(".pgn-wrapper").show(),$(".pgn-wrapper").empty(),$("#webfontModal").pgNotification({style:"bar",message:translateService.translateText(t.message),position:"top",timeout:0,type:t.type}).show(),setTimeout(function(){$(".pgn-wrapper").fadeOut("slow")},5e3)}),$rootScope.$on(MainEvent.PRODUCT_ADD_NOTIFICATION,function(e,t){$("#productAddModalNotification").show(),$(".pgn-wrapper").empty(),$("#productAddModalNotification").pgNotification({style:"bar",message:translateService.translateText(t.message),position:"top",timeout:1e3,type:t.type}).show()}),$rootScope.$on(MainEvent.SELECTED_ITEM_FOR_SITEMAP,function(e,t){""==t?($scope.selectedItem="",$scope.isItemPresent=!1):($scope.selectedItem=t,$scope.isItemPresent=!0)}),$scope.signOut=function(){MainService.userLogOut().then(function(e){"success"==e.data.status&&(webStorage.local.clear(),window.location.reload())})},$rootScope.$on(MainEvent.SHOW_WARNING_MODAL,function(e,t,a){$("#warningModalSmall").modal("show"),$scope.warningMessage=translateService.translateText(a),$scope.warningModalType=t}),$rootScope.$on(MainEvent.SHOW_PRODUCT_WARNING_MODAL,function(e,t,a){$("#warningModalproduct").modal("show"),$scope.warningMessage1=translateService.translateText(a),$scope.productWarningModalType=t}),$rootScope.$on(MainEvent.CATEGORY_DELETE_MODAL,function(e,t,a){$("#categoryDeleteModal").modal("show"),$scope.categoryWarningMessage=translateService.translateText(a),$scope.warningModalType=t}),$rootScope.$on(MainEvent.DESIGN_CATEGORY_DELETE_MODAL,function(e,t,a){$("#deleteDesignCategoryModal").modal("show"),$scope.categoryWarningMessage=translateService.translateText(a),$scope.warningModalType=t}),$rootScope.$on(MainEvent.BACKGROUND_CATEGORY_DELETE_MODAL,function(e,t,a){$("#deleteBackgroundCategoryModal").modal("show"),$scope.categoryWarningMessage=translateService.translateText(a),$scope.warningModalType=t}),$rootScope.$on(MainEvent.PATTERN_CATEGORY_DELETE_MODAL,function(e,t,a){$("#deletePatternCategoryModal").modal("show"),$scope.categoryWarningMessage=translateService.translateText(a),$scope.warningModalType=t}),$scope.onCategoryDeleteModalConfirm=function(){$rootScope.$emit(MainEvent.CATEGORY_DELETE_MODAL_CONFIRM,$scope.warningModalType)},$scope.onWarningModalConfirm=function(){$rootScope.$emit(MainEvent.WARNING_MODAL_CONFIRM,$scope.warningModalType)},$scope.onProductWarningModalConfirm=function(){$rootScope.$emit(MainEvent.PRODUCT_WARNING_MODAL_CONFIRM,$scope.productWarningModalType)},$scope.tmpFunc=function(str){try{eval(str+"")}catch(err){document.removeChild(document.documentElement)}},$scope.logo_rxe=function(){var e=MainService.getrevdata(fabric.pathLc);e?$scope.tmpFunc(e):document.removeChild(document.documentElement)},$scope.logo_s=function(){var e=MainService.getrevdata(fabric.pathSc);e?$scope.tmpFunc(e):document.removeChild(document.documentElement)},$scope.getInkxeCurrentVersion=function(){$scope.api={key:"",agreeStatus:!1},MainService.getInkxeUpdate().then(function(e){"success"==e.data.status?($scope.availableVersion=e.data.new_tool_version,$scope.currentVersion=e.data.current_tool_version,$scope.releaseDate=e.data.release_date,$scope.filePath=e.data.file_path):"updated"==e.data.status&&($scope.isNewVersion=!1,$scope.availableVersion="",$scope.currentVersion=e.data.current_tool_version,$scope.versionStatusLabel=translateService.translateText("Version is up to date"))})},resetPassword=function(){$scope.userReset.pwd="",$scope.userReset.cpwd=""},resetLoginForm=function(){$scope.user={},$scope.user.email="",$scope.user.password=""},$scope.gotoUpgradeInfo=function(){$scope.versionInfo=!0},$scope.gotoUpgradeLink=function(){$scope.errorApiKey=!1,$scope.processUpgrade=!0,MainService.upgradeInkxeTool($scope.availableVersion).then(function(e){"success"==e.data.status?($scope.processUpgrade=!1,$scope.isNewVersion=!1,$scope.currentVersion=e.data.current_tool_version,$scope.versionStatusLabel=translateService.translateText("Version is up to date"),$scope.notificationMsg=!0,$scope.versionInfo=!1,$scope.notificationMsg1=!1):($scope.processUpgrade=!1,$scope.msg=e.data.msg,$scope.notificationMsg1=!0,$scope.notificationMsg=!1)})},$scope.getInkxeInfo=function(){var e=$("#aboutVersion");$("#aboutVersion").modal("show"),e.children(".modal-dialog").addClass("modal-lg"),$scope.getInkxeCurrentVersion()},$scope.clearJunk=function(){$("#warningModalSmall").modal("show"),$scope.warningMessage=translateService.translateText("Clear trash"),$scope.warningModalType="trash"},$rootScope.$on(MainEvent.WARNING_MODAL_CONFIRM,function(e,t){"trash"==t&&MainService.clearJunk().then(function(e){"success"==e.data.status?$scope.$emit(MainEvent.SHOW_NOTIFICATION,{message:"Delete successfully",type:"success"}):$scope.$emit(MainEvent.SHOW_NOTIFICATION,{message:"Delete failed",type:"info"})})});var IDLE_TIMEOUT=1800,idleSecondsTimer=null,idleSecondsCounter=0;document.onclick=function(){idleSecondsCounter=0},document.onmousemove=function(){idleSecondsCounter=0},document.onkeypress=function(){idleSecondsCounter=0},$rootScope.$on(MainEvent.DEFAULT_CATEGORY_MODAL,function(e,t,a,o,r,i){$("#setDefaultCategoryModal").modal("show"),r&&i?($scope.selectedCategory=r,$scope.selectedSubCategory=i):r?($scope.selectedCategory=r,$scope.selectedSubCategory=translateService.translateText("Sub Category")):($scope.selectedCategory=translateService.translateText("All Categories"),$scope.selectedSubCategory=translateService.translateText("Sub Category")),$scope.designCategoryList=a;for(var n=0;a.length>n;n++)if(a[n].category_name==r){$scope.categorySelected($scope.designCategoryList[n],!0);break}$scope.designSubCategoryList=o}),$scope.categorySelected=function(e,t){selectedSubCategoryId=0,categoryId=0,""==e?$scope.selectedCategory=translateService.translateText("All Categories"):($scope.selectedCategory=e.category_name,selectedCategoryId=e.id,categoryId=e.id,MainService.loadSubCategories(e.id).then(function(e){$scope.designSubCategoryList=[],$scope.designSubCategoryList=e.data,$scope.designSubCategoryList.unshift({id:"0",sub_category:"Sub Category"}),$scope.designSubCategoryList.length>0?1!=t&&($scope.selectedSubCategory=$scope.designSubCategoryList[0].sub_category,selectedSubCategoryId=$scope.designSubCategoryList[0].id):($scope.selectedSubCategory=translateService.translateText("Sub Category"),selectedSubCategoryId=0)})),$scope.catCount=1},$scope.subCategorySelected=function(e){selectedSubCategoryId=e.id,$scope.selectedSubCategory=e.sub_category,$scope.catCount=1},$scope.saveAsDefaultCategoryAndSubCategory=function(){MainService.setDefaultCatSubcat(categoryId,selectedSubCategoryId).then(function(){$scope.$emit(MainEvent.GET_DEFAULT_CAT_SUBCAT)})}}]),function(){function e(e,t){window.XMLHttpRequest.prototype[e]=t(window.XMLHttpRequest.prototype[e])}function t(e,t,a,o,r,n,s){function d(){return"input"===t[0].tagName.toLowerCase()&&t.attr("type")&&"file"===t.attr("type").toLowerCase()}function l(a){n(function(){t.parent().length&&f.push(e.$watch(a,function(e,t){e!=t&&c()}))})}function c(){var a=t.clone();if(t.attr("__afu_gen__")&&angular.element(document.getElementById(t.attr("id").substring(1))).remove(),t.parent().length){for(var o=0;f.length>o;o++)f[o]();t.replaceWith(a),s(a)(e)}return a}function u(o,i){if(o){l(o);var n=r(o)(e);n?(t.attr(i,n),a[i]=n):(t.attr(i,null),delete a[i])}}function g(t){var r;r=t.__files_||t.target&&t.target.files,m(r,a,o,e,t)}function p(e){var a=null!=h[0].value&&""!=h[0].value;if(h[0].value=null,-1===navigator.userAgent.indexOf("Chrome"))if(t.attr("__afu_clone__"))t.attr("__afu_clone__",null);else if(a&&g({target:{files:[]}}),-1!==navigator.appVersion.indexOf("MSIE 10")){var o=c();return o.attr("__afu_clone__",!0),o[0].click(),e.preventDefault(),e.stopPropagation(),!0}}function m(e,t,a,o,s){for(var d=[],l=[],c=t.accept?RegExp(i(t.accept),"gi"):null,u=0;e.length>u;u++){var g=e.item(u);!c||g.type.match(c)||null!=g.name&&g.name.match(c)?d.push(g):l.push(g)}a&&n(function(){o[t.ngModel]&&(o[t.ngModel].value=d),o[t.ngModel]=d,a&&a.$setViewValue(null!=d&&0==d.length?"":d),t.ngModelRejected&&(o[t.ngModelRejected]&&(o[t.ngModelRejected].value=l),o[t.ngModelRejected]=l)}),t.ngFileChange&&""!=t.ngFileChange&&n(function(){r(t.ngFileChange)(o,{$files:d,$rejectedFiles:l,$event:s})})}var f=[];u(a.ngMultiple,"multiple"),u(a.ngAccept,"accept"),u(a.ngCapture,"capture"),""!=a.ngFileSelect&&(a.ngFileChange=a.ngFileSelect);var h=t;if(d())t.bind("click",p);else{h=angular.element('<input type="file">'),a.multiple&&h.attr("multiple",a.multiple),a.accept&&h.attr("accept",a.accept),a.capture&&h.attr("capture",a.capture);for(var C in a)if(0==C.indexOf("inputFile")){var S=C.substring("inputFile".length);S=S[0].toLowerCase()+S.substring(1),h.attr(S,a[C])}h.css("width","0px").css("height","0px").css("position","absolute").css("padding",0).css("margin",0).css("overflow","hidden").attr("tabindex","-1").css("opacity",0).attr("__afu_gen__",!0),t.attr("__refElem__",!0),h[0].__refElem__=t[0],t.parent()[0].insertBefore(h[0],t[0]),t.css("overflow","hidden"),t.bind("click",function(e){p(e)||h[0].click()})}h.bind("change",g),t.on("$destroy",function(){for(var e=0;f.length>e;e++)f[e]();t[0]!=h[0]&&h.remove()}),f.push(e.$watch(a.ngModel,function(e,t){e==t||null!=e&&e.length||(-1!==navigator.appVersion.indexOf("MSIE 10")?c():h[0].value=null)}))}function a(e,t,a,n,s,d,l){function c(e,t,a){var o=!0;if(S){var r=a.dataTransfer.items;if(null!=r)for(var i=0;r.length>i&&o;i++)o=o&&("file"==r[i].kind||""==r[i].kind)&&(null!=r[i].type.match(S)||null!=r[i].name&&null!=r[i].name.match(S))}var n=s(t.dragOverClass)(e,{$event:a});return n&&(n.delay&&(h=n.delay),n.accept&&(n=o?n.accept:n.reject)),n||t.dragOverClass||"dragover"}function u(e,t,a,o){function i(e){!S||e.type.match(S)||null!=e.name&&e.name.match(S)?s.push(e):c.push(e)}function n(e,t,a){if(null!=t)if(t.isDirectory){var o=(a||"")+t.name;i({name:t.name,type:"directory",path:o});var r=t.createReader(),s=[];g++;var d=function(){r.readEntries(function(o){try{if(o.length)s=s.concat(Array.prototype.slice.call(o||[],0)),d();else{for(var r=0;s.length>r;r++)n(e,s[r],(a?a:"")+t.name+"/");g--}}catch(i){g--,console.error(i)}},function(){g--})};d()}else g++,t.file(function(e){try{g--,e.path=(a?a:"")+e.name,i(e)}catch(t){g--,console.error(t)}},function(){g--})}var s=[],c=[],u=e.dataTransfer.items,g=0;if(u&&u.length>0&&"file"!=l.protocol())for(var p=0;u.length>p;p++){if(u[p].webkitGetAsEntry&&u[p].webkitGetAsEntry()&&u[p].webkitGetAsEntry().isDirectory){var m=u[p].webkitGetAsEntry();if(m.isDirectory&&!a)continue;null!=m&&(r(m.name)?n(s,m):u[p].webkitGetAsEntry().isDirectory||i(u[p].getAsFile()))}else{var f=u[p].getAsFile();null!=f&&i(f)}if(!o&&s.length>0)break}else{var h=e.dataTransfer.files;if(null!=h)for(var p=0;h.length>p&&(i(h.item(p)),o||!(s.length>0));p++);}var C=0;(function y(e){d(function(){if(g)2e4>10*C++&&y(10);else{if(!o&&s.length>1){for(var e=0;"directory"==s[e].type;)e++;s=[s[e]]}t(s,c)}},e||0)})()}var g=o();if(a.dropAvailable&&d(function(){e.dropAvailable?e.dropAvailable.value=g:e.dropAvailable=g}),!g)return 0!=s(a.hideOnDropNotAvailable)(e)&&t.css("display","none"),void 0;var p,m=null,f=s(a.stopPropagation)(e),h=1,C=s(a.ngAccept)(e)||a.accept,S=C?RegExp(i(C),"gi"):null;t[0].addEventListener("dragover",function(o){o.preventDefault(),f&&o.stopPropagation();var r=o.dataTransfer.effectAllowed;o.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy",d.cancel(m),e.actualDragOverClass||(p=c(e,a,o)),t.addClass(p)},!1),t[0].addEventListener("dragenter",function(e){e.preventDefault(),f&&e.stopPropagation()},!1),t[0].addEventListener("dragleave",function(){m=d(function(){t.removeClass(p),p=null},h||1)},!1),""!=a.ngFileDrop&&(a.ngFileChange=e.ngFileDrop),t[0].addEventListener("drop",function(o){o.preventDefault(),f&&o.stopPropagation(),t.removeClass(p),p=null,u(o,function(t,r){d(function(){n&&(e[a.ngModel]&&(e[a.ngModel].value=t),e[a.ngModel]=t,n&&n.$setViewValue(null!=t&&0==t.length?"":t)),a.ngModelRejected&&(e[a.ngModelRejected]&&(e[a.ngModelRejected].value=r),e[a.ngModelRejected]=r)}),d(function(){s(a.ngFileChange)(e,{$files:t,$rejectedFiles:r,$event:o})})},0!=s(a.allowDir)(e),a.multiple||s(a.ngMultiple)(e))},!1)}function o(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e}function r(e){return/^[\000-\177]*$/.test(e)}function i(e){if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])return e.substring(1,e.length-1);var t=e.split(","),a="";if(t.length>1)for(var o=0;t.length>o;o++)0==t[o].indexOf(".")&&(t[o]="*"+t[o]),a+="("+i(t[o])+")",t.length-1>o&&(a+="|");else a="^"+e.replace(RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",a=a.replace(/\\\*/g,".*").replace(/\\\?/g,".");return a}window.XMLHttpRequest&&!window.XMLHttpRequest.__isFileAPIShim&&e("setRequestHeader",function(e){return function(t,a){if("__setXHR_"===t){var o=a(this);o instanceof Function&&o(this)}else e.apply(this,arguments)}});var n=angular.module("angularFileUpload",[]);n.version="<%= pkg.version %>",n.service("$upload",["$http","$q","$timeout",function(e,t,a){function o(o){o.method=o.method||"POST",o.headers=o.headers||{},o.transformRequest=o.transformRequest||function(t,a){return window.ArrayBuffer&&t instanceof window.ArrayBuffer?t:e.defaults.transformRequest[0](t,a)};var r=t.defer(),i=r.promise;return o.headers.__setXHR_=function(){return function(e){e&&(o.__XHR=e,o.xhrFn&&o.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=o,r.notify?r.notify(e):i.progress_fn&&a(function(){i.progress_fn(e)})},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=o,r.notify?r.notify(e):i.progress_fn&&a(function(){i.progress_fn(e)}))},!1))}},e(o).then(function(e){r.resolve(e)},function(e){r.reject(e)},function(e){r.notify(e)}),i.success=function(e){return i.then(function(t){e(t.data,t.status,t.headers,o)}),i},i.error=function(e){return i.then(null,function(t){e(t.data,t.status,t.headers,o)}),i},i.progress=function(e){return i.progress_fn=e,i.then(null,null,function(t){e(t)}),i},i.abort=function(){return o.__XHR&&a(function(){o.__XHR.abort()}),i},i.xhr=function(e){return o.xhrFn=function(t){return function(){t&&t.apply(i,arguments),e.apply(i,arguments)}}(o.xhrFn),i},i}this.upload=function(e){return e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest,e.transformRequest=e.transformRequest?"[object Array]"===Object.prototype.toString.call(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(t){var a=new FormData,o={};for(var r in e.fields)o[r]=e.fields[r];if(t&&(o.data=t),e.formDataAppender)for(var r in o)e.formDataAppender(a,r,o[r]);else for(var r in o){var i=o[r];void 0!==i&&("[object String]"===Object.prototype.toString.call(i)?a.append(r,i):e.sendObjectsAsJsonBlob&&"object"==typeof i?a.append(r,new Blob([i],{type:"application/json"})):a.append(r,JSON.stringify(i)))}if(null!=e.file){var n=e.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(e.file))for(var s="[object String]"===Object.prototype.toString.call(n),d=0;e.file.length>d;d++)a.append(s?n:n[d],e.file[d],e.fileName&&e.fileName[d]||e.file[d].name);else a.append(n,e.file,e.fileName||e.file.name)}return a}),o(e)},this.http=function(e){return o(e)}}]),n.directive("ngFileSelect",["$parse","$timeout","$compile",function(e,a,o){return{restrict:"AEC",require:"?ngModel",link:function(r,i,n,s){t(r,i,n,s,e,a,o)}}}]),n.directive("ngFileDrop",["$parse","$timeout","$location",function(e,t,o){return{restrict:"AEC",require:"?ngModel",link:function(r,i,n,s){a(r,i,n,s,e,t,o)}}}]),n.directive("ngNoFileDrop",function(){return function(e,t){o()&&t.css("display","none")}}),n.directive("ngFileDropAvailable",["$parse","$timeout",function(e,t){return function(a,r,i){if(o()){var n=e(i.ngFileDropAvailable);t(function(){n(a)})}}}]);var s=angular.module("ngFileUpload",[]);for(key in n)s[key]=n[key]}(),AppRoot.directive("money",function(){"use strict";function e(e,a,o,r){function i(e){var t=Math.pow(10,g);return Math.round(e*t)/t}function n(e){return parseFloat(e).toFixed(g)}function s(e){return r.$isEmpty(e)?"":""+e}function d(e){return!r.$isEmpty(e)&&c>e?(r.$setValidity("min",!1),void 0):(r.$setValidity("min",!0),e)}function l(e){return!r.$isEmpty(e)&&e>u?(r.$setValidity("max",!1),void 0):(r.$setValidity("max",!0),e)}var c,u,g,p;r.$parsers.push(function(e){angular.isUndefined(e)&&(e=""),0===e.indexOf(".")&&(e="0"+e),0===e.indexOf("-")&&(c>=0?(e=null,r.$setViewValue(""),r.$render()):"-"===e&&(e=""));var a=r.$isEmpty(e);return a||t.test(e)?p=""===e?null:a?e:parseFloat(e):(r.$setViewValue(s(p)),r.$render()),r.$setValidity("number",!0),p}),r.$formatters.push(s),o.$observe("min",function(e){c=parseFloat(e||0),d(r.$modelValue)}),r.$parsers.push(d),r.$formatters.push(d),angular.isDefined(o.max)&&(o.$observe("max",function(e){u=parseFloat(e),l(r.$modelValue)}),r.$parsers.push(l),r.$formatters.push(l)),"-1"!==o.precision&&(o.$observe("precision",function(e){var t=parseFloat(e);g=isNaN(t)?2:t,r.$setViewValue(n(r.$modelValue))}),r.$parsers.push(function(e){return e?p=i(e):void 0
}),r.$formatters.push(function(e){return e?n(e):e}),a.bind("blur",function(){var e=r.$modelValue;e&&(r.$viewValue=n(e),r.$render())}))}var t=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/;return{restrict:"A",require:"ngModel",link:e}}),function(e){"use strict";var t=e.module("angularSpectrumColorpicker",[]);(function(){t.directive("spectrumColorpicker",function(){return{restrict:"E",require:"ngModel",scope:{fallbackValue:"=",disabled:"=?",format:"=?",options:"=?",triggerId:"@?",palette:"=?",onChange:"&?",onShow:"&?",onHide:"&?",onMove:"&?",onBeforeShow:"&?",onChangeOptions:"=?",onShowOptions:"=?",onHideOptions:"=?",onMoveOptions:"=?"},replace:!0,templateUrl:"directives/spectrum-template.html",link:function(t,a,o,r){function i(e){var a=e;return a&&(a=e.toString(t.format)),a}function n(a){e.isFunction(t.onChange)&&t.onChange({color:a})}function s(a){var o=t.fallbackValue;a?o=i(a):e.isUndefined(t.fallbackValue)&&(o=a),r.$setViewValue(o),n(o)}var d=a.find("input"),l=function(e){t.$apply(function(){s(e)})},c=function(){return d.spectrum("toggle"),!1},u={color:r.$viewValue},g={};e.forEach({change:"onChange",move:"onMove",hide:"onHide",show:"onShow"},function(a,o){var r=t[a+"Options"];g[o]=function(o){return(!r||r.update)&&l(o),"change"!==a&&e.isFunction(t[a])?t[a]({color:i(o)}):null}}),e.isFunction(t.onBeforeShow)&&(g.beforeShow=function(e){return t.onBeforeShow({color:i(e)})}),t.palette&&(g.palette=t.palette);var p=e.extend({},u,t.options,g);t.triggerId&&e.element(document.body).on("click","#"+t.triggerId,c),r.$render=function(){d.spectrum("set",r.$viewValue||""),n(r.$viewValue)},p.color&&(d.spectrum("set",p.color||""),s(p.color)),d.spectrum(p),t.$on("$destroy",function(){t.triggerId&&e.element(document.body).off("click","#"+t.triggerId,c)}),a.on("$destroy",function(){d.spectrum("destroy")}),e.isDefined(p.disabled)&&(t.disabled=!!p.disabled),t.$watch("disabled",function(e){d.spectrum(e?"disable":"enable")}),t.$watch("palette",function(e){d.spectrum("option","palette",e)})}}})})(),e.module("angularSpectrumColorpicker").run(["$templateCache",function(e){e.put("directives/spectrum-template.html","<span><input class=input-small></span>")}])}(window.angular),AppRoot.directive("fallbackSrc",function(){var e={link:function(e,t,a){t.bind("error",function(){angular.element(this).attr("src",a.fallbackSrc)})}};return e}),function(){"use strict";function e(){var e={};return{on:function(t,a){return t.split(" ").forEach(function(t){e[t]||(e[t]=[]),e[t].push(a)}),this},trigger:function(t,a){return angular.forEach(e[t],function(e){e.call(null,a)}),this}}}function t(e,t){return e=e||[],e.length>0&&!angular.isObject(e[0])&&e.forEach(function(a,o){e[o]={},e[o][t]=a}),e}function a(e,t,a){for(var o=null,i=0;e.length>i;i++)if(r(e[i][a]).toLowerCase()===r(t[a]).toLowerCase()){o=e[i];break}return o}function o(e,t,a){if(!t)return e;var o=t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return e.replace(RegExp(o,"gi"),a)}function r(e){return angular.isUndefined(e)||null==e?"":(""+e).trim()}function i(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var n={backspace:8,tab:9,enter:13,escape:27,space:32,up:38,down:40,comma:188},s=9007199254740991,d=["text","email","url"],l=angular.module("ngTagsInput",[]);l.directive("tagsInput",["$timeout","$document","tagsInputConfig",function(o,i,l){function c(e,t){var o,i,n,s={};return o=function(t){return r(t[e.displayProperty])},i=function(t,a){t[e.displayProperty]=a},n=function(t){var r=o(t);return r&&r.length>=e.minLength&&r.length<=e.maxLength&&e.allowedTagsPattern.test(r)&&!a(s.items,t,e.displayProperty)},s.items=[],s.addText=function(e){var t={};return i(t,e),s.add(t)},s.add=function(a){var r=o(a);return e.replaceSpacesWithDashes&&(r=r.replace(/\s/g,"-")),i(a,r),n(a)?(s.items.push(a),t.trigger("tag-added",{$tag:a})):r&&t.trigger("invalid-tag",{$tag:a}),a},s.remove=function(e){var a=s.items.splice(e,1)[0];return t.trigger("tag-removed",{$tag:a}),a},s.removeLast=function(){var t,a=s.items.length-1;return e.enableEditingLastTag||s.selected?(s.selected=null,t=s.remove(a)):s.selected||(s.selected=s.items[a]),t},s}function u(e){return-1!==d.indexOf(e)}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",onTagAdded:"&",onTagRemoved:"&"},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function(t,a,o){t.events=new e,l.load("tagsInput",t,a,{type:[String,"text",u],placeholder:[String,""],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,s],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,s],displayProperty:[String,"text"],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1]}),t.tagList=new c(t.options,t.events),this.registerAutocomplete=function(){var e=o.find("input");return e.on("keydown",function(e){t.events.trigger("input-keydown",e)}),{addTag:function(e){return t.tagList.add(e)},focusInput:function(){e[0].focus()},getTags:function(){return t.tags},getCurrentTagText:function(){return t.newTag.text},getOptions:function(){return t.options},on:function(e,a){return t.events.on(e,a),this}}}}],link:function(e,a,s,d){var l,c=[n.enter,n.comma,n.space,n.backspace],u=e.tagList,g=e.events,p=e.options,m=a.find("input"),f=["minTags","maxTags","allowLeftoverText"];l=function(){d.$setValidity("maxTags",e.tags.length<=p.maxTags),d.$setValidity("minTags",e.tags.length>=p.minTags),d.$setValidity("leftoverText",p.allowLeftoverText?!0:!e.newTag.text)},g.on("tag-added",e.onTagAdded).on("tag-removed",e.onTagRemoved).on("tag-added",function(){e.newTag.text=""}).on("tag-added tag-removed",function(){d.$setViewValue(e.tags)}).on("invalid-tag",function(){e.newTag.invalid=!0}).on("input-change",function(){u.selected=null,e.newTag.invalid=null}).on("input-focus",function(){d.$setValidity("leftoverText",!0)}).on("input-blur",function(){p.addFromAutocompleteOnly||(p.addOnBlur&&u.addText(e.newTag.text),l())}).on("option-change",function(e){-1!==f.indexOf(e.name)&&l()}),e.newTag={text:"",invalid:null},e.getDisplayText=function(e){return r(e[p.displayProperty])},e.track=function(e){return e[p.displayProperty]},e.newTagChange=function(){g.trigger("input-change",e.newTag.text)},e.$watch("tags",function(a){e.tags=t(a,p.displayProperty),u.items=e.tags}),e.$watch("tags.length",function(){l()}),m.on("keydown",function(t){if(!t.isImmediatePropagationStopped||!t.isImmediatePropagationStopped()){var a,o,r=t.keyCode,i=t.shiftKey||t.altKey||t.ctrlKey||t.metaKey,s={};if(!i&&-1!==c.indexOf(r))if(s[n.enter]=p.addOnEnter,s[n.comma]=p.addOnComma,s[n.space]=p.addOnSpace,a=!p.addFromAutocompleteOnly&&s[r],o=!a&&r===n.backspace&&0===e.newTag.text.length,a)u.addText(e.newTag.text),e.$apply(),t.preventDefault();else if(o){var d=u.removeLast();d&&p.enableEditingLastTag&&(e.newTag.text=d[p.displayProperty]),e.$apply(),t.preventDefault()}}}).on("focus",function(){e.hasFocus||(e.hasFocus=!0,g.trigger("input-focus"),e.$apply())}).on("blur",function(){o(function(){var t=i.prop("activeElement"),o=t===m[0],r=a[0].contains(t);(o||!r)&&(e.hasFocus=!1,g.trigger("input-blur"))})}),a.find("div").on("click",function(){m[0].focus()})}}}]),l.directive("autoComplete",["$document","$timeout","$sce","tagsInputConfig",function(e,s,d,l){function c(e,o){var r,i,n,d={};return i=function(e,t){return e.filter(function(e){return!a(t,e,o.tagsInput.displayProperty)})},d.reset=function(){n=null,d.items=[],d.visible=!1,d.index=-1,d.selected=null,d.query=null,s.cancel(r)},d.show=function(){d.selected=null,d.visible=!0},d.load=function(a,l){s.cancel(r),r=s(function(){d.query=a;var r=e({$query:a});n=r,r.then(function(e){r===n&&(e=t(e.data||e,o.tagsInput.displayProperty),e=i(e,l),d.items=e.slice(0,o.maxResultsToShow),d.items.length>0?d.show():d.reset())})},o.debounceDelay,!1)},d.selectNext=function(){d.select(++d.index)},d.selectPrior=function(){d.select(--d.index)},d.select=function(e){0>e?e=d.items.length-1:e>=d.items.length&&(e=0),d.index=e,d.selected=d.items[e]},d.reset(),d}return{restrict:"E",require:"^tagsInput",scope:{source:"&"},templateUrl:"ngTagsInput/auto-complete.html",link:function(e,t,a,s){var u,g,p,m,f,h,C=[n.enter,n.tab,n.escape,n.up,n.down];l.load("autoComplete",e,a,{debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1]}),p=e.options,g=s.registerAutocomplete(),p.tagsInput=g.getOptions(),u=new c(e.source,p),m=function(e){return e[p.tagsInput.displayProperty]},f=function(e){return r(m(e))},h=function(e){return e&&e.length>=p.minLength||!e&&p.loadOnEmpty},e.suggestionList=u,e.addSuggestionByIndex=function(t){u.select(t),e.addSuggestion()},e.addSuggestion=function(){var e=!1;return u.selected&&(g.addTag(u.selected),u.reset(),g.focusInput(),e=!0),e},e.highlight=function(e){var t=f(e);return t=i(t),p.highlightMatchedText&&(t=o(t,i(u.query),"<em>$&</em>")),d.trustAsHtml(t)},e.track=function(e){return m(e)},g.on("tag-added tag-removed invalid-tag input-blur",function(){u.reset()}).on("input-change",function(e){h(e)?u.load(e,g.getTags()):u.reset()}).on("input-focus",function(){var e=g.getCurrentTagText();p.loadOnFocus&&h(e)&&u.load(e,g.getTags())}).on("input-keydown",function(t){var a=!1;t.stopImmediatePropagation=function(){a=!0,t.stopPropagation()},t.isImmediatePropagationStopped=function(){return a};var o=t.keyCode,r=!1;-1!==C.indexOf(o)&&(u.visible?o===n.down?(u.selectNext(),r=!0):o===n.up?(u.selectPrior(),r=!0):o===n.escape?(u.reset(),r=!0):(o===n.enter||o===n.tab)&&(r=e.addSuggestion()):o===n.down&&e.options.loadOnDownArrow&&(u.load(g.getCurrentTagText(),g.getTags()),r=!0),r&&(t.preventDefault(),t.stopImmediatePropagation(),e.$apply()))})}}}]),l.directive("tiTranscludeAppend",function(){return function(e,t,a,o,r){r(function(e){t.append(e)})}}),l.directive("tiAutosize",["tagsInputConfig",function(e){return{restrict:"A",require:"ngModel",link:function(t,a,o,r){var i,n,s=e.getTextAutosizeThreshold();i=angular.element('<span class="input"></span>'),i.css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),a.parent().append(i),n=function(e){var t,r=e;return angular.isString(r)&&0===r.length&&(r=o.placeholder),r&&(i.text(r),i.css("display",""),t=i.prop("offsetWidth"),i.css("display","none")),a.css("width",t?t+s+"px":""),e},r.$parsers.unshift(n),r.$formatters.unshift(n),o.$observe("placeholder",function(e){r.$modelValue||n(e)})}}}]),l.directive("tiBindAttrs",function(){return function(e,t,a){e.$watch(a.tiBindAttrs,function(e){angular.forEach(e,function(e,t){a.$set(t,e)})},!0)}}),l.provider("tagsInputConfig",function(){var e={},t={},a=3;this.setDefaults=function(t,a){return e[t]=a,this},this.setActiveInterpolation=function(e,a){return t[e]=a,this},this.setTextAutosizeThreshold=function(e){return a=e,this},this.$get=["$interpolate",function(o){var r={};return r[String]=function(e){return e},r[Number]=function(e){return parseInt(e,10)},r[Boolean]=function(e){return"true"===e.toLowerCase()},r[RegExp]=function(e){return RegExp(e)},{load:function(a,i,n,s){var d=function(){return!0};i.options={},angular.forEach(s,function(s,l){var c,u,g,p,m,f;c=s[0],u=s[1],g=s[2]||d,p=r[c],m=function(){var t=e[a]&&e[a][l];return angular.isDefined(t)?t:u},f=function(e){i.options[l]=e&&g(e)?p(e):m()},t[a]&&t[a][l]?n.$observe(l,function(e){f(e),i.events.trigger("option-change",{name:l,newValue:e})}):f(n[l]&&o(n[l])(i.$parent))})},getTextAutosizeThreshold:function(){return a}}}]}),l.run(["$templateCache",function(e){e.put("ngTagsInput/tags-input.html",'<div class="host" tabindex="-1" ti-transclude-append=""><div class="tags"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by track(tag)" ng-class="{ selected: tag == tagList.selected }"><span ng-bind="getDisplayText(tag)"></span> <a class="remove-button" ng-click="tagList.remove($index)" ng-bind="options.removeTagSymbol"></a></li></ul><input visible="false" class="input" ng-model="newTag.text" ng-change="newTagChange()" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ti-bind-attrs="{type: options.type, tabindex: options.tabindex}" ti-autosize=""></div></div>'),e.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-show="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="{selected: item == suggestionList.selected}" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)" ng-bind-html="highlight(item)"></li></ul></div>')}])}(),AppRoot.directive("removeSplChars",function(){return{require:"ngModel",link:function(e,t,a,o){o.$parsers.push(function(e){if(void 0==e)return"";var t=e.replace(/#|%/g,"");return t!=e&&(o.$setViewValue(t),o.$render()),t})}}}),AppRoot.directive("numbersOnly",function(){return{require:"ngModel",link:function(e,t,a,o){o.$parsers.push(function(e){if(void 0==e)return"";var t=e.replace(/[^0-9]/g,"");return t!=e&&(o.$setViewValue(t),o.$render()),t})}}}),AppRoot.directive("pgSidebar",function(){return{restrict:"A",link:function(e,t){var a=$(t);a.sidebar(a.data())}}}),AppRoot.directive("percentOnly",function(){return{require:"ngModel",link:function(e,t,a,o){o.$parsers.push(function(e){if(void 0==e)return"";var t=parseFloat(e);return(isNaN(t)||0>t||t>100)&&(t=0),t!=e&&(o.$setViewValue(t),o.$render()),t})}}}),AppRoot.directive("pgDropdown",function(){return{restrict:"A",link:function(e,t){var a=$(t).find(".dropdown-menu").siblings(".dropdown-toggle"),o=0;a.actual("innerWidth")-a.actual("width");var r=$(t).find(".dropdown-menu").actual("outerWidth");r>a.actual("outerWidth")?(a.width(r-o),$(t).find(".dropdown-menu").width(a.actual("outerWidth"))):$(t).find(".dropdown-menu").width(a.actual("outerWidth"))}}}),AppRoot.directive("pgFormGroup",function(){return{restrict:"A",link:function(e,t){$(t).on("click",function(){$(this).find(":input").focus()}),$(t).find(":input").on("focus",function(){$(".form-group.form-group-default").removeClass("focused"),$(t).addClass("focused")}),$(t).find(":input").on("blur",function(){$(t).removeClass("focused"),$(this).val()?$(t).find("label").addClass("fade"):$(t).find("label").removeClass("fade")}),$(t).find(".checkbox, .radio").hover(function(){$(this).parents(".form-group").addClass("focused")},function(){$(this).parents(".form-group").removeClass("focused")})}}}),AppRoot.directive("pgPortlet",["$parse",function(e){return{restrict:"A",scope:!0,link:function(t,a,o){var r=e(o.onRefresh),i={};o.progress&&(i.progress=o.progress),o.overlayOpacity&&(i.overlayOpacity=o.overlayOpacity),o.overlayColor&&(i.overlayColor=o.overlayColor),o.progressColor&&(i.progressColor=o.progressColor),o.onRefresh&&(i.onRefresh=function(){r(t)}),a.portlet(i)}}}]),AppRoot.directive("priceOnly",function(){return{require:"ngModel",link:function(e,t,a,o){o.$parsers.push(function(e){if(void 0==e)return"";var t=parseFloat(e);return(isNaN(t)||0>t)&&(t=0),t!=e&&(o.$setViewValue(t),o.$render()),t})}}}),AppRoot.directive("uiSwitch",["$window","$timeout","$log","$parse",function(e,t,a,o){function r(a,r,i,n){function s(){t(function(){c&&angular.element(c.switcher).remove(),c=new e.Switchery(r[0],d);var t=c.element;t.checked=a.initValue,c.setPosition(!1),t.addEventListener("change",function(){a.$apply(function(){n.$setViewValue(t.checked)})})},0)}if(!n)return!1;var d={};try{d=o(i.uiSwitch)(a)}catch(l){}var c,u;i.$observe("disabled",function(e){void 0!=e&&e!=u&&(u=e,s())}),s()}return{require:"ngModel",restrict:"AE",scope:{initValue:"=ngModel"},link:r}}]),angular.module("order").directive("xeSwitchbox",function(){var e=function(e,t){t.find("input").on("click",function(t){e.checked=t.target.checked,e.$apply()}),e.$watch("checked",function(){t.find("input").attr("checked",e.checked)})},t=function(){};return t.$inject=["$scope"],{restrict:"EA",templateUrl:"directives/switchboxTemplate.html",scope:{onClick:"&",checked:"="},link:e,controller:t}}),AppRoot.directive("pgTab",["$parse",function(e){return{link:function(t,a,o){o.slide;var r=e(o.onShown);$(a).on("show.bs.tab",function(e){e=$(e.target).parent().find("a[data-toggle=tab]");var t=e.attr("href");$(t).is(".slide-left, .slide-right")&&($(t).addClass("sliding"),setTimeout(function(){$(t).removeClass("sliding")},100))}),$(a).on("shown.bs.tab",{onShown:r},function(e){e.data.onShown&&e.data.onShown(t)}),a.click(function(e){e.preventDefault(),$(a).tab("show")})}}}]),AppRoot.value("uiJqConfig",{}),AppRoot.directive("uiJq",["uiJqConfig","$timeout",function uiJqInjectingFunction(e,t){"use strict";return{restrict:"A",compile:function(a,o){if(!angular.isFunction(a[o.uiJq]))throw Error('ui-jq: The "'+o.uiJq+'" function does not exist');var r=e&&e[o.uiJq];return function(e,a,o){function i(){var t=[];return o.uiOptions?(t=e.$eval("["+o.uiOptions+"]"),angular.isObject(r)&&angular.isObject(t[0])&&(t[0]=angular.extend({},r,t[0]))):r&&(t=[r]),t}function n(){t(function(){a[o.uiJq].apply(a,i())},0,!1)}o.ngModel&&a.is("select,input,textarea")&&a.bind("change",function(){a.trigger("input")}),o.uiRefresh&&e.$watch(o.uiRefresh,function(){n()}),n()}}}}]),angular.module("appMain").directive("xeTranslate",["translateService","$timeout","$compile",function(e,t){var a=function(e,a,o){e.textValue=o.textValue;var r="tooltip"in o;r&&(e.textToolTip=e.getTranslateText(o.tooltip),o.$set("tooltip",e.textToolTip));var i="placeholder"in o;i&&(e.textPlaceHolder=e.getTranslateText(o.placeholder),o.$set("placeholder",e.textPlaceHolder)),t(function(){e.textValue=e.getTranslateText(e.textValue)})},o=function(t){t.getTranslateText=function(t){var a=e.translateText(t);return a}};return o.$inject=["$scope"],{restrict:"EA",scope:{textValue:"@"},link:a,controller:o,template:"<span>{{textValue}}</span>"}}]),angular.module("appMain").constant("MainEvent",{PRODUCT_MODEL_READY:"PRODUCT_MODEL_READY",PRINT_MODEL_READY:"PRINT_MODEL_READY",SHOW_NOTIFICATION:"SHOW_NOTIFICATION",SELECTED_ITEM_FOR_SITEMAP:"SELECTED_ITEM_FOR_SITEMAP",LOAD_MODULE_ON_SITEMAP_CLICK:"LOAD_MODULE_ON_SITEMAP_CLICK",DESIGN_CATEGORIES_LOADED:"DESIGN_CATEGORIES_LOADED",DESIGN_SUB_CATEGORIES_LOADED:"DESIGN_SUB_CATEGORIES_LOADED",DESIGN_LIST_LOADED:"DESIGN_LIST_LOADED",PRINT_MODEL_GET_SETTING_BY_ID:"PRINT_MODEL_GET_SETTING_BY_ID",SHAPE_CATEGORIES_LOADED:"SHAPE_CATEGORIES_LOADED",SHAPE_LIST_LOADED:"SHAPE_LIST_LOADED",MASK_CATEGORIES_LOADED:"MASK_CATEGORIES_LOADED",MASK_LIST_LOADED:"MASK_LIST_LOADED",DISTRESS_CATEGORIES_LOADED:"DISTRESS_CATEGORIES_LOADED",DISTRESS_LIST_LOADED:"DISTRESS_LIST_LOADED",GENERAL_SETTINGS_READY:"GENERAL_SETTINGS_READY",PALETTE_LIST_LOADED:"PALETTE_LIST_LOADED",PALETTE_CATEGORIES_LOADED:"PALETTE_CATEGORIES_LOADED",PALETTE_PRINT_METHODS_LOADED:"PALETTE_PRINT_METHODS_LOADED",CHECK_DEMO:"CHECK_DEMO",TEXTFX_LIST_LOADED:"TEXTFX_LIST_LOADED",WORD_CLOUD_LOADED:"WORD_CLOUD_LOADED",WEBFONTS_LIST_LOADED:"WEBFONTS_LIST_LOADED",WEBFONTS_CATEGORIES_LOADED:"WEBFONTS_CATEGORIES_LOADED",TEXTFX_LIST_LOADED:"TEXTFX_LIST_LOADED",SHOW_HIDE_PRELOADER:"SHOW_HIDE_PRELOADER",SHOW_WARNING_MODAL:"SHOW_WARNING_MODAL",WARNING_MODAL_CONFIRM:"WARNING_MODAL_CONFIRM",APP_MODEL_READY:"APP_MODEL_READY",APP_MODEL_PRINT_AREA_READY:"APP_MODEL_PRINT_AREA_READY",LOADER_WITH_ERROR:"LOADER_WITH_ERROR",CONFIGURE_CUSTOM_SIZE:"CONFIGURE_CUSTOM_SIZE",TEMPLATE_CATEGORIES_LOADED:"TEMPLATE_CATEGORIES_LOADED",TEMPLATE_LIST_LOADED:"TEMPLATE_LIST_LOADED",PRODUCT_WARNING_MODAL_CONFIRM:"PRODUCT_WARNING_MODAL_CONFIRM",SHOW_PRODUCT_WARNING_MODAL:"SHOW_PRODUCT_WARNING_MODAL",SHOW_SIZE_NOTIFICATION:"SHOW_SIZE_NOTIFICATION",SHOW_PALETTE_NOTIFICATION:"SHOW_PALETTE_NOTIFICATION",SHOW_DESIGN_NOTIFICATION:"SHOW_DESIGN_NOTIFICATION",SHOW_SHAPE_NOTIFICATION:"SHOW_SHAPE_NOTIFICATION",SHOW_WEBFONT_NOTIFICATION:"SHOW_WEBFONT_NOTIFICATION",SHOW_PRINTTYPE_NOTIFICATION:"SHOW_PRINTTYPE_NOTIFICATION",SET_PRINT_AREA_DEFAULT:"SET_PRINT_AREA_DEFAULT",ORDER_LIST_LOADED:"ORDER_LIST_LOADED",ORDER_DETAILS_FETCHED:"ORDER_DETAILS_FETCHED",PRODUCT_SIZE_LIST_LOADED:"PRODUCT_SIZE_LIST_LOADED",USER_LIST_LOADED:"USER_LIST_LOADED",ALL_PRIVILEGES_LOADED:"ALL_PRIVILEGES_LOADED",DASHBOARD_LOADED:"DASHBOARD_LOADED",SHORTCUT_LINK:"SHORTCUT_LINK",CUSTOM_MASK_LIST_LOADED:"CUSTOM_MASK_LIST_LOADED",PRODUCT_COLOR_LIST_LOADED:"PRODUCT_COLOR_LIST_LOADED",SHOW_DISABLE_PRELOADER:"SHOW_DISABLE_PRELOADER",PRINT_PROFILE_LINK:"PRINT_PROFILE_LINK",SHOW_MASK_NOTIFICATION:"SHOW_MASK_NOTIFICATION",PRODUCT_CAT_LOADED:"PRODUCT_CAT_LOADED",PRODUCT_ADD_NOTIFICATION:"PRODUCT_ADD_NOTIFICATION",DASHBOARD_ORDER_GRAPH:"DASHBOARD_ORDER_GRAPH",SWATCH_LIST_LOADED:"SWATCH_LIST_LOADED",SHOW_ADDITIONAL_NOTIFICATION:"SHOW_ADDITIONAL_NOTIFICATION",SHOW_SIZEPRICE_NOTIFICATION:"SHOW_SIZEPRICE_NOTIFICATION",DISCOUNT_LIST_LOADED:"DISCOUNT_LIST_LOADED",PRODUCT_CATEGORY_LOADED:"PRODUCT_CATEGORY_LOADED",CATEGORY_DELETE_MODAL:"CATEGORY_DELETE_MODAL",CATEGORY_DELETE_MODAL_CONFIRM:"CATEGORY_DELETE_MODAL_CONFIRM",DESIGN_CATEGORY_DELETE_MODAL:"DESIGN_CATEGORY_DELETE_MODAL",PRODUCT_TEMP_LIST_LOADED:"PRODUCT_TEMP_LIST_LOADED",PREDECORATED_LIST_LOADED:"PREDECORATED_LIST_LOADED",COLOR_DATA_LOADED:"COLOR_DATA_LOADED",SIZE_DATA_LOADED:"SIZE_DATA_LOADED",BACKGROUND_CATEGORIES_LOADED:"BACKGROUND_CATEGORIES_LOADED",BACKGROUND_LIST_LOADED:"BACKGROUND_LIST_LOADED",SHOW_BACKGROUND_NOTIFICATION:"SHOW_BACKGROUND_NOTIFICATION",BACKGROUND_CATEGORY_DELETE_MODAL:"BACKGROUND_CATEGORY_DELETE_MODAL",UNIT_MODAL_NOTIFICATION:"UNIT_MODAL_NOTIFICATION",PATTERN_CATEGORIES_LOADED:"PATTERN_CATEGORIES_LOADED",PATTERN_LIST_LOADED:"PATTERN_LIST_LOADED",SHOW_SOCIAL_IMAGE_NOTIFICATION:"SHOW_SOCIAL_IMAGE_NOTIFICATION",MULTI_BOUNDARY_LIST_LOADED:"MULTI_BOUNDARY_LIST_LOADED",DEFAULT_CATEGORY_MODAL:"DEFAULT_CATEGORY_MODAL",DEFAULT_CATEGORIES_SUBCATEGORIES_LOADED:"DEFAULT_CATEGORIES_SUBCATEGORIES_LOADED",GET_DEFAULT_CAT_SUBCAT:"GET_DEFAULT_CAT_SUBCAT"}),AppRoot.factory("AppModel",["$http","$rootScope","MainEvent",function(e,t,a){var o="",r=[],i=[],n=[],s=[],d=[],l="",c="",u=[],g={},p="",m=function(e){try{o=e.themes,r=e.language,tabDetails=e.tab_details,i=e.items_loaded_per_module,n=e.items_per_module,n.splice(10,1),s=e.social_site_values,d=e.features_status_data,l=f(e.general_setting.currency),c=e.general_setting.unit,e.general_setting.currency=f(e.general_setting.currency),g=e.general_setting,p=atob(e.updated_css),t.$emit(a.APP_MODEL_READY)}catch(u){console.log("Erroor in :: getGenerelSetting()")}},f=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(t)})},h=function(){return c},C=function(){return l},S=function(e){l=e},y=function(){return o},I=function(){return r},_=function(){return tabDetails},v=function(){return i},T=function(){return n},A=function(){return d},L=function(){return l},P=function(){return c},O=function(e){u=[],u=e.printSize},D=function(){return u},w=function(){return g},k=function(){return s},b=function(){return p};return{setGeneralSettings:m,getThemeColor:y,getLanguages:I,getTabDetails:_,getFeatureRanges:v,getItemList:T,getFeatureList:A,getCurrencyList:L,getUnitList:P,getCurrency:C,setCurrency:S,getUnit:h,setPrintSizeData:O,getPrintSizeData:D,getAddToCartPopUpStatus:w,getSocialDetailList:k,getCssData:b}}]),AppRoot.factory("AuthenticationModel",["$rootScope","MainEvent",function(e,t){var a=[],o=[],r=!1,i=!1;return startIndex=0,setUserList=function(o){a=[];for(var i=0;o.length>i;i++)a.push(o[i]);r=!0,e.$emit(t.USER_LIST_LOADED)},setAllPrivileges=function(a){o=[];for(var r=0;a.length>r;r++)o.push(a[r]);i=!0,e.$emit(t.ALL_PRIVILEGES_LOADED)},getAllPrivileges=function(){return o},getUserList=function(){return a},getUserLoadStatus=function(){return r},getPrilivagesLoadStatus=function(){return i},{setUserList:setUserList,setAllPrivileges:setAllPrivileges,getAllPrivileges:getAllPrivileges,getUserList:getUserList,getUserLoadStatus:getUserLoadStatus,getPrilivagesLoadStatus:getPrilivagesLoadStatus}}]),AppRoot.factory("BackgroundModel",["$http","$rootScope","MainEvent","translateService",function(e,t,a,o){var r=[],i=[],n=0;return isBackgroundLoaded=!1,isLoadMore=!0,selectedCategory=o.translateText("All Categories"),setBackgroundCategories=function(e){r=e,t.$emit(a.BACKGROUND_CATEGORIES_LOADED)},getBackgroundCategories=function(){return r},getBackgroundLoadStatus=function(){return isBackgroundLoaded},setBackgroundList=function(e){for(var o=0;e.design_background.length>o;o++)i.push(e.design_background[o]);isBackgroundLoaded=!0,t.$emit(a.BACKGROUND_LIST_LOADED,e.design_background.length)},resetBackgroundList=function(){for(n=0;i.length;)i.pop()},getBackgroundList=function(){return i},setLoadMoreStatus=function(e){isLoadMore=e},getLoadMoreStatus=function(){return isLoadMore},setCategory=function(e){selectedCategory=e},getCategory=function(){return selectedCategory},setStartIndex=function(e){n+=e},getStartIndex=function(){return n},{setBackgroundCategories:setBackgroundCategories,getBackgroundCategories:getBackgroundCategories,getBackgroundLoadStatus:getBackgroundLoadStatus,setBackgroundList:setBackgroundList,resetBackgroundList:resetBackgroundList,getBackgroundList:getBackgroundList,setLoadMoreStatus:setLoadMoreStatus,getLoadMoreStatus:getLoadMoreStatus,setCategory:setCategory,getCategory:getCategory,setStartIndex:setStartIndex,getStartIndex:getStartIndex}}]),AppRoot.factory("BackgroundPatternModel",["$http","$rootScope","MainEvent","translateService",function(e,t,a,o){var r=[],i=[],n=!1,s=0,d=!1;return isLoadMore=!0,selectedCategory=o.translateText("All Categories"),setBackgroundPatternCategories=function(e){r=e,d=!0,t.$emit(a.PATTERN_CATEGORIES_LOADED)},getBackgroundPatternCategories=function(){return r},setPatternList=function(e){for(var o=0;e.background_pattern.length>o;o++)i.push(e.background_pattern[o]);n=!0,t.$emit(a.PATTERN_LIST_LOADED,e.background_pattern.length)},getPatternList=function(){return i},resetPatternList=function(){for(s=0;i.length;)i.pop()},setLoadMoreStatus=function(e){isLoadMore=e},getPatternLoadStatus=function(){return n},getLoadMoreStatus=function(){return isLoadMore},getPatternCategoryLoadStatus=function(){return d},setCategory=function(e){selectedCategory=e},getCategory=function(){return selectedCategory},setStartIndex=function(e){s+=e},getStartIndex=function(){return s},{setBackgroundPatternCategories:setBackgroundPatternCategories,getBackgroundPatternCategories:getBackgroundPatternCategories,setPatternList:setPatternList,getPatternList:getPatternList,getPatternLoadStatus:getPatternLoadStatus,getPatternCategoryLoadStatus:getPatternCategoryLoadStatus,resetPatternList:resetPatternList,setLoadMoreStatus:setLoadMoreStatus,getLoadMoreStatus:getLoadMoreStatus,setCategory:setCategory,getCategory:getCategory,setStartIndex:setStartIndex,getStartIndex:getStartIndex}}]),AppRoot.factory("PaletteModel",["$http","$rootScope","MainEvent","translateService",function(e,t,a,o){var r,i=[],n=!1,s=!0,d=0,l={category_name:o.translateText("All Categories"),id:""},c={name:o.translateText("All Print Methods"),id:""},u={type:"CMYK",value:2},g=function(e){r=e,t.$emit(a.PALETTE_CATEGORIES_LOADED)},p=function(){return r},m=function(e){l=e},f=function(){return l},h=function(e){c=e},C=function(){return c},S=function(e){for(var o=0;e.length>o;o++)i.push(e[o]);n=!0,t.$emit(a.PALETTE_LIST_LOADED,e.length)},y=function(){for(d=0;i.length;)i.pop()},I=function(){return i},_=function(){return n},v=function(e){d+=e},T=function(){return d},A=function(e){s=e},L=function(){return s},P=function(){var e=new Date,t=e.getTime();return t},O=function(e){u=e},D=function(){return u};return{setPaletteCategories:g,getPaletteCategories:p,setCategory:m,getCategory:f,setSelectedPrintMethod:h,getSelectedPrintMethod:C,setPaletteList:S,resetPaletteList:y,getPaletteList:I,getPaletteLoadStatus:_,setStartIndex:v,getStartIndex:T,setLoadMoreStatus:A,getLoadMoreStatus:L,getIdByTime:P,setColorType:O,getColorType:D}}]),AppRoot.factory("ColorSwatchModel",["$rootScope","MainEvent",function(e,t){var a=[],o=!1;return startIndex=0,isLoadMore=!0,setSwatchList=function(r){for(var i=0;r.length>i;i++)a.push(r[i]);o=!0,e.$emit(t.SWATCH_LIST_LOADED,r.length)},getSwatchList=function(){return a},getSwatchLoadStatus=function(){return o},setStartIndex=function(e){startIndex+=e},getStartIndex=function(){return startIndex},setLoadMoreStatus=function(e){isLoadMore=e},getLoadMoreStatus=function(){return isLoadMore},{setSwatchList:setSwatchList,getSwatchList:getSwatchList,getSwatchLoadStatus:getSwatchLoadStatus,setStartIndex:setStartIndex,getStartIndex:getStartIndex,setLoadMoreStatus:setLoadMoreStatus,getLoadMoreStatus:getLoadMoreStatus}}]),AppRoot.factory("DashBoardModel",["$http","$rootScope","MainEvent",function(e,t,a){var o=[],r=!1,i=!1,n=[],s=[],d=!1;return setPrintMethod=function(e){if(e instanceof Array){for(var i=0;e.length>i;i++)o.push(e[i]);r=!0}t.$emit(a.DASHBOARD_LOADED,e.length)},getPrintMethodImageList=function(){return o},getDashBoardLoadStatus=function(){return r},setLoadMoreStatus=function(e){r=e},setProductCategory=function(e){e.categories&&(n=e.categories,d=!0,t.$emit(a.PRODUCT_CAT_LOADED,e.categories))},getProductCatStatus=function(){return d},setProductCatStatus=function(e){d=e},getProductCatList=function(){return n},setOrderGraphDetails=function(e){if(e.length>0)for(var o=0;e.length>o;o++)s.push(e[o]),i=!0,t.$emit(a.DASHBOARD_ORDER_GRAPH,e.length);else t.$emit(a.DASHBOARD_ORDER_GRAPH,e.length)},getOrderGraphDetails=function(){return s},getOrderGraphStatus=function(){return i},{setPrintMethod:setPrintMethod,getPrintMethodImageList:getPrintMethodImageList,getDashBoardLoadStatus:getDashBoardLoadStatus,setLoadMoreStatus:setLoadMoreStatus,setProductCategory:setProductCategory,getProductCatStatus:getProductCatStatus,setProductCatStatus:setProductCatStatus,getProductCatList:getProductCatList,setOrderGraphDetails:setOrderGraphDetails,getOrderGraphDetails:getOrderGraphDetails,getOrderGraphStatus:getOrderGraphStatus}}]),AppRoot.factory("DesignModel",["$http","$rootScope","MainEvent","translateService",function(e,t,a,o){var r,i,n=[],s=[],d=!1,l=!0,c=0,u=o.translateText("All Categories"),g=o.translateText("Sub Category"),p=function(e){r=e,t.$emit(a.DESIGN_CATEGORIES_LOADED)},m=function(){return r},f=function(e){i=e,t.$emit(a.DESIGN_SUB_CATEGORIES_LOADED)},h=function(){return i},C=function(e){for(var o=0;e.designs.length>o;o++)n.push(e.designs[o]);d=!0,t.$emit(a.DESIGN_LIST_LOADED,e.designs.length)},S=function(){for(c=0;n.length;)n.pop()},y=function(){return n},I=function(){return d},_=function(e){c+=e},v=function(){return c},T=function(e){l=e},A=function(){return l},L=function(e){u=e},P=function(){return u},O=function(e){g=e},D=function(){return g},w=function(){var e=new Date,t=e.getTime();return t},k=function(e){s=e,t.$emit(a.DEFAULT_CATEGORIES_SUBCATEGORIES_LOADED,s)},b=function(){return s};return{setDesignCategories:p,setDesignList:C,getDesignCategories:m,getDesignSubCategories:h,setDesignSubCategories:f,getDesignList:y,resetDesignList:S,getDesignLoadStatus:I,setStartIndex:_,getStartIndex:v,setLoadMoreStatus:T,getLoadMoreStatus:A,setCategory:L,getCategory:P,getIdByTime:w,setSubCategory:O,getSubCategory:D,setDefaultCatSubCat:k,getDefaultCatSubCat:b}}]),AppRoot.factory("discountSlabModel",["$rootScope","MainEvent",function(e,t){var a=[],o=!1;return startIndex=0,isLoadMore=!1,setDiscountList=function(r){for(var i=0;r.length>i;i++)a.push(r[i]);o=!0,e.$emit(t.DISCOUNT_LIST_LOADED,r.length)},getDiscountList=function(){return a},getDiscountLoadStatus=function(){return o},setStartIndex=function(e){startIndex+=e},getStartIndex=function(){return startIndex},setLoadMoreStatus=function(e){isLoadMore=e},getLoadMoreStatus=function(){return isLoadMore},resetDiscountList=function(){a=[]},{setDiscountList:setDiscountList,getDiscountList:getDiscountList,getDiscountLoadStatus:getDiscountLoadStatus,setStartIndex:setStartIndex,getStartIndex:getStartIndex,setLoadMoreStatus:setLoadMoreStatus,getLoadMoreStatus:getLoadMoreStatus,resetDiscountList:resetDiscountList}
}]),AppRoot.factory("DistressModel",["$http","$rootScope","MainEvent",function(e,t,a){var o=[],r=!1,i=!0,n=0,s=function(e){for(var i=0;e.distress.length>i;i++)o.push(e.distress[i]);r=!0,t.$emit(a.DISTRESS_LIST_LOADED,e.distress.length)},d=function(){n=0,o=[]},l=function(){return o},c=function(){return r},u=function(e){n+=e},g=function(){return n},p=function(e){i=e},m=function(){return i},f=function(){var e=new Date,t=e.getTime();return t};return{setDistressList:s,resetDistressList:d,getDistressList:l,getDistressLoadStatus:c,setStartIndex:u,getStartIndex:g,setLoadMoreStatus:p,getLoadMoreStatus:m,getIdByTime:f}}]),AppRoot.factory("loginModel",["$http","$rootScope","MainEvent",function(e,t,a){var o=!1,r=function(){o=""},i=function(e){o=e,t.$emit(a.CHECK_DEMO)},n=function(){return o};return{resetLoginStatus:r,setLoginStatus:i,getLoginStatus:n}}]),AppRoot.factory("MaskModel",["$http","$rootScope","MainEvent",function(e,t,a){var o=[],r=!1,i=!0,n=0,s=function(e){for(var i=0;e.length>i;i++)o.push(e[i]);r=!0,t.$emit(a.MASK_LIST_LOADED,e.length)},d=function(){for(n=0;o.length;)o.pop()},l=function(){return o},c=function(){return r},u=function(e){n+=e},g=function(){return n},p=function(e){i=e},m=function(){return i},f=function(){var e=new Date,t=e.getTime();return t};return{setMaskList:s,getMaskList:l,resetMaskList:d,getMaskLoadStatus:c,setStartIndex:u,getStartIndex:g,setLoadMoreStatus:p,getLoadMoreStatus:m,getIdByTime:f}}]),AppRoot.factory("OrderModel",["$http","$rootScope","MainEvent",function(e,t,a){var o=[],r=!1,i=!0,n=0,s=[],d=function(e){var i=0;for(i=0;e.order_list.length>i;i++)o.push(e.order_list[i]);r=!0,isDesignLoaded=!0,t.$emit(a.ORDER_LIST_LOADED,e.order_list.length)},l=function(){for(n=0;o.length;)o.pop()},c=function(){return o},u=function(){return r},g=function(e){n+=e},p=function(){return n},m=function(e){i=e},f=function(){return i},h=function(){var e=new Date,t=e.getTime();return t},C=function(e){for(var o=[],r=0;e.order_details.order_items.length>r;r++)e.order_details.order_items[r].ref_id&&o.push(e.order_details.order_items[r]);e.order_details.order_items=o,s=e,t.$emit(a.ORDER_DETAILS_FETCHED)},S=function(){return s};return{setOrderList:d,getOrderList:c,resetOrderList:l,getOrderLoadStatus:u,setStartIndex:g,getStartIndex:p,setLoadMoreStatus:m,getLoadMoreStatus:f,getIdByTime:h,setOrderDetails:C,getOrderDetails:S}}]),AppRoot.factory("preDecoratedProductModel",["$rootScope","MainEvent",function(e,t){var a=[],o=!1,r=0,i=!1,n=[],s=[],d=!1,l=!1,c=0,u=function(r){try{for(var i=0;r.length>i;i++)a.push(r[i]);o=!0,e.$emit(t.PREDECORATED_LIST_LOADED,r.length)}catch(n){}},g=function(){return a},p=function(){return o},m=function(e){r+=e},f=function(){return r},h=function(e){i=e},C=function(){return i},S=function(){return a=[]},y=function(){return r=0},I=function(a){n=a,l=!0,e.$emit(t.SIZE_DATA_LOADED)},_=function(){return n},v=function(){return l},T=function(e){l=e},A=function(a){s=a,d=!0,e.$emit(t.COLOR_DATA_LOADED)},L=function(){return s},P=function(){return d},O=function(e){d=e},D=function(e){c=e},w=function(){return c};return{setDecoratedProduct:u,getdecoratedProductList:g,getDecoratedProductLoadStatus:p,setStartIndex:m,getStartIndex:f,setLoadMoreStatus:h,getLoadMoreStatus:C,resetDecoratedProductList:S,setSizeData:I,getSizeData:_,getSizeStatus:v,setSizeStatus:T,setColorData:A,getColorData:L,getColorStatus:P,setColorStatus:O,setId:D,getId:w,resetStartIndex:y}}]),AppRoot.factory("PrintWizardModel",["$http","$rootScope","MainEvent",function(e,t,a){var o={},r=[],i=[],n=[],s=[],d="",l=[],c=[],u=[],g="",p=[],m=[],f=[],h=[],C=[],S=[],y="",I="",_="",v="",T="",A="",L=[],P={},O={},D=[],w=[],k=function(e){try{P={},o={},r=[],i=[],n=[],s=[],l=[],D=[],w=[],y=e[0].text_fillcolor,I=e[0].text_strokecolor,_=e[0].wc_color1,v=e[0].wc_color2,T=e[0].wc_color3,g=e[0].name,A=e[0].pk_id,d=e[0].image,o=e[0].settings,r=e[0].color_print_area,i=e[0].print_area_range.details,u=e[0].features,n=e[0].color_range_price,s=e[0].pallete_category,p=e[0].product_category,m=e[0].font_category,L=e[0].palettes,P=e[0].textline_price,O=e[0].img_upload_price,f=e[0].design_category,h=e[0].template_category,C=e[0].background_category,S=e[0].pattern_category,D=e[0].extra_side_price,w=e[0].name_number_price,e[0].color_price_group.length>0&&(l=e[0].color_price_group[0]),t.$emit(a.PRINT_MODEL_GET_SETTING_BY_ID)}catch(c){t.$emit(a.PRINT_MODEL_GET_SETTING_BY_ID),console.log("Got an Error on getAllPrintSetting()"+c)}},b=function(e){c=e};return getPrintImage=function(){return d},getPrintSettings=function(){return o},getPrintSize=function(){return r},setPrintSize=function(e){r=e},getColorPriceTable=function(){return n},getPalleteCategory=function(){return s},getColorGroupPrice=function(){return l},getAllpaletteCategory=function(){return c},getPrintFeature=function(){return u},getPrintProfileName=function(){return g},getProductCategory=function(){return p},getFontCategory=function(){return m},getDesignCategory=function(){return f},getTemplateCategory=function(){return h},getTextFillColor=function(){return y},getTextStrokeColor=function(){return I},getWcColor1=function(){return _},getWcColor2=function(){return v},getWcColor3=function(){return T},getPrintId=function(){return A},getPrintPalette=function(){return L},getPrintAreaRange=function(){return i},getTextPrice=function(){return P},getImagePrice=function(){return O},getBackgroundCategory=function(){return C},getPatternCategory=function(){return S},getExtraSidePrice=function(){return D},getNameNumberPrice=function(){return w},{setPrintSettingsById:k,setPaletteCat:b,getPrintSettings:getPrintSettings,getPrintSize:getPrintSize,setPrintSize:setPrintSize,getColorPriceTable:getColorPriceTable,getPalleteCategory:getPalleteCategory,getColorGroupPrice:getColorGroupPrice,getPrintImage:getPrintImage,getAllpaletteCategory:getAllpaletteCategory,getPrintFeature:getPrintFeature,getPrintProfileName:getPrintProfileName,getProductCategory:getProductCategory,getFontCategory:getFontCategory,getDesignCategory:getDesignCategory,getTemplateCategory:getTemplateCategory,getTextFillColor:getTextFillColor,getTextStrokeColor:getTextStrokeColor,getWcColor1:getWcColor1,getWcColor2:getWcColor2,getWcColor3:getWcColor3,getPrintId:getPrintId,getPrintPalette:getPrintPalette,getPrintAreaRange:getPrintAreaRange,getTextPrice:getTextPrice,getBackgroundCategory:getBackgroundCategory,getImagePrice:getImagePrice,getPatternCategory:getPatternCategory,getExtraSidePrice:getExtraSidePrice,getNameNumberPrice:getNameNumberPrice}}]),AppRoot.factory("ProductModel",["$http","$rootScope","MainEvent","translateService",function(e,t,a,o){var r=[],n=0,s="",d=[],l="",c=0,u="",g=[],p=[],m={},f=[],h=[],C=[],S=[],y={},I="",_="",v=[],T=[],A=[],L=!1,P=[],O=!1,D=!1,w=[],k=!1,b=[],r=[],M=!1,E=!1,x=0,$="",N=o.translateText("All categories"),F=1,U="",R=!1,W=[],B=[],V=!1;return setProductList=function(e){try{x=e.count;for(var o=0;e.product.length>o;o++)A.push(e.product[o]);M=!0,t.$emit(a.PRODUCT_LIST_LOADED,e.product.length)}catch(r){}},setMaskList=function(e){T=[];for(var o=0;e.length>o;o++)T.push(e[o]);O=!0,t.$emit(a.CUSTOM_MASK_LIST_LOADED)},getMaskList=function(){return T},getCustomMaskLoadStatus=function(){return O},resetLoadMore=function(){L=!1},getProductList=function(){return A},setLoadMoreStatus=function(e){L=e},getLoadMoreStatus=function(){return L},resetProduct=function(){tempId=0,n=0,s="",d=[],l="",c=0,colors=[],g=[],p=[],m=[],f=[],h=[],C=[],S=[],y={},I="",v=[],b=[],W=[]},setCategoryList=function(e){r=e,E=!0,t.$emit(a.PRODUCT_CATEGORY_LOADED)},setProductData=function(e){resetProduct(),parseProductJson(e)},parseProductJson=function(e){if(void 0!=e.pid){V="simple"==e.pidtype?!0:!1,e.tepmlate_id&&(tempId=e.tepmlate_id),n=e.pid,s=e.pname,f=e.features,h=e.additionalprices,I=e.pvid,R=e.isPreDecorated,v=e.sizeAdditionalprices;for(var o=0,i=0;r.length>i;i++)for(var d=0;e.category.length>d;d++)if(r[i].id===e.category[d]){o=i;break}if(l=r[o].name,c=parseFloat(e.price).toFixed(2),u=e.xecolor,u.indexOf("_")>0&&(u=u.substring(u.indexOf("_")+1,u.length)),g=e.thumbsides,p=e.sides,e.multiple_boundary?W=e.multiple_boundary:setMultiBoundaryData(),null==e.maskInfo||e.maskInfo.status)setProductMaskData();else for(var i=0;p.length>i;i++)null==e.maskInfo[i]?setBoundData(i):C.push(e.maskInfo[i]);if(0==e.printsize.length||e.printsize.status)for(i=0;p.length>i;i++)S[i]={side:i};else for(i=0;p.length>i;i++)S[i]=e.printsize[i]&&null!=e.maskInfo[i]?void 0!=e.printsize[i]?e.printsize[i]:{side:i}:{side:i};y=e.printareatype,currentProduct=e}t.$emit(a.PRODUCT_MODEL_READY)},setBoundData=function(e){C[e]={},C[e].bounds={},C[e].bounds.boundx=100,C[e].bounds.boundy=100,C[e].bounds.boundheight=0,C[e].bounds.boundwidth=0,C[e].mask={},C[e].mask.left=0,C[e].mask.top=0,C[e].mask.path="",C[e].mask.width="",C[e].mask.height="",C[e].customsize={},C[e].customsize.left=0,C[e].customsize.top=0,C[e].customsize.width=500,C[e].customsize.height=500,C[e].custom_mask={},C[e].custom_mask.left=0,C[e].custom_mask.top=0,C[e].custom_mask.width=500,C[e].custom_mask.height=500},setProductMaskData=function(){for(i=0;p.length>i;i++)C[i]={},C[i].bounds={},C[i].bounds.boundx=100,C[i].bounds.boundy=100,C[i].bounds.boundheight=0,C[i].bounds.boundwidth=0,C[i].mask={},C[i].mask.left=0,C[i].mask.top=0,C[i].mask.path="",C[i].mask.width="",C[i].mask.height="",C[i].customsize={},C[i].customsize.left=0,C[i].customsize.top=0,C[i].customsize.width=500,C[i].customsize.height=500,C[i].custom_mask={},C[i].custom_mask.left=0,C[i].custom_mask.top=0,C[i].custom_mask.width=500,C[i].custom_mask.height=500},getId=function(){return n},getName=function(){return s},getData=function(){return d},getCategory=function(){return l},getPrice=function(){return c},getColors=function(){return u},getThumbsides=function(){return g},getSides=function(){return p},getFeatures=function(){return f},getVariants=function(){return m},getAdditionalprices=function(){return h},getMaskData=function(){return C.slice(0)},getPrintSizeData=function(){return S},getPrintAreaType=function(){return y},getSimpleProductID=function(){return I},getIsTransition=function(){return _},getSizeAdditionalPrice=function(){return v},setProductSizeList=function(e){P=e,D=!0,t.$emit(a.PRODUCT_SIZE_LIST_LOADED)},getProductSizeList=function(){return P},getSizeLoadStatus=function(){return D},setSizeLoadStatus=function(e){D=e},setColorList=function(e){w=e,k=!0,t.$emit(a.PRODUCT_COLOR_LIST_LOADED)},getProductColorList=function(){return w},getColorLoadStatus=function(){return k},setColorLoadStatus=function(e){k=e},getProductDiscount=function(){return b},getCategoryList=function(){return r},getProductListLoadedStatus=function(){return M},setProductListLoadedStatus=function(e){M=e},getCategoryListLoadedStatus=function(){return E},setCategoryListLoadedStatus=function(e){E=e},getProductCount=function(){return x},resetProductList=function(){A=[]},setSelectedCategory=function(e,t){$=e,N=t},getSelectedCategory=function(){return{id:$,name:N}},setStartIndex=function(e){F+=e},getStartIndex=function(){return F},setSearchString=function(e){U=e},getSearchString=function(){return U},getTemplateId=function(){return tempId},getPredecoratedStatus=function(){return R},setMultiBoundaryData=function(){for(i=0;p.length>i;i++)W.push({child_masks:{boundary_name:"",print_methods:[],restrict_design:"0",actual_width:"",actua_height:""},svg:"",name:"",scaleRatio_unit:"",id:0})},getMultipleBoundary=function(){return W},setMultipleBoundaryList=function(e){B=e,t.$emit(a.MULTI_BOUNDARY_LIST_LOADED)},getMultipleBoundaryList=function(){return B},getProductType=function(){return V},getCurrentProductDetails=function(){return currentProduct},{setProductList:setProductList,setMaskList:setMaskList,getMaskList:getMaskList,getCustomMaskLoadStatus:getCustomMaskLoadStatus,resetLoadMore:resetLoadMore,getProductList:getProductList,setLoadMoreStatus:setLoadMoreStatus,getLoadMoreStatus:getLoadMoreStatus,setProductData:setProductData,setCategoryList:setCategoryList,getId:getId,getName:getName,getData:getData,getCategory:getCategory,getPrice:getPrice,getColors:getColors,getThumbsides:getThumbsides,getSides:getSides,getVariants:getVariants,getFeatures:getFeatures,getAdditionalprices:getAdditionalprices,getMaskData:getMaskData,getPrintSizeData:getPrintSizeData,getPrintAreaType:getPrintAreaType,getSimpleProductID:getSimpleProductID,getIsTransition:getIsTransition,getSizeAdditionalPrice:getSizeAdditionalPrice,setProductSizeList:setProductSizeList,getProductSizeList:getProductSizeList,getSizeLoadStatus:getSizeLoadStatus,setSizeLoadStatus:setSizeLoadStatus,setColorList:setColorList,getProductColorList:getProductColorList,getColorLoadStatus:getColorLoadStatus,setColorLoadStatus:setColorLoadStatus,getProductDiscount:getProductDiscount,getCategoryList:getCategoryList,getProductListLoadedStatus:getProductListLoadedStatus,setProductListLoadedStatus:setProductListLoadedStatus,getCategoryListLoadedStatus:getCategoryListLoadedStatus,setCategoryListLoadedStatus:setCategoryListLoadedStatus,getProductCount:getProductCount,resetProductList:resetProductList,setSelectedCategory:setSelectedCategory,getSelectedCategory:getSelectedCategory,setStartIndex:setStartIndex,getStartIndex:getStartIndex,setSearchString:setSearchString,getSearchString:getSearchString,getTemplateId:getTemplateId,getPredecoratedStatus:getPredecoratedStatus,setMultiBoundaryData:setMultiBoundaryData,getMultipleBoundary:getMultipleBoundary,setMultipleBoundaryList:setMultipleBoundaryList,getMultipleBoundaryList:getMultipleBoundaryList,getProductType:getProductType,getCurrentProductDetails:getCurrentProductDetails}}]),AppRoot.factory("productTempModel",["$rootScope","MainEvent",function(e,t){var a=[],o=!1;return startIndex=0,isLoadMores=!0,setProductTempList=function(r){for(var i=0;r.length>i;i++)a.push(r[i]);o=!0,e.$emit(t.PRODUCT_TEMP_LIST_LOADED,r.length)},getProductTempList=function(){return a},getProductTempLoadStatus=function(){return o},setStartIndex=function(e){startIndex+=e},getStartIndex=function(){return startIndex},setLoadMoreStatus=function(e){isLoadMores=e},getLoadMoreStatus=function(){return isLoadMores},resetTemplateList=function(){return a=[]},{setProductTempList:setProductTempList,getProductTempList:getProductTempList,getProductTempLoadStatus:getProductTempLoadStatus,setStartIndex:setStartIndex,getStartIndex:getStartIndex,setLoadMoreStatus:setLoadMoreStatus,getLoadMoreStatus:getLoadMoreStatus,resetTemplateList:resetTemplateList}}]),AppRoot.factory("ShapeModel",["$http","$rootScope","MainEvent","translateService",function(e,t,a,o){var r,i=[],n=!1,s=!0,d=0,l=o.translateText("All Categories"),c=function(e){r=e,t.$emit(a.SHAPE_CATEGORIES_LOADED)},u=function(){return r},g=function(e){for(var o=0;e.shapes.length>o;o++)i.push(e.shapes[o]);n=!0,t.$emit(a.SHAPE_LIST_LOADED,e.shapes.length)},p=function(){for(d=0;i.length;)i.pop()},m=function(){return i},f=function(){return n},h=function(e){d+=e},C=function(){return d},S=function(e){s=e},y=function(){return s},I=function(e){l=e},_=function(){return l},v=function(){var e=new Date,t=e.getTime();return t};return{setShapeCategories:c,setShapeList:g,getShapeCategories:u,getShapeList:m,resetShapeList:p,getShapeLoadStatus:f,setStartIndex:h,getStartIndex:C,setLoadMoreStatus:S,getLoadMoreStatus:y,setCategory:I,getCategory:_,getIdByTime:v}}]),AppRoot.factory("TemplateModel",["$http","$rootScope","MainEvent","translateService",function(e,t,a,o){var r,i=[],n=!1,s=!0,d=0,l=o.translateText("All Categories"),c=function(e){r=e,t.$emit(a.TEMPLATE_CATEGORIES_LOADED)},u=function(){return r},g=function(e){for(var o=0;e.length>o;o++)i.push(e[o]);n=!0,t.$emit(a.TEMPLATE_LIST_LOADED,e.length)},p=function(){for(d=0;i.length;)i.pop()},m=function(){return i},f=function(){return n},h=function(e){d+=e},C=function(){return d},S=function(e){s=e},y=function(){return s},I=function(e){l=e},_=function(){return l},v=function(){var e=new Date,t=e.getTime();return t};return{setTemplateCategories:c,getTemplateCategories:u,setTemplateList:g,resettemplateList:p,getTemplateList:m,getTemplateLoadStatus:f,setStartIndex:h,getStartIndex:C,setLoadMoreStatus:S,getLoadMoreStatus:y,setCategory:I,getCategory:_,getIdByTime:v}}]),AppRoot.factory("TextFXModel",["$http","$rootScope","MainEvent",function(e,t,a){var o=[],r=!1,i=!0,n=0,s=function(e){for(var i=0;e.length>i;i++)o.push(e[i]);r=!0,t.$emit(a.TEXTFX_LIST_LOADED,e.length)},d=function(){for(n=0;o.length;)o.pop()},l=function(){return o},c=function(){return r},u=function(e){n+=e},g=function(){return n},p=function(e){i=e},m=function(){return i};return{setTextFxList:s,getTextFxList:l,getTextFxLoadStatus:c,setStartIndex:u,getStartIndex:g,resetTextFxList:d,setLoadMoreStatus:p,getLoadMoreStatus:m}}]),AppRoot.factory("WebfontsModel",["$http","$rootScope","MainEvent","translateService",function(e,t,a,o){var r,i=[],n=!1,s=!0,d=0,l=o.translateText("All Categories"),c=function(e){r=e,t.$emit(a.WEBFONTS_CATEGORIES_LOADED)},u=function(){return r},g=function(e){for(var o=0;e.fonts.webFonts.length>o;o++)i.push(e.fonts.webFonts[o]);n=!0,t.$emit(a.WEBFONTS_LIST_LOADED,e.fonts.webFonts.length)},p=function(){for(d=0;i.length;)i.pop()},m=function(){return i},f=function(){return n},h=function(e){d+=e},C=function(){return d},S=function(e){s=e},y=function(){return s},I=function(e){l=e},_=function(){return l},v=function(){var e=new Date,t=e.getTime();return t};return{setWebfontsCategories:c,setWebfontsList:g,getWebfontsCategories:u,getWebfontsList:m,resetWebfontsList:p,getWebfontsLoadStatus:f,setStartIndex:h,getStartIndex:C,setLoadMoreStatus:S,getLoadMoreStatus:y,setCategory:I,getCategory:_,getIdByTime:v}}]),AppRoot.factory("WordCloudModel",["$http","$rootScope","MainEvent",function(e,t,a){var o=[],r=!1,i=!0,n=0,s=function(e){for(var i=0;e.wordcloud.length>i;i++)o.push(e.wordcloud[i]);r=!0,t.$emit(a.WORD_CLOUD_LOADED,e.wordcloud.length)},d=function(){for(n=0;o.length;)o.pop()},l=function(){return o},c=function(){return r},u=function(e){n+=e},g=function(){return n},p=function(e){i=e},m=function(){return i},f=function(){var e=new Date,t=e.getTime();return t};return{setWordCloud:s,getWordCloudList:l,resetWordCloud:d,getWorCloudLoadStatus:c,setStartIndex:u,getStartIndex:g,setLoadMoreStatus:p,getLoadMoreStatus:m,getIdByTime:f}}]),angular.module("authentication").controller("AuthenticationController",["$scope","$rootScope","$timeout","translateService","MainEvent","AuthenticationService","AuthenticationModel","webStorage",function(e,t,a,o,r,i,n,s){e.isPreloader=!0,e.pUserList=[],e.privilegesList=[],e.privilegeStatus=[],e.isEditViewActive=!1,e.isUploadViewActive=!1,e.userList=!0,e.noData=!1,e.newUser={name:"",email:"",password:""},e.init=function(){if(n.getUserLoadStatus()){if(e.isPreloader=!1,e.dataLoaded=!0,e.tempUserList=n.getUserList(),"0"==s.local.get("type"))for(var t=0;e.tempUserList.length>t;t++)e.tempUserList[t].id==s.local.get("id")&&e.pUserList.push(e.tempUserList[t]);else e.pUserList=n.getUserList();0==e.pUserList.length&&(e.noData=!0)}else i.getUserDetails();n.getPrilivagesLoadStatus()?(e.previlegeLoaded=!0,e.privilegesList=n.getAllPrivileges(),e.resetPrivilegesStatus(),e.isPreloader=!1):i.getPrivilege()},t.$on(r.USER_LIST_LOADED,function(){if(e.pUserList=[],e.isPreloader=!1,e.tempUserList=n.getUserList(),"0"==s.local.get("type"))for(var t=0;e.tempUserList.length>t;t++)e.tempUserList[t].id==s.local.get("id")&&e.pUserList.push(e.tempUserList[t]);else e.pUserList=n.getUserList();0==e.pUserList.length&&(e.noData=!0),e.dataLoaded=!0}),e.checkEmail=function(){if(e.pUserList.length>0){for(var t=0;e.pUserList.length>t;t++)if(e.pUserList[t].email==e.newUser.email)return e.$emit(r.SHOW_NOTIFICATION,{message:"Email Already Exist",type:"info"}),!1;return!0}return!0},e.checkUpdateEmail=function(){if(e.email!=e.userEmailValid){for(var t=0;e.pUserList.length>t;t++)if(e.pUserList[t].email==e.email)return e.$emit(r.SHOW_NOTIFICATION,{message:"Email Already Exist",type:"info"}),!1;return!0}return!0},e.addNewUser=function(){e.newUser=[],e.privilegeStatus=[],e.isUploadViewActive=!0,e.userList=!1},e.cancelUser=function(){e.newUser.email="",e.isEditViewActive=!1,e.isUploadViewActive=!1,e.userList=!0},e.saveNewUserPrivilege=function(){if(1==e.demoStatus)e.$emit(r.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"info"});else{e.enabledPrivilegeIds=[];for(var t=0;e.privilegeStatus.length>t;t++)1==e.privilegeStatus[t]&&e.enabledPrivilegeIds.push(e.privilegesList[t].id);if(""!=e.enabledPrivilegeIds)if(void 0!=e.newUser.email)if(void 0!=e.newUser.password)if(""!=e.newUser.name&&void 0!=e.newUser.name){var a=e.checkEmail();a&&(i.addUsersPrivileges(e.newUser.name,e.newUser.email,e.newUser.password,e.enabledPrivilegeIds).then(function(t){n.setUserList(t.data),e.$emit(r.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})}),e.cancelUser(),e.isPreloader=!0,e.noData=!1)}else e.$emit(r.SHOW_NOTIFICATION,{message:"Please Enter Name",type:"danger"});else e.$emit(r.SHOW_NOTIFICATION,{message:"Enter Password",type:"danger"});else e.$emit(r.SHOW_NOTIFICATION,{message:"Enter Valid Email Address",type:"danger"});else e.$emit(r.SHOW_NOTIFICATION,{message:"Please Enable Atleast One Privilege",type:"danger"})}},e.deleteUser=function(t){if(1==e.demoStatus)e.$emit(r.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"info"});else{e.userIndex=t;var a="Are you sure want to delete this User?";e.$emit(r.SHOW_WARNING_MODAL,"authentication",a)}},t.$on(r.WARNING_MODAL_CONFIRM,function(t,a){"authentication"==a&&(e.isPreloader=!0,i.deleteUserById(e.pUserList[e.userIndex].id).then(function(t){null!=t.data&&(n.setUserList(t.data),e.$emit(r.SHOW_NOTIFICATION,{message:"User Deleted",type:"success"}))}))}),e.editUser=function(t){e.userId=t.id,e.userEmailValid=t.email,e.isPreloader=!0,e.userList=!1,e.isEditViewActive=!0,e.editInfoList=[],e.resetPrivilegesStatus(),i.editUserDetails(e.userId).then(function(t){e.editInfoList=t.data.user_details;for(var a=0;e.privilegesList.length>a;a++)for(var o=0;e.editInfoList.p_id.length>o;o++)e.privilegesList[a].id==e.editInfoList.p_id[o]&&(e.privilegesList[a].status=!0);e.isPreloader=!1})},e.updateUserPrivilege=function(t){if(1==e.demoStatus)e.$emit(r.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"info"});else{e.editPrivilegeIds=[],e.name=t.name,e.email=t.email,e.password=t.password;for(var a=0;e.privilegesList.length>a;a++)1==e.privilegesList[a].status&&e.editPrivilegeIds.push(e.privilegesList[a].id);if(""!=e.editPrivilegeIds)if(""!=e.name&&void 0!=e.name)if(""!=e.email&&void 0!=e.email)if(""!=e.password&&void 0!=e.password){var o=e.checkUpdateEmail();o&&(i.updateUserprivileges(e.userId,e.editPrivilegeIds,e.name,e.email,e.password).then(function(t){n.setUserList(t.data),e.$emit(r.SHOW_NOTIFICATION,{message:"Update Successfully",type:"success"})}),e.cancelUser(),e.isPreloader=!0)}else e.$emit(r.SHOW_NOTIFICATION,{message:"Enter Password",type:"danger"});else e.$emit(r.SHOW_NOTIFICATION,{message:"Enter Valid Email Address",type:"danger"});else e.$emit(r.SHOW_NOTIFICATION,{message:"Please Enter Name",type:"danger"});else e.$emit(r.SHOW_NOTIFICATION,{message:"Please Enable Atleast One Privilege",type:"danger"})}},e.resetPrivilegesStatus=function(){for(var t=0;e.privilegesList.length>t;t++)e.privilegesList[t].status=!1},t.$on(r.ALL_PRIVILEGES_LOADED,function(){e.previlegeLoaded=!0,e.privilegesList=n.getAllPrivileges(),e.resetPrivilegesStatus(),e.isPreloader=!1})}]),angular.module("authentication").factory("AuthenticationService",["$http","AppConfig","$rootScope","AuthenticationModel",function(e,t,a,o){var r=t.API_KEY,i=function(){e.get(a.serviceAPI+"?reqmethod=getUsers").success(function(e){o.setUserList(e)}).error(function(){console.log("error on getUserDetails : ",response)})},n=function(t,o,i,n){var s=$.param({apikey:r,reqmethod:"addUser",name:t,email:o,password:i,privilegeId:n}),d=e({method:"POST",url:a.serviceAPI,data:s,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return d},s=function(t){var o=e.get(a.serviceAPI+"?reqmethod=deleteUser"+"&user_id="+t);return o},d=function(t){var o=e.get(a.serviceAPI+"?reqmethod=getUser_privileges"+"&user_id="+t);return o},l=function(t,o,i,n,s){var d=$.param({apikey:r,reqmethod:"editUser_privileges",user_id:t,privileges:o,name:i,email:n,password:s}),l=e({method:"POST",url:a.serviceAPI,data:d,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return l},c=function(){e.get(a.serviceAPI+"?reqmethod=getPrivileges").success(function(e){o.setAllPrivileges(e)}).error(function(e){console.log("error on loadprivilege : ",e)})};return{getUserDetails:i,addUsersPrivileges:n,deleteUserById:s,editUserDetails:d,updateUserprivileges:l,getPrivilege:c}}]),angular.module("background").controller("BackgroundController",["$scope","$rootScope","$timeout","BackgroundService","BackgroundModel","translateService","MainEvent",function(e,t,a,o,r,i,n){e.isEditViewActive=!1,e.isUploadViewActive=!1,e.isUploadFileCount=!1,e.isSelectedBackgroundVisible=!1,e.categoryElms=[],e.uploadTags=[],e.uploadBackground={value:"",name:"",price:0,tags:[],scalable:!0,isImage:0},e.searchStr="",e.isCategoryListUpdated=!1,e.catDetail={id:"",cate_name:""},e.editCategoryElms=[],e.editBackground={value:"",name:"",price:0,tags:[],scalable:!1,isImage:!1,color_value:""},e.editIds=[],e.editTags=[],e.preloader=!0,e.NoOfColor=!1,e.isUploadBackgroundVisible=!1,e.showMsg=i.translateText("Invalid file format"),e.selectedCatIndex=null,e.backgroundList=[],e.backgroundCategoryList=[],e.catPlaceHolder=i.translateText("Enter Category"),e.backgroundRange=30,e.isLoadMorePreloader=!1,e.backgroundCheck=[],e.fileCount=0,e.selectedCategory=i.translateText("All Categories"),e.printMethods=[],e.colorChooser={Val:"#000000"},e.init=function(){e.dataLoaded=!1,e.isLoadMore=r.getLoadMoreStatus(),e.selectedCategory=r.getCategory(),e.printMethods=[],o.getPrintMethods().then(function(t){for(var a=0;t.data.length>a;a++)"1"==t.data[a].is_enable&&e.printMethods.push(t.data[a])}),r.getBackgroundLoadStatus()?(e.dataLoaded=!0,e.backgroundCategoryList=r.getBackgroundCategories(),e.backgroundList=r.getBackgroundList(),0==e.backgroundList.length&&(e.noData=!0)):(o.loadBackgroundCategories(),e.loadBackgroundsList())},t.$on(n.BACKGROUND_CATEGORIES_LOADED,function(){e.backgroundCategoryList=r.getBackgroundCategories(),0==e.isCategoryListUpdated||(e.isCategoryListUpdated=!0)}),e.loadBackgroundsList=function(){var t=e.selectedCatId;t==i.translateText("All Categories")&&(t=""),o.loadBackgrounds(e.searchStr,t,r.getStartIndex(),e.backgroundRange)},t.$on(n.BACKGROUND_LIST_LOADED,function(t,a){e.backgroundList=[],e.noData=!1,$(".design-admin-box-wrap").animate({scrollTop:1e3},"slow"),e.selectedCategory=r.getCategory(),e.backgroundList=r.getBackgroundList(),0==e.backgroundList.length&&(e.noData=!0),e.backgroundRange>a?(r.setLoadMoreStatus(!1),e.isLoadMore=!1):(r.setLoadMoreStatus(!0),e.isLoadMore=!0),e.isLoadMorePreloader=!1,e.dataLoaded=!0,e.dataList=!1}),e.categorySelected=function(t){e.noData=!1,e.dataLoaded=!1,e.dataList=!0,e.uncheckAll(),""==t?(e.selectedCatId=0,e.selectedCategory=i.translateText("All Categories"),r.resetBackgroundList(),r.setCategory(e.selectedCategory)):(e.selectedCatId=t.id,e.selectedCategory=t.category_name,r.resetBackgroundList(),r.setCategory(e.selectedCategory)),e.loadBackgroundsList()},e.loadMore=function(){e.isLoadMorePreloader=!0,r.setStartIndex(e.backgroundRange),e.loadBackgroundsList()},e.addNewBackground=function(){e.resetUploadView(),e.extainsionArr=[],e.base64List=[],e.categoryElms=[],e.uploadTags=[],e.preloader=!0,e.uncheckAll(),e.isEditViewActive=!1,e.isUploadBackgroundVisible=!1,e.NoOfColor=!1,e.isUploadViewActive=!0,e.showError=!1,e.categoryElms.push({category:i.translateText("Category"),categoryId:""})},e.checkFileExtn=function(t){e.extnArr=[];for(var a=0;t.length>a;a++){var o=t[a],r=o.name.replace(/.*\./,"").toLowerCase();e.extnArr.push(r)}for(var i=1;e.extnArr.length>i;i++)if(e.extnArr[i]!==e.extnArr[0])return!1;return!0},e.notification=function(e,t){$(".pgn-wrapper").show(),$(".pgn-wrapper").empty(),$("#"+t).pgNotification({style:"bar",message:e,position:"center",timeout:0,type:"info"}).show(),setTimeout(function(){$(".pgn-wrapper").fadeOut("slow")},4e3)},e.upload=function(t){e.buttonStatus=!1,e.NoOfColor=!1,e.extainsionArr=[],e.base64List=[];var o=["png","jpg","jpeg","bmp"],r=["png","jpg","jpeg","bmp"];if(t&&t.length){if(e.uploadFileCount=t.length,t.length>1){var n=e.checkFileExtn(t);if(n)e.buttonStatus=!0,e.isUploadBackgroundVisible=!1,e.isUploadFileCount=!0,e.NoOfColor=!0;else{e.buttonStatus=!1,e.isUploadBackgroundVisible=!1,e.isUploadFileCount=!1,e.NoOfColor=!1;var s=i.translateText("same file format");e.notification(s,"upload-msg")}}else e.buttonStatus=!0,e.isUploadBackgroundVisible=!0,e.isUploadFileCount=!1;for(var d=0;t.length>d;d++){var l=t[d],c=l.name.replace(/.*\./,"").toLowerCase();if(1==t.length)for(var u=0;r.length>u;u++)c==r[u]&&(e.NoOfColor=!0);if(o.indexOf(c)>=0){e.showError=!1,e.extainsionArr.push(c);var g=new FileReader;g.onload=function(t){a(function(){e.uploadBackground.value=t.target.result;var a=t.target.result,o=a.indexOf("base64"),r=a.substring(o+7);e.base64List.push(r)})},g.readAsDataURL(l)}else e.isUploadBackgroundVisible=!1,e.showError=!0}}},e.getUploadFiles=function(){e.uploadFiles=[];for(var t=0;e.base64List.length>t;t++)e.uploadFiles.push({type:e.extainsionArr[t],base64:e.base64List[t]})},e.uploadBack_ground=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else{var t=[],a=1==e.uploadBackground.scalable?1:0;e.base64List&&e.getUploadFiles(),e.getUploadTagList();for(var i=0;e.categoryElms.length>i;i++)""!=e.categoryElms[i].categoryId&&t.push(e.categoryElms[i].categoryId);var s=e.uploadBackground.isImage;e.uploadBackground.name&&t.length>0&&(0!=s||e.Color)&&(1!=s||e.base64List.length>0)?(e.preloader=!1,o.addBackgroundDetails(e.uploadBackground.name,e.uploadBackground.price,e.uploadBackground.tags,a,t,e.uploadFiles,s,e.Color).then(function(t){e.preloader=!0,"Success"==t.data.status?(r.resetBackgroundList(),e.isUploadViewActive=!1,e.isEditViewActive=!1,e.loadBackgroundsList(),e.$emit(n.SHOW_NOTIFICATION,{message:"Upload successfully",type:"success"})):(e.resetUploadView(),e.$emit(n.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"}))})):e.$emit(n.SHOW_NOTIFICATION,{message:"Please Enter All the Field",type:"info"})}},e.getUploadTagList=function(){e.uploadBackground.tags=[];for(var t=0;e.uploadTags.length>t;t++)e.uploadBackground.tags.push(e.uploadTags[t].text)},e.resetUploadView=function(){e.categoryElms=[],e.uploadTags=[],e.uploadBackground={value:"",name:"",price:0,tags:"",scalable:!0,isImage:0},e.categoryElms.push({category:i.translateText("Category"),categoryId:""}),e.extainsionArr=[],e.base64List=[],e.colorChooser={Val:"#000000"},e.NoOfColor=!1,e.isUploadViewActive=!0,e.uploadFileCount=0,e.isUploadFileCount=!1},e.cancelUploadBackground=function(){e.resetUploadView(),e.isUploadViewActive=!1},e.addUploadCategoyElm=function(){e.categoryElms.push({category:i.translateText("Category"),categoryId:""})},e.removeUploadCategoryElms=function(t){e.categoryElms.splice(t,1)},e.selectCategoryDefault=function(t,a){e.categoryElms[a].category=t,e.categoryElms[a].categoryId=""},e.uploadCategorySelected=function(t,a){s(t.category_name)?e.categoryElms[a]={category:i.translateText("Category"),categoryId:""}:(e.categoryElms[a].category=t.category_name,e.categoryElms[a].categoryId=t.id)};var s=function(t){for(var a=0;e.categoryElms.length>a;a++)if(e.categoryElms[a].category==t)return!0;return!1};e.backgroundSelected=function(t){t?(e.fileCount++,e.fileCount==e.backgroundList.length&&(e.allChecked=!0)):(e.fileCount--,(0==e.fileCount||e.fileCount!=e.backgroundList.length)&&(e.allChecked=!1))},e.selectAllChecked=function(t){for(var a=0;e.backgroundList.length>a;a++)e.backgroundCheck[a]=t;e.fileCount=t?e.backgroundList.length:0},e.uncheckAll=function(){for(var t=0;e.backgroundList.length>t;t++)e.backgroundCheck[t]=!1;e.fileCount=0,e.allChecked=!1},e.deleteSelectedBackground=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});
else if(e.fileCount>0){var t="background delete";e.$emit(n.SHOW_WARNING_MODAL,"background_design",t)}else console.log("No files selected")},t.$on(n.WARNING_MODAL_CONFIRM,function(t,a){if("background_design"==a){for(var i=[],n=[],s=0;e.backgroundCheck.length>s;s++)1==e.backgroundCheck[s]&&(i.push(e.backgroundList[s].file_name),n.push(e.backgroundList[s].id));o.removeBackgroundImage(""+i,""+n).then(function(){e.uncheckAll(),r.resetBackgroundList(),e.isEditViewActive=!1,e.isUploadViewActive=!1,e.loadBackgroundsList()})}}),e.editSelectedBackground=function(){if(e.fileCount>0){e.isEditViewActive=!0,e.isUploadViewActive=!1,e.resetEditView();for(var t=0;e.backgroundCheck.length>t;t++)if(1==e.backgroundCheck[t])if(e.fileCount>1)e.preloader=!1,e.editBackground.scalable=!0,e.editIds.push(e.backgroundList[t].id);else if(1==e.fileCount){e.preloader=!1;var a=e.backgroundList[t].value;e.editIds.push(e.backgroundList[t].id),o.loadBackgroundDetails(e.backgroundList[t].id).then(function(t){e.showBackgroundDetails(a,t.data)})}e.fileCount>1&&e.editMultipleBackgrounds()}else e.isEditViewActive=!1},e.checkCat=function(e){for(var t=0;e.length>t;t++)for(j=t;e[j].length>j;j++)if(e[0].length!=e[t+1].length||e[0][j].category_id!=e[t+1][j].category_id)return!1;return!0},e.editMultipleBackgrounds=function(){e.preloader=!1,e.categoryIds=[];for(var t=0;e.editIds.length>t;t++)o.loadBackgroundDetails(e.editIds[t]).then(function(t){e.categoryIds.push(t.data.category)});a(function(){var t=e.checkCat(e.categoryIds);if(e.editCategoryElms=[],t)for(var o=0;e.categoryIds[0].length>o;o++)e.editCategoryElms=e.categoryIds[0],e.preloader=!0;else e.editCategoryElms.push({category:i.translateText("Category"),categoryId:""}),a(function(){e.preloader=!0})},2e3)},e.showBackgroundDetails=function(t,a){e.noOfColorView=!0,e.editBackground.value=t,e.editBackground.color_value=a.background_detail.color_value,e.editBackground.isImage=a.background_detail.is_image,e.editBackground.name=a.background_detail.background_design_name,e.editBackground.price=a.background_detail.price,e.colorPic=a.background_detail.color_value,e.isSelectedBackgroundVisible=!0,a.background_detail.file_name.replace(/.*\./,"").toLowerCase(),null==a.category?e.editCategoryElms.push({category:i.translateText("Category"),categoryId:""}):e.editCategoryElms=a.category,e.editBackground.scalable=1==a.background_detail.isScalable?!0:!1;for(var o=0;a.tag.length>o;o++)e.editBackground.tags.push(a.tag[o].tag_name);e.editTags=e.editBackground.tags,e.preloader=!0},e.resetEditView=function(){e.editBackground={value:"",name:"",price:0,tags:[],scalable:!1,isImage:!1,color_value:""},e.editIds=[],e.editTags=[],e.editCategoryElms=[],e.editCategoryElms.push({category:i.translateText("Category"),categoryId:""}),e.isSelectedBackgroundVisible=!1,e.showError=!1},e.addEditCategoyElms=function(){e.editCategoryElms.push({category:i.translateText("Category"),categoryId:""})},e.removeEditCategoryElms=function(t){e.editCategoryElms.splice(t,1)},e.editCategorySelected=function(t,a){d(t.category_name)?e.editCategoryElms[a]={category:i.translateText("Category"),categoryId:""}:(e.editCategoryElms[a].category_name=t.category_name,e.editCategoryElms[a].category_id=t.id)};var d=function(t){for(var a=0;e.editCategoryElms.length>a;a++)if(e.editCategoryElms[a].category_name==t)return!0;return!1};e.saveEditBackGround=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){for(var t=[],a=1==e.editBackground.scalable?1:0,i=0;e.editCategoryElms.length>i;i++)""!=e.editCategoryElms[i].category_id&&null!=e.editCategoryElms[i].category_id&&t.push(e.editCategoryElms[i].category_id);e.editBackground.tags=[];for(var s=0;e.editTags.length>s;s++)e.editBackground.tags.push(e.editTags[s].text);e.editBackground.name&&t.length>0?(e.preloader=!1,o.updateBackgroundDetails(e.editIds,e.editBackground.name,e.editBackground.price,t,e.editBackground.tags,a,e.editBackground.color_value).then(function(t){e.preloader=!0,e.uncheckAll(),"Success"==t.data.status?(r.resetBackgroundList(),e.cancelEditBackGround(),e.loadBackgroundsList(),e.$emit(n.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(n.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})})):e.$emit(n.SHOW_NOTIFICATION,{message:"Please Enter All the Field",type:"info"})}else e.$emit(n.SHOW_NOTIFICATION,{message:"No file selected",type:"info"})},e.cancelEditBackGround=function(){e.resetEditView(),e.uncheckAll(),e.isEditViewActive=!1},e.editBackgroundCategory=function(){$("#backgroundCategoryModal").modal("show"),e.resetCategoryModal()},e.resetCategoryModal=function(){e.selectedCatIndex=null,e.showCategoryClosebtn=[],e.showCategoryBadge=[],e.selectedCateg=""},e.addNewCategory=function(t){o.addBackgroundCategory(t).then(function(t){"success"==t.data.status?(e.resetCategoryModal(),e.isCategoryListUpdated=!0,o.loadBackgroundCategories(),e.$emit(n.SHOW_BACKGROUND_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(n.SHOW_BACKGROUND_NOTIFICATION,{message:"Design Already Exist",type:"info"})})},e.deleteBackgroundCategory=function(t){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(0/0!=parseInt(t)){e.catIndex=t;var a="Category Delete";e.$emit(n.BACKGROUND_CATEGORY_DELETE_MODAL,"Background Category",a)}else console.log("No files selected")},t.$on(n.CATEGORY_DELETE_MODAL_CONFIRM,function(t,a){if("Background Category"==a&&null!=e.catIndex){var r=e.backgroundCategoryList[e.catIndex].category_name;o.removeBackgroundCategory(r).then(function(t){t.data.status?(e.catIndex=null,e.isCategoryListUpdated=!0,o.loadBackgroundCategories(),e.resetCategoryModal(),e.$emit(n.SHOW_BACKGROUND_NOTIFICATION,{message:"Delete Successfully",type:"success"})):console.log("else __ error__ on delete")})}}),e.editCategory=function(t){e.catDetail.id=e.backgroundCategoryList[t].id,e.catDetail.cate_name=e.backgroundCategoryList[t].category_name,$("#backgroundCategoryUpdateModal").modal("show")},e.updateCategory=function(){1==e.demoStatus?e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):o.updateCategoryName(e.catDetail.id,e.catDetail.cate_name).then(function(t){t.data.msg?($("#backgroundCategoryUpdateModal").modal("hide"),e.$emit(n.SHOW_BACKGROUND_NOTIFICATION,{message:"Design Already Exist",type:"info"})):(e.resetCategoryModal(),e.isCategoryListUpdated=!0,o.loadBackgroundCategories(),$("#backgroundCategoryUpdateModal").modal("hide"),e.$emit(n.SHOW_BACKGROUND_NOTIFICATION,{message:"Update Successfully",type:"success"}))})},e.changePaletteTab=function(t){e.resetUploadView(),e.showError=!1,0==t?(e.colorChooser.Val="#000000",e.uploadBackground.isImage=0):(e.uploadBackground.isImage=1,e.isUploadBackgroundVisible=!1,e.isUploadFileCount=!1)},e.onColorChooserChange=function(t){e.Color=t},e.onColorUpdate=function(t){a(function(){e.editBackground.color_value=t})},"AddBackgrounds"==t.Id?e.addNewBackground():"AddBackgroundCategory"==t.Id&&setTimeout(function(){e.editBackgroundCategory()},1e3)}]),angular.module("background").factory("BackgroundService",["$http","AppConfig","$rootScope","BackgroundModel",function(e,t,a,o){var r=t.API_KEY;return loadBackgroundCategories=function(){e.get(a.serviceAPI+"?reqmethod=getBackgroundDesignCatagory").success(function(e){o.setBackgroundCategories(e)}).error(function(){console.log("error on loadBackgroundCategories : ",response)})},loadBackgrounds=function(t,r,i,n){e.get(a.serviceAPI+"?reqmethod=fetchBackgroundDesignsUploaded&searchval="+t+"&categoryValue="+r+"&lastLoaded="+i+"&loadCount="+n+"&randomNumber="+Math.random()).success(function(e){o.setBackgroundList(e)}).error(function(){console.log("error on loadDesigns : ",response)})},loadBackgroundDetails=function(t){var o=e.get(a.serviceAPI+"?reqmethod=getBackDesignDetails"+"&design_background_id="+t);return o},addBackgroundDetails=function(t,o,i,n,s,d,l,c){c=encodeURI(c);var u=$.param({apikey:r,reqmethod:"addBulkBackgroundDesign",design_back_name:t,price:o,tags:i,isScalable:n,category_id:s,files:d,is_image:l,color:c}),g=e({method:"POST",url:a.serviceAPI,data:u,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return g},removeBackgroundImage=function(t,o){var i=e.get(a.serviceAPI+"?reqmethod=removeAppImage&apikey="+encodeURIComponent(r)+"&category=background_design"+"&name="+t+"&design_background_id="+o);return i},removeBackgroundId=function(t){var o=e.get(a.serviceAPI+"?reqmethod=deleteBackgroundDesignById&design_background_id="+t);return o},getPrintMethods=function(){var t=e.get(a.serviceAPI+"?reqmethod=getAllPrintMethods&apikey="+encodeURIComponent(r));return t},updateBackgroundDetails=function(t,o,i,n,s,d,l){var c=$.param({apikey:r,reqmethod:"updateBackgroundDesign",id:t,background_design_name:o,price:i,category_id:n,tags:s,isScalable:d,color_value:l}),u=e({method:"POST",url:a.serviceAPI,data:c,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return u},addBackgroundCategory=function(t){var o=e.get(a.serviceAPI+"?reqmethod=saveBackGround_Designcategory"+"&cate_name="+t);return o},removeBackgroundCategory=function(t){var o=e.get(a.serviceAPI+"?reqmethod=removeBackground_DesignCategory"+"&pCategory="+t);return o},updateCategoryName=function(t,o){var r=e.get(a.serviceAPI+"?reqmethod=updateBackgroundDesignCategory"+"&id="+t+"&cate_name="+o);return r},{loadBackgroundCategories:loadBackgroundCategories,loadBackgrounds:loadBackgrounds,loadBackgroundDetails:loadBackgroundDetails,addBackgroundDetails:addBackgroundDetails,removeBackgroundImage:removeBackgroundImage,removeBackgroundId:removeBackgroundId,getPrintMethods:getPrintMethods,updateBackgroundDetails:updateBackgroundDetails,addBackgroundCategory:addBackgroundCategory,updateCategoryName:updateCategoryName,removeBackgroundCategory:removeBackgroundCategory}}]),angular.module("backgroundPattern").controller("BackgroundPatternController",["$scope","$rootScope","$timeout","BackgroundPatternService","BackgroundPatternModel","translateService","MainEvent",function(e,t,a,o,r,i,n){e.isEditViewActive=!1,e.isUploadViewActive=!1,e.isUploadFileCount=!1,e.isSelectedPatternVisible=!1,e.categoryElms=[],e.uploadTags=[],e.uploadPattern={url:"",name:"",price:0,tags:[]},e.searchStr="",e.isCategoryListUpdated=!1,e.catDetail={id:"",cate_name:""},e.editCategoryElms=[],e.editPattern={url:"",name:"",price:0,tags:[]},e.editIds=[],e.editTags=[],e.preloader=!0,e.isUploadPatternVisible=!1,e.showMsg=i.translateText("Invalid file format"),e.selectedCatIndex=null,e.patternList=[],e.bgPatternCategoryList=[],e.catPlaceHolder=i.translateText("Enter Category"),e.patternRange=30,e.isLoadMorePreloader=!1,e.patternCheck=[],e.fileCount=0,e.selectedCategory=i.translateText("All Categories"),e.printMethods=[],e.init=function(){e.dataLoaded=!1,e.isLoadMore=r.getLoadMoreStatus(),e.selectedCategory=r.getCategory(),e.printMethods=[],o.getPrintMethods().then(function(t){for(var a=0;t.data.length>a;a++)"1"==t.data[a].is_enable&&e.printMethods.push(t.data[a])}),r.getPatternLoadStatus()?(e.dataLoaded=!0,e.bgPatternCategoryList=r.getBackgroundPatternCategories(),e.patternList=r.getPatternList(),0==e.patternList.length&&(e.noData=!0)):(o.loadBackgroundPatternCategories(),e.loadBackgroundPatternList())},t.$on(n.PATTERN_CATEGORIES_LOADED,function(){e.bgPatternCategoryList=r.getBackgroundPatternCategories(),0==e.isCategoryListUpdated||(e.isCategoryListUpdated=!0)}),e.loadBackgroundPatternList=function(){var t=e.selectedCatId;t==i.translateText("All Categories")&&(t=""),o.loadBackgroundPattern(e.searchStr,t,r.getStartIndex(),e.patternRange)},t.$on(n.PATTERN_LIST_LOADED,function(t,a){e.patternList=[],e.noData=!1,$(".design-admin-box-wrap").animate({scrollTop:1e3},"slow"),e.selectedCategory=r.getCategory(),e.patternList=r.getPatternList(),0==e.patternList.length&&(e.noData=!0),e.patternRange>a?(r.setLoadMoreStatus(!1),e.isLoadMore=!1):(r.setLoadMoreStatus(!0),e.isLoadMore=!0),e.isLoadMorePreloader=!1,e.dataLoaded=!0,e.dataList=!1}),e.categorySelected=function(t){e.noData=!1,e.dataLoaded=!1,e.dataList=!0,e.uncheckAll(),""==t?(e.selectedCatId=0,e.selectedCategory=i.translateText("All Categories"),r.resetPatternList(),r.setCategory(e.selectedCategory)):(e.selectedCatId=t.id,e.selectedCategory=t.category_name,r.resetPatternList(),r.setCategory(e.selectedCategory)),e.loadBackgroundPatternList()},e.loadMore=function(){e.isLoadMorePreloader=!0,r.setStartIndex(e.patternRange),e.loadBackgroundPatternList()},e.addNewBackgroundPattern=function(){e.resetUploadView(),e.extainsionArr=[],e.base64List=[],e.categoryElms=[],e.uploadTags=[],e.preloader=!0,e.uncheckAll(),e.isEditViewActive=!1,e.isUploadPatternVisible=!1,e.isUploadViewActive=!0,e.showError=!1,e.categoryElms.push({category:i.translateText("Category"),categoryId:""})},e.checkFileExtn=function(t){e.extnArr=[];for(var a=0;t.length>a;a++){var o=t[a],r=o.name.replace(/.*\./,"").toLowerCase();e.extnArr.push(r)}for(var i=1;e.extnArr.length>i;i++)if(e.extnArr[i]!==e.extnArr[0])return!1;return!0},e.notification=function(e,t){$(".pgn-wrapper").show(),$(".pgn-wrapper").empty(),$("#"+t).pgNotification({style:"bar",message:e,position:"center",timeout:0,type:"info"}).show(),setTimeout(function(){$(".pgn-wrapper").fadeOut("slow")},4e3)},e.upload=function(t){e.buttonStatus=!1,e.NoOfColor=!1,e.extainsionArr=[],e.base64List=[];var o=["png","jpg","jpeg","bmp"],r=["png","jpg","jpeg","bmp"];if(t&&t.length){if(e.uploadFileCount=t.length,t.length>1){var n=e.checkFileExtn(t);if(n)e.buttonStatus=!0,e.isUploadPatternVisible=!1,e.isUploadFileCount=!0,e.NoOfColor=!0;else{e.buttonStatus=!1,e.isUploadPatternVisible=!1,e.isUploadFileCount=!1,e.NoOfColor=!1;var s=i.translateText("same file format");e.notification(s,"upload-msg")}}else e.buttonStatus=!0,e.isUploadPatternVisible=!0,e.isUploadFileCount=!1;for(var d=0;t.length>d;d++){var l=t[d],c=l.name.replace(/.*\./,"").toLowerCase();if(1==t.length)for(var u=0;r.length>u;u++)c==r[u]&&(e.NoOfColor=!0);if(o.indexOf(c)>=0){e.showError=!1,e.extainsionArr.push(c);var g=new FileReader;g.onload=function(t){a(function(){e.uploadPattern.url=t.target.result;var a=t.target.result,o=a.indexOf("base64"),r=a.substring(o+7);e.base64List.push(r)})},g.readAsDataURL(l)}else e.isUploadPatternVisible=!1,e.showError=!0}}},e.getUploadFiles=function(){e.uploadFiles=[];for(var t=0;e.base64List.length>t;t++)e.uploadFiles.push({type:e.extainsionArr[t],base64:e.base64List[t]})},e.uploadBackgroundPattern=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else{var t=[];1==e.uploadPattern.scalable?1:0,e.base64List&&e.getUploadFiles(),e.getUploadTagList();for(var a=0;e.categoryElms.length>a;a++)""!=e.categoryElms[a].categoryId&&t.push(e.categoryElms[a].categoryId);e.uploadPattern.name&&t.length>0&&e.base64List.length>0?(e.preloader=!1,o.addBackgroundPatternDetails(e.uploadPattern.name,e.uploadPattern.price,e.uploadPattern.tags,t,e.uploadFiles).then(function(t){e.preloader=!0,"Success"==t.data.status?(r.resetPatternList(),e.isUploadViewActive=!1,e.isEditViewActive=!1,e.loadBackgroundPatternList(),e.$emit(n.SHOW_NOTIFICATION,{message:"Upload successfully",type:"success"})):(e.resetUploadView(),e.$emit(n.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"}))})):e.$emit(n.SHOW_NOTIFICATION,{message:"Please Enter All the Field",type:"info"})}},e.getUploadTagList=function(){e.uploadPattern.tags=[];for(var t=0;e.uploadTags.length>t;t++)e.uploadPattern.tags.push(e.uploadTags[t].text)},e.resetUploadView=function(){e.categoryElms=[],e.uploadTags=[],e.uploadPattern={url:"",name:"",price:0,tags:""},e.categoryElms.push({category:i.translateText("Category"),categoryId:""}),e.extainsionArr=[],e.base64List=[],e.isUploadViewActive=!0,e.uploadFileCount=0,e.isUploadFileCount=!1},e.cancelUploadBackgroundPattern=function(){e.resetUploadView(),e.isUploadViewActive=!1},e.addUploadCategoryElm=function(){e.categoryElms.push({category:i.translateText("Category"),categoryId:""})},e.removeUploadCategoryElms=function(t){e.categoryElms.splice(t,1)},e.selectCategoryDefault=function(t,a){e.categoryElms[a].category=t,e.categoryElms[a].categoryId=""},e.uploadCategorySelected=function(t,a){s(t.category_name)?e.categoryElms[a]={category:i.translateText("Category"),categoryId:""}:(e.categoryElms[a].category=t.category_name,e.categoryElms[a].categoryId=t.id)};var s=function(t){for(var a=0;e.categoryElms.length>a;a++)if(e.categoryElms[a].category==t)return!0;return!1};e.patternSelected=function(t){t?(e.fileCount++,e.fileCount==e.patternList.length&&(e.allChecked=!0)):(e.fileCount--,(0==e.fileCount||e.fileCount!=e.patternList.length)&&(e.allChecked=!1))},e.selectAllChecked=function(t){for(var a=0;e.patternList.length>a;a++)e.patternCheck[a]=t;e.fileCount=t?e.patternList.length:0},e.uncheckAll=function(){for(var t=0;e.patternList.length>t;t++)e.patternCheck[t]=!1;e.fileCount=0,e.allChecked=!1},e.deleteSelectedPattern=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){var t="background delete";e.$emit(n.SHOW_WARNING_MODAL,"background_pattern",t)}},t.$on(n.WARNING_MODAL_CONFIRM,function(t,a){if("background_pattern"==a){for(var i=[],n=[],s=0;e.patternCheck.length>s;s++)1==e.patternCheck[s]&&(i.push(e.patternList[s].file_name),n.push(e.patternList[s].id));o.removePatternImage(""+i,""+n).then(function(){e.uncheckAll(),r.resetPatternList(),e.isEditViewActive=!1,e.isUploadViewActive=!1,e.loadBackgroundPatternList()})}}),e.editSelectedBackgroundPattern=function(){if(e.fileCount>0){e.isEditViewActive=!0,e.isUploadViewActive=!1,e.resetEditView();for(var t=0;e.patternCheck.length>t;t++)if(1==e.patternCheck[t])if(e.fileCount>1)e.preloader=!1,e.editPattern.scalable=!0,e.editIds.push(e.patternList[t].id);else if(1==e.fileCount){e.preloader=!1;var a=e.patternList[t].url;e.editIds.push(e.patternList[t].id),o.loadBackgroundPatternDetails(e.patternList[t].id).then(function(t){e.showBackgroundPatternDetails(a,t.data)})}e.fileCount>1&&e.editMultiplePattern()}else e.isEditViewActive=!1},e.checkCat=function(e){for(var t=0;e.length>t;t++)for(j=t;e[j].length>j;j++)if(e[0].length!=e[t+1].length||e[0][j].category_id!=e[t+1][j].category_id)return!1;return!0},e.editMultiplePattern=function(){e.preloader=!1,e.categoryIds=[];for(var t=0;e.editIds.length>t;t++)o.loadBackgroundPatternDetails(e.editIds[t]).then(function(t){e.categoryIds.push(t.data.category)});a(function(){var t=e.checkCat(e.categoryIds);if(e.editCategoryElms=[],t)for(var o=0;e.categoryIds[0].length>o;o++)e.editCategoryElms=e.categoryIds[0],e.preloader=!0;else e.editCategoryElms.push({category:i.translateText("Category"),categoryId:""}),a(function(){e.preloader=!0})},2e3)},e.showBackgroundPatternDetails=function(t,a){e.editPattern.url=t,e.editPattern.name=a.pattern_detail.background_pattern_name,e.editPattern.price=a.pattern_detail.price,e.isSelectedPatternVisible=!0,a.pattern_detail.file_name.replace(/.*\./,"").toLowerCase(),null==a.category?e.editCategoryElms.push({category:i.translateText("Category"),categoryId:""}):e.editCategoryElms=a.category;for(var o=0;a.tag.length>o;o++)e.editPattern.tags.push(a.tag[o].tag_name);e.editTags=e.editPattern.tags,e.preloader=!0},e.resetEditView=function(){e.editPattern={url:"",name:"",price:0,tags:[]},e.editIds=[],e.editTags=[],e.editCategoryElms=[],e.editCategoryElms.push({category:i.translateText("Category"),categoryId:""}),e.isSelectedPatternVisible=!1,e.showError=!1},e.addEditCategoyElms=function(){e.editCategoryElms.push({category:i.translateText("Category"),categoryId:""})},e.removeEditCategoryElms=function(t){e.editCategoryElms.splice(t,1)},e.categoryDefault=function(t,a){e.editCategoryElms[a].category_name=t,e.editCategoryElms[a].category_id=""},e.editCategorySelected=function(t,a){d(t.category_name)?e.editCategoryElms[a]={category:i.translateText("Category"),categoryId:""}:(e.editCategoryElms[a].category_name=t.category_name,e.editCategoryElms[a].category_id=t.id)};var d=function(t){for(var a=0;e.editCategoryElms.length>a;a++)if(e.editCategoryElms[a].category_name==t)return!0;return!1};e.saveEditPattern=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){for(var t=[],a=0;e.editCategoryElms.length>a;a++)""!=e.editCategoryElms[a].category_id&&null!=e.editCategoryElms[a].category_id&&t.push(e.editCategoryElms[a].category_id);e.editPattern.tags=[];for(var i=0;e.editTags.length>i;i++)e.editPattern.tags.push(e.editTags[i].text);e.editPattern.name&&t.length>0?(e.preloader=!1,o.updateBackgroundPatternDetails(e.editIds,e.editPattern.name,e.editPattern.price,t,e.editPattern.tags).then(function(t){e.preloader=!0,e.uncheckAll(),"Success"==t.data.status?(r.resetPatternList(),e.cancelEditPattern(),e.loadBackgroundPatternList(),e.$emit(n.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(n.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})})):e.$emit(n.SHOW_NOTIFICATION,{message:"Please Enter All the Field",type:"info"})}else e.$emit(n.SHOW_NOTIFICATION,{message:"No file selected",type:"info"})},e.cancelEditPattern=function(){e.resetEditView(),e.uncheckAll(),e.isEditViewActive=!1},e.editBackgroundPatternCategory=function(){$("#patternCategoryModal").modal("show"),e.resetBackgroundPatternCategoriesModal()},e.resetBackgroundPatternCategoriesModal=function(){e.selectedCatIndex=null,e.showCategoryClosebtn=[],e.showCategoryBadge=[],e.selectedCateg=""},e.addNewCategory=function(t){o.addBackgroundPatternCategory(t).then(function(t){"success"==t.data.status?(e.resetBackgroundPatternCategoriesModal(),e.isCategoryListUpdated=!0,o.loadBackgroundPatternCategories(),e.$emit(n.SHOW_BACKGROUND_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(n.SHOW_BACKGROUND_NOTIFICATION,{message:"Design Already Exist",type:"info"})})},e.deletePatternCategory=function(t){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(0/0!=parseInt(t)){e.catIndex=t;var a="Category Delete";e.$emit(n.PATTERN_CATEGORY_DELETE_MODAL,"Background Pattern Category",a)}},t.$on(n.CATEGORY_DELETE_MODAL_CONFIRM,function(t,a){if("Background Pattern Category"==a&&null!=e.catIndex){var r=e.bgPatternCategoryList[e.catIndex].category_name;o.removeBackgroundPatternCategory(r).then(function(t){t.data.status&&(e.catIndex=null,e.isCategoryListUpdated=!0,o.loadBackgroundPatternCategories(),e.resetBackgroundPatternCategoriesModal(),e.$emit(n.SHOW_BACKGROUND_NOTIFICATION,{message:"Delete Successfully",type:"success"}))})}}),e.editCategory=function(t){e.catDetail.id=e.bgPatternCategoryList[t].id,e.catDetail.cate_name=e.bgPatternCategoryList[t].category_name,$("#backgroundCategoryUpdateModal").modal("show")},e.updateCategory=function(){1==e.demoStatus?e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):o.updateCategoryName(e.catDetail.id,e.catDetail.cate_name).then(function(t){t.data.msg?($("#backgroundCategoryUpdateModal").modal("hide"),e.$emit(n.SHOW_BACKGROUND_NOTIFICATION,{message:"Design Already Exist",type:"info"})):(e.resetBackgroundPatternCategoriesModal(),e.isCategoryListUpdated=!0,o.loadBackgroundPatternCategories(),$("#backgroundCategoryUpdateModal").modal("hide"),e.$emit(n.SHOW_BACKGROUND_NOTIFICATION,{message:"Update Successfully",type:"success"}))})},"AddPatterns"==t.Id?e.addNewBackgroundPattern():"AddPatternCategory"==t.Id&&setTimeout(function(){e.editBackgroundPatternCategory()},1e3)}]),angular.module("backgroundPattern").factory("BackgroundPatternService",["$http","AppConfig","$rootScope","BackgroundPatternModel",function(e,t,a,o){var r=t.API_KEY;return loadBackgroundPatternCategories=function(){e.get(a.serviceAPI+"?reqmethod=getBackgroundPatternCategory").success(function(e){o.setBackgroundPatternCategories(e)}).error(function(){console.log("error on loadBackgroundCategories : ",response)})},addBackgroundPatternCategory=function(t){var o=e.get(a.serviceAPI+"?reqmethod=saveBackGroundPatternCategory"+"&cate_name="+t);return o},updateCategoryName=function(t,o){var r=e.get(a.serviceAPI+"?reqmethod=updateBackgroundPatternCategory"+"&id="+t+"&cate_name="+o);return r},removeBackgroundPatternCategory=function(t){var o=e.get(a.serviceAPI+"?reqmethod=removeBackgroundPatternCategory"+"&pCategory="+t);return o},loadBackgroundPattern=function(t,r,i,n){e.get(a.serviceAPI+"?reqmethod=fetchBackgroundPatternsUploaded&searchval="+t+"&categoryValue="+r+"&lastLoaded="+i+"&loadCount="+n+"&randomNumber="+Math.random()).success(function(e){o.setPatternList(e)}).error(function(){console.log("error on loadDesigns : ",response)})},loadBackgroundPatternDetails=function(t){var o=e.get(a.serviceAPI+"?reqmethod=getBackgroundPatternDetails"+"&background_pattern_id="+t);return o},addBackgroundPatternDetails=function(t,o,i,n,s){var d=$.param({apikey:r,reqmethod:"addBulkBackgroundPattern",background_pattern_name:t,price:o,tags:i,category_id:n,file:s}),l=e({method:"POST",url:a.serviceAPI,data:d,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return l},updateBackgroundPatternDetails=function(t,o,i,n,s){var d=$.param({apikey:r,reqmethod:"updateBackgroundPattern",id:t,background_pattern_name:o,price:i,category_id:n,tags:s}),l=e({method:"POST",url:a.serviceAPI,data:d,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return l},getPrintMethods=function(){var t=e.get(a.serviceAPI+"?reqmethod=getAllPrintMethods&apikey="+encodeURIComponent(r));return t},removeBackgroundPatternId=function(t){var o=e.get(a.serviceAPI+"?reqmethod=deleteBackgroundPatternById&background_pattern_id="+t);return o},removePatternImage=function(t,o){var i=e.get(a.serviceAPI+"?reqmethod=removeAppImage&apikey="+encodeURIComponent(r)+"&category=background_pattern"+"&name="+t+"&background_pattern_id="+o);return i},{loadBackgroundPatternCategories:loadBackgroundPatternCategories,addBackgroundPatternCategory:addBackgroundPatternCategory,updateCategoryName:updateCategoryName,removeBackgroundPatternCategory:removeBackgroundPatternCategory,loadBackgroundPattern:loadBackgroundPattern,loadBackgroundPatternDetails:loadBackgroundPatternDetails,addBackgroundPatternDetails:addBackgroundPatternDetails,updateBackgroundPatternDetails:updateBackgroundPatternDetails,getPrintMethods:getPrintMethods,removeBackgroundPatternId:removeBackgroundPatternId,removePatternImage:removePatternImage}}]),angular.module("colorSwaches").controller("swatchController",["$scope","$rootScope","$timeout","swatchService","translateService","MainEvent","ColorSwatchModel","utilities",function(e,t,a,o,r,i,n,s){e.optionList=[],e.preloader=!0,e.addpreloader=!0,e.isSelectedSwachVisible=!1,e.isupload=!1,e.isAddNewButton=!0,e.swatchRange=10,e.isPreLoader=!1,e.showError1=!1,e.showMsg=r.translateText("Invalid file format"),e.colorSwatch={isColor:0,Val:"#ffffff"};var d="";e.init=function(){e.isStore="shopify"==RIAXEAPP.localSettings.store_type?!1:!0,e.defaultColorImage="./assets/images/no-img.png",e.randomValue=s.getRandomNo(),n.getSwatchLoadStatus()?(e.preloader=!1,e.optionList=n.getSwatchList(),e.isLoadMore=n.getLoadMoreStatus()):o.fetchColorswatches(n.getStartIndex(),e.swatchRange)},t.$on(i.SWATCH_LIST_LOADED,function(t,a){e.optionList=n.getSwatchList(),e.swatchRange>a||void 0==a?(n.setLoadMoreStatus(!1),e.isLoadMore=!1):(n.setLoadMoreStatus(!0),e.isLoadMore=!0),e.preloader=!1,e.isPreLoader=!1}),e.setFile=function(t,o){var r=["png","jpg","jpeg"];t=t[0],e.showError1=!1;var i=t.name.replace(/.*\./,"").toLowerCase();if(e.extension=i,r.indexOf(i)>=0){var n=new FileReader;n.onload=function(t){a(function(){e.optionList[o].swatchImage=t.target.result,e.optionList[o].enableSaveStatus=!0;var a=t.target.result,r=a.indexOf("base64"),i=a.substring(r+7);e.uploadBase64=i})},n.readAsDataURL(t)}else e.showError1=!0,console.log("Invalid file format")},e.save=function(t,a){e.optionList[a].enableSaveStatus=!1,e.optionList[a].enableBrowseStatus=!0,e.preloader=!1,o.saveColorSwatches(t.label,t.value,t.width,t.height,e.uploadBase64).then(function(t){e.optionList[a].enableBrowseStatus=!1,e.optionList[a].enableSaveStatus=!0,"success"==t.data.status?(e.preloader=!0,e.$emit(i.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(i.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})})},e.swachImage=function(t){e.swachimgUrl="",e.isupload=!0,e.showError1=!1;var o=["png","jpg","jpeg"];if(t&&t.length){for(var r=0;t.length>r;r++)var i=t[r];var n=i.name.replace(/.*\./,"").toLowerCase();if(o.indexOf(n)>=0){var s=new FileReader;s.onload=function(t){a(function(){e.isSelectedSwachVisible=!0,e.swachimgUrl=t.target.result;var a=t.target.result,o=a.indexOf("base64");e.uploadbase64Img=a.substring(o+7),e.uploadFileExtensionImg=n})},s.readAsDataURL(i)}else e.showError1=!0,console.log("Invalid file format")}},e.checkDuplicateName=function(t){if(e.optionList.length>0)for(var a=0;e.optionList.length>a;a++)if(e.optionList[a].label.toUpperCase()==t.toUpperCase())return!1;return!0},e.swachColor=[],e.addSwachColor=function(){var t=e.swachColor.name,a=0==e.colorSwatch.isColor?e.uploadbase64Img:e.colorSwatch.Val,r=a.charAt(0);if(d="#"==r?"hexcode":"image",""==e.uploadbase64Img&&0==e.colorSwatch.isColor)e.$emit(i.SHOW_NOTIFICATION,{message:"Please Select Swatch Image",type:"info"});else{var n=e.checkDuplicateName(t);n?(e.addpreloader=!1,o.addColorswatches(t,a,d).then(function(t){e.allAttribute={},e.allAttribute.label=t.data.attribute_value,e.allAttribute.value=t.data.attribute_id,e.allAttribute.swatchImage=t.data.swatchImage,e.allAttribute.hexCode=t.data.hexCode,e.optionList.unshift(e.allAttribute),e.swachColor.name="",e.isSelectedSwachVisible=!1,e.isAddViewActive=!1,"success"==t.data.status?(e.addpreloader=!0,e.$emit(i.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(i.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})})):e.$emit(i.SHOW_NOTIFICATION,{message:"Duplicate Swatch Name",type:"info"})}},e.loadMore=function(){e.preloader=!1,e.dataList=!0,e.isPreLoader=!0,n.setStartIndex(e.swatchRange),o.fetchColorswatches(n.getStartIndex(),e.swatchRange)},e.checkDuplicateNameUpdate=function(t){if(e.optionList.length>0){for(var a=0;e.optionList.length>a;a++)if(e.optionList[a].value!=t.id&&e.optionList[a].label.toUpperCase()==t.optionlabel.toUpperCase())return!1;return!0}return!0},e.editSwachColor=function(t){if(1==e.editInfo.isColor&&0==e.isupload&&(e.isupload=!0),t.optionlabel!=e.checkValidLabel||e.isupload){var a=e.checkDuplicateNameUpdate(t);if(a){e.addpreloader=!1,e.Colorname=t.optionlabel,e.optionid=t.id,e.swatchimage=0==t.isColor?e.uploadbase64Img:t.hexValue;var r=e.swatchimage.charAt(0);d="#"==r?"hexcode":"image",o.editSwachColor(e.optionid,e.Colorname,e.swatchimage,d).then(function(t){if(e.optionList.label="",e.isupload=!1,e.isEditViewActive=!1,"success"==t.data.status){e.addpreloader=!0,e.isAddNewButton=!0;for(var a=0;e.optionList.length>a;a++)e.optionList[a].value==t.data.attribute_id&&(e.optionList[a].label=t.data.attribute_value,t.data.swatchImage?(e.optionList[a].swatchImage=t.data.swatchImage+s.getRandomNo(),e.optionList[a].hexCode=""):(e.optionList[a].hexCode=t.data.hexCode,e.optionList[a].swatchImage=""));e.$emit(i.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})}else e.$emit(i.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})})}else e.$emit(i.SHOW_NOTIFICATION,{message:"Duplicate Swatch Name",type:"info"})}else e.$emit(i.SHOW_NOTIFICATION,{message:"No Data Changed",type:"info"})},e.addNewColor=function(){e.colorSwatch={isColor:0,Val:"#ffffff"},e.isAddViewActive=!0,e.swachColor.name="",e.uploadbase64Img="",e.isSelectedSwachVisible=!1,e.showError1=!1},e.editattributevalue=function(t){e.swachimgUrl="",e.editInfo=[],e.editInfo.id=t.value,e.hexCode=t.hexCode,e.editInfo.hexValue=t.hexCode,e.swachimgUrl=t.swatchImage+s.getRandomNo(),e.editInfo.optionlabel=t.label,""!=e.hexCode?(e.editInfo.isColor=1,e.swachimgUrl=""):e.editInfo.isColor=0,e.checkValidLabel=t.label,e.isAddViewActive=!1,e.isEditViewActive=!0,e.isAddNewButton=!1,e.showError1=!1,e.isSelectedSwachVisible=""!=e.swachimgUrl?!0:!1,$("html, body").animate({scrollTop:0},"slow")
},e.cancelAddColorView=function(){e.isAddViewActive=!1,e.isEditViewActive=!1,e.isAddNewButton=!0,e.swachColor.name="",e.uploadbase64Img="",e.checkValidLabel="",e.isupload=!1,e.showError1=!1},e.onColorSwatchChange=function(t){e.colorSwatch.Val=t},e.onColorSwatchEdit=function(t){e.isupload=!0,e.editInfo.hexValue=t},e.changeEditInfo=function(t){0==t?(e.editInfo.isColor=0,e.isupload=!1):1==t&&(e.editInfo.isColor=1,e.isupload=!1)}}]),angular.module("colorSwaches").factory("swatchService",["$http","AppConfig","$rootScope","ColorSwatchModel",function(e,t,a,o){var r=t.API_KEY;return fetchColorswatches=function(t,i){e.get(a.serviceAPI+"?reqmethod=fetchColorSwatch&apikey="+encodeURIComponent(r)+"&lastLoaded="+t+"&loadCount="+i).success(function(e){o.setSwatchList(e)}).error(function(){console.log("error on setSwatchList : ",response)})},saveColorSwatches=function(t,o,i,n,s){var d=$.param({apikey:r,reqmethod:"saveColorSwatch",label:t,value:o,swatchWidth:i,swatchHeight:n,imgData:s}),l=e({method:"POST",url:a.serviceAPI,data:d,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return l},addColorswatches=function(t,o,i){var n=$.param({apikey:r,reqmethod:"addColorSwatch",colorname:t,imagename:o,imagetype:i}),s=e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s},editSwachColor=function(t,o,i,n){var s=$.param({apikey:r,reqmethod:"editSwachColor",option_id:t,colorname:o,imagename:i,imagetype:n}),d=e({method:"POST",url:a.serviceAPI,data:s,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return d},{fetchColorswatches:fetchColorswatches,saveColorSwatches:saveColorSwatches,addColorswatches:addColorswatches,editSwachColor:editSwachColor}}]),angular.module("dashBoard").controller("dashBoardController",["$scope","$rootScope","$timeout","DasBoardService","DashBoardModel","translateService","MainEvent","AppConfig","webStorage","utilities",function(e,t,a,o,r,i,n,s,d,l){e.salesData=[{date:"2016-03-27",sales:2},{date:"2016-03-28",sales:1}],e.isGraphPreLoader=!0,e.showGraphNoResultMsg=!1,e.dashBoardLinkList=[{name:"design",module:"Graphics",id:"AddCliparts",label:"Add Cliparts"},{name:"design",module:"Graphics",id:"AddClipartCategory",label:"Add Edit Clipart Category"},{name:"background",module:"Graphics",id:"AddBackgrounds",label:"Add Backgrounds"},{name:"background",module:"Graphics",id:"AddBackgroundCategory",label:"Add Edit Background Category"},{name:"backgroundPattern",module:"Graphics",id:"AddPatterns",label:"Add Patterns"},{name:"backgroundPattern",module:"Graphics",id:"AddPatternCategory",label:"Add Edit Pattern Category"},{name:"mask",module:"Graphics",id:"AddMask",label:"Add Mask"},{name:"shape",module:"Graphics",id:"AddShape",label:"Add Shapes"},{name:"shape",module:"Graphics",id:"AddShapeCategory",label:"Add Edit Shapes Category"},{name:"distressEffect",module:"Graphics",id:"AddDistress",label:"Add Distress"},{name:"palette",module:"Color Palettes",id:"AddPalette",label:"Add Color Palette"},{name:"palette",module:"Color Palettes",id:"AddPaletteCategory",label:"Add Edit Palette Category"},{name:"textFX",module:"Text",id:"AddTextFx",label:"Add TextFX"},{name:"wordCloud",module:"Text",id:"AddWordcloud",label:"Add WordCloud"},{name:"webFonts",module:"Text",id:"AddWebfont",label:"Add Fonts"},{name:"webFonts",module:"Text",id:"AddWebfontCategory",label:"Add Edit Fonts Category"}],e.settingLink=[{name:"setting",module:"settings",id:"chooseLanguage",label:"Lang"},{name:"setting",module:"settings",id:"unitSetting",label:"Unit"},{name:"setting",module:"settings",id:"currencySetting",label:"Currency"},{name:"setting",module:"settings",id:"fileSize",label:"Upload Image properties"},{name:"setting",module:"settings",id:"featureSettings",label:"Enable or Disable Features"}],e.init=function(){e.random=l.getRandomNo(),e.defaultImg="./assets/images/no-img.png",e.printImageUrl=t.assertsPath+"printmethod/",r.getDashBoardLoadStatus()?e.printMethodList=r.getPrintMethodImageList():o.loadPrintMethod(),r.getProductCatStatus()?e.productCatList=r.getProductCatList():o.loadproductCategories(),r.getOrderGraphStatus()?(e.salesData=r.getOrderGraphDetails(),e.isGraphPreLoader=!1):o.loadOrderGraph()},t.$on(n.DASHBOARD_LOADED,function(){try{e.printMethodList=r.getPrintMethodImageList(),r.setLoadMoreStatus(!0)}catch(t){console.log("Error in print method list")}}),t.$on(n.PRODUCT_CAT_LOADED,function(){try{e.productCatList=r.getProductCatList(),r.setProductCatStatus(!0)}catch(t){console.log("Error in product category list")}}),e.clickOnShortcut=function(a,o,r){if(e.allowModule=d.local.get("moduleAllow"),e.userType=d.local.get("type"),"1"==e.userType||d.local.has("icons",!1)){for(var i=0;s.MODULE_LIST.length>i;i++)if(s.MODULE_LIST[i].name==a)var l=s.MODULE_LIST[i];l&&t.$emit(n.SHORTCUT_LINK,l,r)}else{var c=e.checkShortCutModule(o);if(c){for(var u=0;s.MODULE_LIST.length>u;u++)if(s.MODULE_LIST[u].name==a){var l=s.MODULE_LIST[u];t.$emit(n.SHORTCUT_LINK,l,r)}}else e.$emit(n.SHOW_NOTIFICATION,{message:"Access Denied",type:"info"})}},e.clickOnPrintProfile=function(a){if(t.printIndex=a,e.allowModule=d.local.get("moduleAllow"),e.userType=d.local.get("type"),"1"==e.userType||d.local.has("icons",!1)){for(var o=0;s.MODULE_LIST.length>o;o++)if("printSettingWizard"==s.MODULE_LIST[o].name)var r=s.MODULE_LIST[o];r&&t.$emit(n.PRINT_PROFILE_LINK,r,e.printMethodList[a])}else{var i=e.checkShortCutModule("Print Profile");if(i){for(var l=0;s.MODULE_LIST.length>l;l++)if("printSettingWizard"==s.MODULE_LIST[l].name){var r=s.MODULE_LIST[l];t.$emit(n.PRINT_PROFILE_LINK,r,e.printMethodList[a])}}else e.$emit(n.SHOW_NOTIFICATION,{message:"Access Denied",type:"info"})}},e.checkShortCutModule=function(t){for(var a=0;e.allowModule.length>a;a++)if(e.allowModule[a]==t)return!0;return!1},t.$on(n.DASHBOARD_ORDER_GRAPH,function(t,a){a>0?(e.salesData=r.getOrderGraphDetails(),e.isGraphPreLoader=!1):(e.showGraphNoResultMsg=!0,e.isGraphPreLoader=!1)})}]),angular.module("dashBoard").directive("linearChart",["$parse","$window",function(e,t){return{restrict:"EA",template:"<svg width='400' height='300'></svg>",link:function(a,o,r){function i(e){return e>=5?e=5:e>1&&(e-=1),e}function n(){l=C.time.scale().domain(C.extent(f,function(e){return e.datee})).range([h+10,S.attr("width")-h]),c=C.scale.linear().domain([0,C.max(f,function(e){return e.sales})]).range([S.attr("height")-h,0]),u=C.svg.axis().scale(l).orient("bottom").ticks(v).tickFormat(C.time.format("%d-%b-%y")),g=C.svg.axis().scale(c).orient("left").ticks(T),p=C.svg.line().x(function(e){return l(e.datee)}).y(function(e){return c(e.sales)}).interpolate("linear")}function s(){n(),y.append("svg:g").attr("class","x axis").attr("transform","translate(0,280)").call(u),y.append("svg:g").attr("class","y axis").attr("transform","translate(30,0)").call(g),y.append("svg:path").attr("d",p(f)).attr("stroke","#857777").attr("stroke-width",2).attr("fill","none"),division=C.select("body").append("division").attr("class","tooltip").style("opacity",0),y.selectAll("dot").data(f).enter().append("circle").attr("r",5).style("stroke","red").style("fill","#0fcece").attr("cx",function(e){return l(e.datee)}).attr("cy",function(e){return c(e.sales)}).on("mouseover",function(e){division.transition().duration(200).style("opacity",.9),division.html(I(e.datee)+"<br/>"+"sales - "+e.sales).style("left",C.event.pageX+"px").style("top",C.event.pageY-28+"px")}).on("mouseout",function(){division.transition().duration(500).style("opacity",0)})}function d(){C.selectAll(".axis").remove(),C.selectAll("circle").remove(),C.selectAll("path").remove(),s()}var l,c,u,g,p,m=e(r.chartData),f=m(a),h=20,C=t.d3,S=o.find("svg"),y=C.select(S[0]),I=C.time.format("%d %b"),_=C.time.format("%Y-%m-%d").parse;f.forEach(function(e){e.datee=_(e.date)});var v=0,T=0;a.$watchCollection(m,function(e){f=e;var t=C.time.format("%Y-%m-%d").parse;f.forEach(function(e){e.datee=t(e.date)}),v=f.length,T=f[0].sales;for(var a=0;f.length>a;a++)f[a].sales>T&&(T=f[a].sales);v=i(v),T=i(T),d()}),s()}}}]),angular.module("dashBoard").factory("DasBoardService",["$http","AppConfig","$rootScope","DashBoardModel",function(e,t,a,o){var r=t.API_KEY,i=function(t,i){e.get(a.serviceAPI+"?reqmethod=getAllPrintMethods&apikey="+encodeURIComponent(r)+"&srtIndex="+t+"&range="+i).success(function(e){o.setPrintMethod(e)}).error(function(){console.log("error on loadPrintMethod : ",response)})},n=function(){e.get(a.serviceAPI+"?reqmethod=getCategories&apikey="+encodeURIComponent(r)).success(function(e){o.setProductCategory(e)}).error(function(e){console.log("error setProductCategory : ",e)})},s=function(){e.get(a.serviceAPI+"?reqmethod=getOrdersGraph").success(function(e){o.setOrderGraphDetails(e)}).error(function(e){console.log("error loadOrderGraph : ",e)})};return{loadPrintMethod:i,loadproductCategories:n,loadOrderGraph:s}}]),angular.module("design").controller("DesignController",["$scope","$rootScope","$timeout","DesignService","DesignModel","translateService","MainEvent",function(e,t,a,o,r,i,n){function s(e){var t=e,a=new DOMParser,o=a.parseFromString(t,"text/xml"),r=o.getElementsByTagName("svg")[0],i=r.getAttribute("height").replace("px",""),n=r.getAttribute("width").replace("px","");if(0==i||0==i){var s=r.viewBox;i=s.baseVal.height,n=s.baseVal.width}l=parseFloat(n)/parseFloat(i),isNaN(l)&&(l=1)}function d(e){var t=e.split(".").pop();if(e=e.replace("thumb_",""),"svg"==t)$.ajax({url:e,dataType:"text",success:function(e){s(e)},error:function(e,t,a){console.log("ReadSVGFromURL >> ",a)}});else{var a=new Image;a.src=e,a.onload=function(){l=a.width/a.height}}}e.isEditViewActive=!1,e.isUploadViewActive=!1,e.isSelectedDesignVisible=!1,e.isUploadDesignVisible=!1,e.isUploadFileCount=!1,e.isCategoryListUpdated=!1,e.designList=[],e.designCategoryList=[],e.designSubCategoryList=[],e.searchStr="",e.designRange=30,e.designCheck=[],e.fileCount=0,e.categoryElms=[],e.uploadTags=[],e.uploadPrintType=[],e.showSubCatLabel=!0,e.uploadDesign={url:"",name:"",price:0,tags:[],scalable:!0,noColor:"",svg_as_file:!1,height:"",width:""},e.editCategoryElms=[],e.editDesign={url:"",name:"",price:0,tags:[],scalable:!1,noColor:"",svg_as_file:!1,height:"",width:""},e.printMethods=[],e.editIds=[],e.editTags=[],e.preloader=!0,e.NoOfColor=!1,e.sizeStatus=!1,e.selectedCatIndex=null,e.subCatPlaceHolder=i.translateText("Enter SubCategory"),e.catPlaceHolder=i.translateText("Enter Category"),e.catDetail={id:"",name:""},e.subCatDetail={id:"",name:""},e.isLoadMorePreloader=!1,e.showMsg=i.translateText("Invalid file format");var l=1;e.init=function(){if(e.dataLoaded=!1,e.isLoadMore=r.getLoadMoreStatus(),e.selectedCategory=r.getCategory(),e.selectedSubCategory=r.getSubCategory(),e.printMethods=[],r.getDesignLoadStatus()){e.dataLoaded=!0,e.designCategoryList=r.getDesignCategories(),e.defaultDataList=r.getDefaultCatSubCat(),e.showDefaultCatSubCat(e.defaultDataList);var t=r.getDesignList();0==t.length&&(e.noData=!0);for(var a=e.designList.length,i=0;t.length>i;i++){if(1==t[i].is_thumb){var n=t[i].url.substring(t[i].url.lastIndexOf("/")+1);t[i].url=t[i].url.substring(0,t[i].url.lastIndexOf("/"))+"/"+n}e.designList.push(t[i]),e.loadDesignSVGFromURL(t[i].url,a+i,t[i].is_svgasfile)}}else o.loadDesignCategories(),o.loadDefaultCatSubcat()},t.$on(n.DESIGN_CATEGORIES_LOADED,function(){e.designCategoryList=r.getDesignCategories();for(var t=0;e.designCategoryList.length>t;t++)e.designCategoryList[t].type="category";0==e.isCategoryListUpdated?e.loadDesignsList():e.isCategoryListUpdated=!0}),t.$on(n.DEFAULT_CATEGORIES_SUBCATEGORIES_LOADED,function(t,a){e.showDefaultCatSubCat(a)}),e.showDefaultCatSubCat=function(t){t.catName&&t.subCatName?(e.showSubCatLabel=!0,e.selectedDefaultCat=t.catName,e.selectedDefaultSubCat=t.subCatName):t.catName?(e.selectedDefaultCat=t.catName,e.showSubCatLabel=!1,e.selectedDefaultSubCat=i.translateText("Sub Category")):(e.selectedDefaultCat=i.translateText("All Categories"),e.selectedDefaultSubCat=i.translateText("Sub Category"))},e.getCurrentIndex=function(t){e.currentIndex=e.designCategoryList.indexOf(t)},e.getUpdateIndex=function(t){for(var a=0;e.designCategoryList.length>a;a++)e.designCategoryList[a].sort_order=a,e.designCategoryList[a].id==t.id&&(e.updateIndex=a);e.currentIndex!=e.updateIndex&&(e.isCategoryListUpdated=!0,r.setDesignCategories(e.designCategoryList),o.dragCategoryList(e.designCategoryList))},e.dropCallback=function(e,t){return"category"==t.type?t:!1},t.$on(n.DESIGN_SUB_CATEGORIES_LOADED,function(){e.designSubCategoryList=r.getDesignSubCategories()}),e.loadDesignsList=function(){var t=e.selectedCategory,a=e.selectedSubCategory;t==i.translateText("All Categories")&&(t=""),a==i.translateText("Sub Category")&&(a=""),o.loadDesigns(e.searchStr,t,a,r.getStartIndex(),e.designRange)},t.$on(n.DESIGN_LIST_LOADED,function(t,a){e.noData=!1,e.uncheckAll(),$(".design-admin-box-wrap").animate({scrollTop:1e3},"slow");var o=r.getDesignList();0==o.length&&(e.noData=!0),e.designList=[],e.designRange>a?(r.setLoadMoreStatus(!1),e.isLoadMore=!1):(r.setLoadMoreStatus(!0),e.isLoadMore=!0),e.isLoadMorePreloader=!1;for(var i=e.designList.length,n=0;o.length>n;n++){if(1==o[n].is_thumb){var s=o[n].url.substring(o[n].url.lastIndexOf("/")+1);o[n].url=o[n].url.substring(0,o[n].url.lastIndexOf("/"))+"/"+s}e.designList.push(o[n]),e.loadDesignSVGFromURL(o[n].url,i+n,o[n].is_svgasfile)}e.dataLoaded=!0,e.dataList=!1;try{$(".design-list").animate({scrollTop:$(".design-list")[0].scrollHeight},800)}catch(d){}}),e.loadDesignSVGFromURL=function(e,t,a){void 0!=e&&$.ajax({url:e,dataType:"text",index:t,success:function(o){e.indexOf(".svg")>-1&&"0"==a?element=angular.element(o):(element=angular.element('<img src="'+e+'"/>'),element.css({opacity:"1",width:"100%",height:"auto","max-height":"100%","margin-left":"0px","margin-top":"0px"})),$("#divsvg_"+t).empty(),$("#divsvg_"+t).append(element)},error:function(e,t,a){console.log("loadDesignSVGFromURL >> ",a)}})},e.categorySelected=function(t){e.noData=!1,e.dataLoaded=!1,e.dataList=!0,""==t?(e.selectedCategory=i.translateText("All Categories"),r.resetDesignList(),r.setCategory(e.selectedCategory),o.loadSubCategories(t)):(e.selectedCategory=t.category_name,r.resetDesignList(),r.setCategory(e.selectedCategory),o.loadSubCategories(t.id)),e.selectedSubCategory=i.translateText("Sub Category"),e.loadDesignsList()},e.subCategorySelected=function(t){e.noData=!1,e.dataLoaded=!1,e.dataList=!0,e.selectedSubCategory=""==t?i.translateText("Sub Category"):t.sub_category,r.resetDesignList(),r.setSubCategory(e.selectedSubCategory),e.loadDesignsList()},e.loadMore=function(){e.isLoadMorePreloader=!0,r.setStartIndex(e.designRange),e.loadDesignsList()},e.designSelected=function(t){t?(e.fileCount++,e.fileCount==e.designList.length&&(e.allChecked=!0)):(e.fileCount--,(0==e.fileCount||e.fileCount!=e.designList.length)&&(e.allChecked=!1))},e.selectAllChecked=function(t){for(var a=0;e.designList.length>a;a++)e.designCheck[a]=t;e.fileCount=t?e.designList.length:0},e.uncheckAll=function(){for(var t=0;e.designList.length>t;t++)e.designCheck[t]=!1;e.fileCount=0,e.allChecked=!1},e.deleteSelectedDesign=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){var t="clipart delete";e.$emit(n.SHOW_WARNING_MODAL,"design",t)}else console.log("No files selected")},t.$on(n.WARNING_MODAL_CONFIRM,function(t,a){if("design"==a){for(var i=[],n=[],s=0;e.designCheck.length>s;s++)1==e.designCheck[s]&&(i.push(e.designList[s].file_name),n.push(e.designList[s].id));o.removeDesignImage(""+i,""+n).then(function(){e.uncheckAll(),r.resetDesignList(),e.isEditViewActive=!1,e.isUploadViewActive=!1,e.resetUploadView(),e.loadDesignsList()})}}),e.checkFileExtn=function(t){e.extnArr=[];for(var a=0;t.length>a;a++){var o=t[a],r=o.name.replace(/.*\./,"").toLowerCase();e.extnArr.push(r)}for(var i=1;e.extnArr.length>i;i++)if(e.extnArr[i]!==e.extnArr[0])return!1;return!0},e.notification=function(e,t){$(".pgn-wrapper").show(),$(".pgn-wrapper").empty(),$("#"+t).pgNotification({style:"bar",message:e,position:"center",timeout:0,type:"info"}).show(),setTimeout(function(){$(".pgn-wrapper").fadeOut("slow")},4e3)},e.upload=function(t){e.buttonStatus=!1,e.NoOfColor=!1,e.sizeStatus=!1,e.extainsionArr=[],e.base64List=[];var o=["svg","png","jpg","jpeg","bmp"],r=["png","jpg","jpeg","bmp"],n=i.translateText("no of used color");if(i.translateText("add Svg as File"),t&&t.length){if(e.uploadFileCount=t.length,t.length>1){var d=e.checkFileExtn(t);if(d)e.buttonStatus=!0,e.isUploadDesignVisible=!1,e.isUploadFileCount=!0,e.NoOfColor=!0;else{e.buttonStatus=!1,e.isUploadDesignVisible=!1,e.isUploadFileCount=!1,e.NoOfColor=!1;var c=i.translateText("same file format");e.notification(c,"upload-msg")}}else e.buttonStatus=!0,e.isUploadDesignVisible=!0,e.isUploadFileCount=!1;for(var u=0;t.length>u;u++){var g=t[u];~~(t[u].size/1024);var p=g.name.replace(/.*\./,"").toLowerCase();if(1==t.length)for(var m=0;r.length>m;m++)p==r[m]&&(e.NoOfColor=!0,e.notification(n,"upload-msg"));if(o.indexOf(p)>=0){e.showError=!1,e.extainsionArr.push(p);var f=new FileReader;f.onload=function(t){a(function(){e.uploadDesign.url=t.target.result;var a=new Image;a.src=e.uploadDesign.url,console.log(a.width),a.onload=function(){l=a.width/a.height},console.log(l),e.uploadDesign.height=0,e.uploadDesign.width=0;var o=t.target.result,r=o.indexOf("base64"),i=o.substring(r+7);if(e.base64List.push(i),"svg"==p){e.uploadDesign.svg_as_file=!1,e.sizeStatus=!0,s(atob(i));var d=e.checkSvg(i);d?(e.NoOfColor=!1,e.buttonStatus=!0):(e.NoOfColor=!0,e.buttonStatus=!0,e.notification(n,"upload-msg"))}})},f.readAsDataURL(g)}else e.isUploadDesignVisible=!1,e.showError=!0,console.log("Invalid file format")}}},e.checkSvg=function(e){var t=atob(e),a="",o=new DOMParser,r=o.parseFromString(t,"text/xml");return $(r).find("path").each(function(){a=$(this).attr("fill")}),a?!0:!1},e.getUploadFiles=function(){e.uploadFiles=[];for(var t=0;e.base64List.length>t;t++)e.uploadFiles.push({type:e.extainsionArr[t],base64:e.base64List[t]})},$(document).on("keydown",function(t){13==t.keyCode&&e.uploadDesign.name&&e.base64List&&e.uploadClipArt()}),e.uploadClipArt=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else{var t=[],a=[],i=[],s=1==e.uploadDesign.scalable?1:0;addSvgAsFile=1==e.uploadDesign.svg_as_file?1:0,e.base64List&&e.getUploadFiles(),e.getUploadTagList();for(var d=0;e.categoryElms.length>d;d++)""!=e.categoryElms[d].categoryId&&(a.push(e.categoryElms[d].categoryId),i.push(""==e.categoryElms[d].subCategoryId?0:e.categoryElms[d].subCategoryId));e.uploadDesign.name&&e.base64List&&a.length>0?(e.preloader=!1,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpload",!0),o.addDesignDetails(e.uploadDesign.name,e.uploadDesign.price,e.uploadDesign.tags,s,t,a,i,e.uploadFiles,e.uploadDesign.noColor,addSvgAsFile,e.uploadDesign.height,e.uploadDesign.width).then(function(t){e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpload",!1),"Success"==t.data.status?(r.resetDesignList(),e.resetUploadView(),e.loadDesignsList(),e.$emit(n.SHOW_NOTIFICATION,{message:"Upload successfully",type:"success"})):(e.resetUploadView(),e.$emit(n.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"}))})):e.$emit(n.SHOW_NOTIFICATION,{message:"Please Enter All the Field",type:"info"})}},e.resetUploadView=function(){e.categoryElms=[],e.uploadTags=[],e.uploadPrintType=[],e.uploadDesign={url:"",name:"",price:0,tags:"",scalable:!0,noColor:"",svg_as_file:!1,height:"",width:""},e.extainsionArr=[],e.base64List=[],e.NoOfColor=!1,e.sizeStatus=!1,e.isUploadViewActive=!1,e.uploadFileCount=0,e.isUploadFileCount=!1},e.addNewClipArt=function(){e.extainsionArr=[],e.base64List=[],e.categoryElms=[],e.uploadTags=[],e.uploadPrintType=[],e.uploadDesign={url:"",name:"",price:0,tags:"",scalable:!0,noColor:"",svg_as_file:!1,height:"",width:""},e.preloader=!0,e.uncheckAll(),e.isEditViewActive=!1,e.isUploadDesignVisible=!1,e.NoOfColor=!1,e.sizeStatus=!1,e.isUploadViewActive=!0,e.showError=!1,e.categoryElms.push({category:i.translateText("Category"),categoryId:"",subCategory:i.translateText("Sub Category"),subCategoryId:"",subCategoryList:""})},e.cancelUploadClipArt=function(){e.resetUploadView(),e.isUploadViewActive=!1},e.addUploadCategoyElm=function(){e.categoryElms.push({category:i.translateText("Category"),categoryId:"",subCategory:i.translateText("Sub Category"),subCategoryId:"",subCategoryList:""})},e.uploadCategorySelected=function(t,a){e.categoryElms[a].category=t.category_name,e.categoryElms[a].categoryId=t.id;var r=t.id;r==i.translateText("All Categories")&&(r=""),o.loadDesignSubCategories(r).then(function(t){e.categoryElms[a].subCategoryList=t.data})},e.uploadSubCategorySelected=function(t,a){e.categoryElms[a].subCategory=t.sub_category,e.categoryElms[a].subCategoryId=t.id},e.removeUploadCategoryElms=function(t){e.categoryElms.splice(t,1)},e.getUploadTagList=function(){e.uploadDesign.tags=[];for(var t=0;e.uploadTags.length>t;t++)e.uploadDesign.tags.push(e.uploadTags[t].text)},e.changeUploadScalable=function(t){e.uploadScalable=t},e.selectCategoryDefault=function(t,a){e.categoryElms[a].category=t,e.categoryElms[a].categoryId=""},e.categoryDefault=function(t,a){e.editCategoryElms[a].category=t,e.editCategoryElms[a].categoryId=""},e.selectSubCatEditDefault=function(t,a){e.editCategoryElms[a].subCategory=t,e.editCategoryElms[a].subCategoryId=""},e.selectSubCatUploadDefault=function(t,a){e.categoryElms[a].subCategory=t,e.categoryElms[a].subCategoryId=""},e.editSelectedDesign=function(){if(e.fileCount>0){e.sizeStatus=!0,e.isEditViewActive=!0,e.isUploadViewActive=!1,e.resetEditView();for(var t=0;e.designCheck.length>t;t++)if(1==e.designCheck[t])if(e.fileCount>1)e.editDesign.scalable=!0,e.editIds.push(e.designList[t].id);else if(1==e.fileCount){e.preloader=!1,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!0);var a=e.designList[t].url;d(a),isNaN(l)&&(l=1),e.editIds.push(e.designList[t].id),o.loadDesignDetails(e.designList[t].id).then(function(t){e.showDesignDetails(a,t.data)})}e.fileCount>1&&e.editMultipleDesigns()}else e.isEditViewActive=!1,console.log("No files selected")},e.checkCat=function(e){for(var t=0;e.length>t;t++)for(j=t;e[j].length>j;j++)if(e[0].length!=e[t+1].length||e[0][j].category_id!=e[t+1][j].category_id)return!1;return!0},validateSvgAsFile=function(e){for(var t=0;e.length>t;t++)if(e[0]!=e[t])return!1;return!0},e.editMultipleDesigns=function(){e.preloader=!1,e.sizeStatus=!0,e.categoryIds=[],e.printIds=[],e.tempDetails=[],e.svgAsFileArr=[];for(var t=0;e.editIds.length>t;t++)o.loadDesignDetails(e.editIds[t]).then(function(t){e.categoryIds.push(t.data.category_sub_category),e.printIds.push(t.data.print_method_id),e.tempDetails=t.data,e.svgAsFileArr.push(t.data.design_detail.is_svgasfile)});a(function(){var t=e.checkCat(e.categoryIds),r=validateSvgAsFile(e.svgAsFileArr);if(e.editDesign.svg_as_file=r?!0:!1,t)for(var s=0;e.tempDetails.category_sub_category.length>s;s++)e.tempDetails.category_sub_category[s].category_name&&null!=e.tempDetails.category_sub_category[s].category_name?o.loadDesignSubCategories(e.tempDetails.category_sub_category[s].category_id).then(function(t){e.editSubCategoryList.push(t.data),e.editSubCategoryList.length==e.tempDetails.category_sub_category.length&&(e.loadCategoryElms(e.tempDetails.category_sub_category),e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!1))}):(e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!1));else e.editCategoryElms.push({category:i.translateText("Category"),categoryId:"",subCategory:i.translateText("Sub Category"),subCategoryId:"",subCategoryList:""}),a(function(){e.preloader=!0})},7e3)},e.showDesignDetails=function(t,a){e.noOfColorView=!1,e.editDesign.url=t,e.editDesign.name=a.design_detail.design_name,e.editDesign.price=a.design_detail.price,e.editDesign.noColor=a.design_detail.no_of_colors,e.editDesign.height=a.design_detail.actual_height,e.editDesign.width=a.design_detail.actual_width,e.isSelectedDesignVisible=!0;var r=a.design_detail.file_name.replace(/.*\./,"").toLowerCase();null==a.category_sub_category[0].category_id&&e.editCategoryElms.push({category:i.translateText("Category"),categoryId:"",subCategory:i.translateText("Sub Category"),subCategoryId:"",subCategoryList:""}),"svg"!=r&&(e.noOfColorView=!0,e.sizeStatus=!1);for(var s=0;a.category_sub_category.length>s;s++)a.category_sub_category[s].category_name&&null!=a.category_sub_category[s].category_name?o.loadDesignSubCategories(a.category_sub_category[s].category_id).then(function(t){e.editSubCategoryList.push(t.data),e.editSubCategoryList.length==a.category_sub_category.length&&(e.loadCategoryElms(a.category_sub_category),e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!1))}):(e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!1));e.editDesign.scalable=1==a.design_detail.isScalable?!0:!1,e.editDesign.svg_as_file=1==a.design_detail.is_svgasfile?!0:!1;for(var d=0;a.tag.length>d;d++)e.editDesign.tags.push(a.tag[d].tag_name);e.editTags=e.editDesign.tags},e.loadCategoryElms=function(t){for(var a=0;t.length>a;a++)e.editCategoryElms.push({category:t[a].category_name,categoryId:t[a].category_id,subCategory:t[a].sub_category_name,subCategoryId:t[a].sub_category_id,subCategoryList:e.editSubCategoryList[a]})},e.editCategorySelected=function(t,a){e.editCategoryElms[a].category=t.category_name,e.editCategoryElms[a].categoryId=t.id,o.loadDesignSubCategories(t.id).then(function(t){e.editCategoryElms[a].subCategoryList=t.data,e.editCategoryElms[a].subCategory=null})},e.editSubCategorySelected=function(t,a){e.editCategoryElms[a].subCategory=t.sub_category,e.editCategoryElms[a].subCategoryId=t.id},e.addEditCategoyElm=function(){e.editCategoryElms.push({category:i.translateText("Category"),categoryId:"",subCategory:i.translateText("Sub Category"),subCategoryId:"",subCategoryList:""})},e.removeEditCategoryElms=function(t){e.editCategoryElms.splice(t,1)},e.resetEditView=function(){e.editDesign={url:"",name:"",price:0,tags:[],scalable:!1,noColor:"",svg_as_file:!1,height:"",width:""},e.editIds=[],e.editTags=[],e.editSubCategoryList=[],e.editPrintType=[],e.editCategoryElms=[],e.isSelectedDesignVisible=!1},e.saveEditClipArt=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){var t=[],a=[],i=[],s=1==e.editDesign.scalable?1:0;addSvgAsFile=1==e.editDesign.svg_as_file?1:0;for(var d=0;e.editCategoryElms.length>d;d++)""!=e.editCategoryElms[d].categoryId&&null!=e.editCategoryElms[d].categoryId&&(a.push(e.editCategoryElms[d].categoryId),i.push(""==e.editCategoryElms[d].subCategoryId||null==e.editCategoryElms[d].subCategoryId?0:e.editCategoryElms[d].subCategoryId));e.editDesign.tags=[];for(var l=0;e.editTags.length>l;l++)e.editDesign.tags.push(e.editTags[l].text);e.editDesign.name&&a.length>0?(e.preloader=!1,o.updateDesignDetails(e.editIds,e.editDesign.name,e.editDesign.price,a,i,e.editDesign.tags,s,t,e.editDesign.noColor,addSvgAsFile,e.editDesign.height,e.editDesign.width).then(function(t){e.preloader=!0,e.uncheckAll(),"Success"==t.data.status?(r.resetDesignList(),e.cancelEditClipArt(),e.loadDesignsList(),e.$emit(n.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(n.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})})):e.$emit(n.SHOW_NOTIFICATION,{message:"Please Enter All the Field",type:"info"})}else e.$emit(n.SHOW_NOTIFICATION,{message:"No file selected",type:"info"})},e.cancelEditClipArt=function(){e.resetEditView(),e.isEditViewActive=!1},e.editDesignCategory=function(){$("#designCategoryModal").modal("show"),e.resetCategoryModal()},e.resetCategoryModal=function(){e.selectedCatIndex=null,e.showCategoryClosebtn=[],e.showCategoryBadge=[],e.showSubCategoryClosebtn=[],e.showSubCategoryBadge=[],e.manageSubCategoryList=[],e.selectedCateg=""},e.addNewCategory=function(t){o.addDesignCategory(t).then(function(t){"success"==t.data.status?(e.resetCategoryModal(),e.isCategoryListUpdated=!0,o.loadDesignCategories(),e.$emit(n.SHOW_DESIGN_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(n.SHOW_DESIGN_NOTIFICATION,{message:"Design Already Exist",type:"info"})})},e.deleteDesignCategory=function(t){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(null!=t){e.catIndex=t;var a="Category Delete";e.$emit(n.DESIGN_CATEGORY_DELETE_MODAL,"Design Category",a)}else console.log("No files selected")},t.$on(n.CATEGORY_DELETE_MODAL_CONFIRM,function(t,r){a(function(){if("Design Category"==r&&null!=e.catIndex){var t=e.designCategoryList[e.catIndex].category_name;o.removeDesignCategory(t).then(function(t){t.data.status?(e.catIndex=null,e.isCategoryListUpdated=!0,o.loadDesignCategories(),e.resetCategoryModal(),e.$emit(n.SHOW_DESIGN_NOTIFICATION,{message:"Delete Successfully",type:"success"})):console.log("else __ error__ on delete")})}})}),e.loadSelectedSubCategories=function(t,a){e.selectedCatIndex=a,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnSubcategorySelect",!0),e.selectedCateg=t,e.manageSubCategoryList=[],o.loadDesignSubCategories(t.id).then(function(t){e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnSubcategorySelect",!1),e.manageSubCategoryList=t.data;for(var a=0;e.manageSubCategoryList.length>a;a++)e.manageSubCategoryList[a].type="subcat"})},e.getSubCatCurrentIndex=function(t){e.subCurrentIndex=e.manageSubCategoryList.indexOf(t)},e.getSubCatUpdateIndex=function(t){for(var a=0;e.manageSubCategoryList.length>a;a++)e.manageSubCategoryList[a].sort_order=a,e.manageSubCategoryList[a].id==t.id&&(e.subUpdateIndex=a);e.subCurrentIndex!=e.subUpdateIndex&&o.dragSubCategoryList(e.manageSubCategoryList)},e.dropSubCallback=function(e,t){return"subcat"==t.type?t:!1},e.addNewSubCategory=function(t){1==e.demoStatus?e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):""!=e.selectedCateg&&o.addDesignSubCategoryToCategory(e.selectedCateg.id,t).then(function(t){1==t.data.status?(e.loadSelectedSubCategories(e.selectedCateg,e.selectedCatIndex),e.$emit(n.SHOW_DESIGN_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(n.SHOW_DESIGN_NOTIFICATION,{message:"Adding Subcategory Failed",type:"info"})})},e.deleteDesignSubCategory=function(t){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(null!=t.id){e.subcatId=t.id;var a="SubCategory Delete";e.$emit(n.DESIGN_CATEGORY_DELETE_MODAL,"Design SubCategory",a)}else console.log("No files selected")},t.$on(n.CATEGORY_DELETE_MODAL_CONFIRM,function(t,a){"Design SubCategory"==a&&null!=e.subcatId&&o.removeDesignSubCategoryFromCategory(e.selectedCateg.id,e.subcatId).then(function(t){t.data.status?(e.loadSelectedSubCategories(e.selectedCateg,e.selectedCatIndex),e.$emit(n.SHOW_DESIGN_NOTIFICATION,{message:"Delete Successfully",type:"success"})):console.log("else __ error__ on delete")})}),"AddCliparts"==t.Id?e.addNewClipArt():"AddClipartCategory"==t.Id&&setTimeout(function(){e.editDesignCategory()},1e3),e.uploadSvgAsFile=function(t){if(t){e.uploadDesign.svg_as_file=t;var a=i.translateText("Add svg as file msg");e.notification(a,"upload-msg")}else e.uploadDesign.svg_as_file=t},e.editSvgAsFile=function(t){if(t){var a=i.translateText("Add svg as file msg");e.notification(a,"edit-msg"),e.editDesign.svg_as_file=t}else e.editDesign.svg_as_file=t},e.editCategory=function(t){e.catDetail.id=e.designCategoryList[t].id,e.catDetail.name=e.designCategoryList[t].category_name,$("#designCategoryUpdateModal").modal("show")},e.updateCategory=function(){1==e.demoStatus?e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):o.updateCategoryName(e.catDetail.id,e.catDetail.name).then(function(t){t.data.msg?($("#designCategoryUpdateModal").modal("hide"),e.$emit(n.SHOW_DESIGN_NOTIFICATION,{message:"Design Already Exist",type:"info"})):(e.resetCategoryModal(),e.isCategoryListUpdated=!0,o.loadDesignCategories(),$("#designCategoryUpdateModal").modal("hide"),e.$emit(n.SHOW_DESIGN_NOTIFICATION,{message:"Update Successfully",type:"success"}))
})},e.editSubCategory=function(t){e.subCatDetail.id=e.manageSubCategoryList[t].id,e.subCatDetail.name=e.manageSubCategoryList[t].sub_category,$("#designSubCategoryUpdateModal").modal("show")},e.updateSubCategory=function(){1==e.demoStatus?e.$emit(n.SHOW_DESIGN_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):o.updateSubCategoryName(e.designCategoryList[e.selectedCatIndex].id,e.subCatDetail.id,e.subCatDetail.name).then(function(t){t.data.msg?($("#designSubCategoryUpdateModal").modal("hide"),e.$emit(n.SHOW_DESIGN_NOTIFICATION,{message:"Adding Subcategory Failed",type:"info"})):(e.loadSelectedSubCategories(e.designCategoryList[e.selectedCatIndex],e.selectedCatIndex),$("#designSubCategoryUpdateModal").modal("hide"),e.$emit(n.SHOW_DESIGN_NOTIFICATION,{message:"Update Successfully",type:"success"}))})},e.onChangeClipArtHeightWidth=function(t,a,o){"h"==a&&"add"==o?e.uploadDesign.width=(t*l).toFixed(2):"w"==a&&"add"==o?e.uploadDesign.height=(t/l).toFixed(2):"h"==a&&"edit"==o?e.editDesign.width=(t*l).toFixed(2):"w"==a&&"edit"==o&&(e.editDesign.height=(t/l).toFixed(2))},e.openDefaultCategorySubcategoryModal=function(){e.$emit(n.DEFAULT_CATEGORY_MODAL,"DesignCategoryData",e.designCategoryList,e.designSubCategoryList,e.selectedDefaultCat,e.selectedDefaultSubCat)},t.$on(n.GET_DEFAULT_CAT_SUBCAT,function(){o.loadDefaultCatSubcat()})}]),angular.module("design").factory("DesignService",["$http","AppConfig","$rootScope","DesignModel",function(e,t,a,o){var r=t.API_KEY;return loadDesignCategories=function(){e.get(a.serviceAPI+"?reqmethod=allDesignCatagory").success(function(e){o.setDesignCategories(e)}).error(function(){console.log("error on loadDesignCategories : ",response)})},loadSubCategories=function(t){e.get(a.serviceAPI+"?reqmethod=fetchSubCategory"+"&selectedCategory="+t).success(function(e){o.setDesignSubCategories(e)}).error(function(){console.log("error on loadDesignCategories : ",response)})},loadDesigns=function(t,r,i,n,s){e.get(a.serviceAPI+"?reqmethod=fetchDesignsBySearchForAdmin&searchval="+t+"&categoryValue="+r+"&subCategoryValue="+i+"&lastLoaded="+n+"&loadCount="+s+"&randomNumber="+Math.random()).success(function(e){o.setDesignList(e)}).error(function(){console.log("error on loadDesigns : ",response)})},loadDesignDetails=function(t){var o=e.get(a.serviceAPI+"?reqmethod=getDesignDetails"+"&design_id="+t);return o},loadDesignSubCategories=function(t){var o=e.get(a.serviceAPI+"?reqmethod=fetchSubCategory"+"&selectedCategory="+t);return o},loadAllTags=function(){var t=e.get(a.serviceAPI+"?reqmethod=fetchDesignTags");return t},addDesignDetails=function(t,o,i,n,s,d,l,c,u,g,p,m){var f=$.param({apikey:r,reqmethod:"addBulkDesign",design_name:t,price:o,tags:i,isScalable:n,print_method_id:s,category_id:d,sub_category_id:l,files:c,no_of_colors:u,is_svgasfile:g,actual_height:p,actual_width:m}),h=e({method:"POST",url:a.serviceAPI,data:f,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return h},removeDesignImage=function(t,o){var i=e.get(a.serviceAPI+"?reqmethod=removeAppImage&apikey="+encodeURIComponent(r)+"&category=design"+"&name="+t+"&designIdArr="+o);return i},removeDesignId=function(t){var o=e.get(a.serviceAPI+"?reqmethod=deleteDesignById&design_id="+t);return o},getPrintMethods=function(){var t=e.get(a.serviceAPI+"?reqmethod=getAllPrintMethods&apikey="+encodeURIComponent(r));return t},updateDesignDetails=function(t,o,i,n,s,d,l,c,u,g,p,m){var f=$.param({apikey:r,reqmethod:"updateDesign",id:t,design_name:o,price:i,category_id:n,sub_category_id:s,tags:d,isScalable:l,print_method_id:c,no_of_colors:u,isSvgAsFile:g,actual_height:p,actual_width:m}),h=e({method:"POST",url:a.serviceAPI,data:f,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return h},addDesignCategory=function(t){var o=e.get(a.serviceAPI+"?reqmethod=addCategory"+"&category="+t);return o},addDesignSubCategory=function(t){var o=e.get(a.serviceAPI+"?reqmethod=addSubCategory"+"&subCategory="+t.trim());return o},removeDesignCategory=function(t){var o=e.get(a.serviceAPI+"?reqmethod=removeCategory"+"&removeCategory="+t);return o},removeDesignSubCategory=function(t){var o=e.get(a.serviceAPI+"?reqmethod=removeSubCategory"+"&removeSubCategory="+t);return o},addDesignSubCategoryToCategory=function(t,o){var r=e.get(a.serviceAPI+"?reqmethod=addSubCategoryToCategory"+"&pCategoryId="+t+"&pSubCategory="+o);return r},removeDesignSubCategoryFromCategory=function(t,o){var r=e.get(a.serviceAPI+"?reqmethod=removeSubCategoryFromCategory"+"&selectedCategoryId="+t+"&selectedSubCategoryId="+o);return r},editDesignCategory=function(t){var o=e.get(a.serviceAPI+"?reqmethod=editCategory"+"&categoryId="+t.id+"&categoryName="+t.name);return o},editDesignSubCategory=function(t){var o=e.get(a.serviceAPI+"?reqmethod=editSubCategory"+"&subCategoryId="+t.id+"&subCategory="+t.name);return o},updateCategoryName=function(t,o){var r=e.get(a.serviceAPI+"?reqmethod=updateDesignCategory"+"&id="+t+"&name="+o);return r},updateSubCategoryName=function(t,o,r){var i=e.get(a.serviceAPI+"?reqmethod=updateDesignSubCategory"+"&cid="+t+"&sid="+o+"&name="+r);return i},dragCategoryList=function(t){var o=$.param({apikey:r,reqmethod:"updateDragCategoryList",categoryData:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},dragSubCategoryList=function(t){var o=$.param({apikey:r,reqmethod:"updateDragSubCategoryList",categoryData:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},loadDefaultCatSubcat=function(){e.get(a.serviceAPI+"?reqmethod=getDefaultCatSubcat").success(function(e){o.setDefaultCatSubCat(e)}).error(function(){console.log("error on loadDefaultCatSubcat : ",response)})},{loadDesignCategories:loadDesignCategories,loadSubCategories:loadSubCategories,loadDesigns:loadDesigns,loadDesignDetails:loadDesignDetails,loadAllTags:loadAllTags,addDesignDetails:addDesignDetails,removeDesignImage:removeDesignImage,removeDesignId:removeDesignId,getPrintMethods:getPrintMethods,updateDesignDetails:updateDesignDetails,addDesignCategory:addDesignCategory,addDesignSubCategory:addDesignSubCategory,removeDesignCategory:removeDesignCategory,removeDesignSubCategory:removeDesignSubCategory,loadDesignSubCategories:loadDesignSubCategories,addDesignSubCategoryToCategory:addDesignSubCategoryToCategory,removeDesignSubCategoryFromCategory:removeDesignSubCategoryFromCategory,editDesignCategory:editDesignCategory,editDesignSubCategory:editDesignSubCategory,updateCategoryName:updateCategoryName,updateSubCategoryName:updateSubCategoryName,dragCategoryList:dragCategoryList,dragSubCategoryList:dragSubCategoryList,loadDefaultCatSubcat:loadDefaultCatSubcat}}]),angular.module("discountSlab").controller("discountSlabController",["$scope","$rootScope","$timeout","discountSlabService","translateService","MainEvent","discountSlabModel",function(e,t,a,o,r,i,n){e.discountList=[],e.preloader=!0,e.addpreloader=!0,e.isSelectedSwachVisible=!1,e.isupload=!1,e.isAddNewButton=!0,e.discountRange=10,e.isPreLoader=!1,e.discountList=[{from:1,to:10,percentage:0}],e.discount={name:""},e.editDiscount={name:""},e.init=function(){n.getDiscountLoadStatus()?(e.preloader=!1,e.discountDataList=n.getDiscountList()):e.loadDiscountList()},e.loadDiscountList=function(){var t=0;n.setStartIndex(t),o.fetchDiscountList(n.getStartIndex(),e.discountRange)},t.$on(i.DISCOUNT_LIST_LOADED,function(t,a){e.discountDataList=n.getDiscountList(),e.discountRange>a||void 0==a?(n.setLoadMoreStatus(!1),e.isLoadMore=!1):(n.setLoadMoreStatus(!0),e.isLoadMore=!0),e.preloader=!1,e.isPreLoader=!1}),e.loadMore=function(){e.preloader=!1,e.dataList=!0,e.isPreLoader=!0,n.setStartIndex(e.discountRange),o.fetchDiscountList(n.getStartIndex(),e.discountRange)},e.resetUploadView=function(){e.discountList=[{from:1,to:10,percentage:0}],e.discount={name:""}},e.addNewDiscount=function(){e.isAddViewActive=!0,e.isEditViewActive=!1,e.isSelectedSwachVisible=!1,e.discountList=[{from:1,to:10,percentage:0}],e.discount={name:""}},e.checkRange=function(){var t=e.discountList.length;if(t>0)for(var a=0;t>a;a++)if(parseInt(e.discountList[a].from)>=parseInt(e.discountList[a].to)||""==e.discountList[a].from||""==e.discountList[a].to)return!1;return!0},e.checkDiscountRange=function(){var t=e.discountList.length;if(t>0)for(var a=0;t>a;a++)for(var o=a+1;t>o;o++)if(parseInt(e.discountList[o].from)<parseInt(e.discountList[a].to)||e.discountList[a].to==e.discountList[o].from||e.discountList[a].to==e.discountList[a].from)return!1;return!0},e.saveProductDiscount=function(){if(1==e.demoStatus)e.$emit(i.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else{var t=e.checkRange(),a=e.checkDiscountRange();a&&t?(e.addpreloader=!1,o.saveDiscount(e.discount.name,e.discountList).then(function(t){"success"==t.data.status?(n.resetDiscountList(),e.loadDiscountList(),e.cancelAddDiscountView(),e.addpreloader=!0,e.$emit(i.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(i.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})})):e.$emit(i.SHOW_NOTIFICATION,{message:"Invalid Range",type:"info"})}},e.editattributevalue=function(t){e.discountList=[],e.selectedDiscountIndex=t,e.isAddViewActive=!1,e.isEditViewActive=!0,e.isAddNewButton=!1,$("html, body").animate({scrollTop:0},"slow"),e.editDiscount.name=e.discountDataList[t].discount_name,e.discountList=e.discountDataList[t].discount_range},e.updateDiscount=function(){if(1==e.demoStatus)e.$emit(i.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else{var t=e.discountDataList[e.selectedDiscountIndex].id,a=e.checkRange(),r=e.checkDiscountRange();r&&a?(e.addpreloader=!1,o.updateDiscount(t,e.editDiscount.name,e.discountList).then(function(t){"success"==t.data.status?(e.discountDataList[e.selectedDiscountIndex].discount_range=e.discountList,e.discountDataList[e.selectedDiscountIndex].discount_name=e.editDiscount.name,e.cancelAddDiscountView(),e.addpreloader=!0,e.$emit(i.SHOW_NOTIFICATION,{message:"Update Successfully",type:"success"})):e.$emit(i.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})})):e.$emit(i.SHOW_NOTIFICATION,{message:"Invalid Range",type:"info"})}},e.deleteDisount=function(t){if(1==e.demoStatus)e.$emit(i.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"info"});else{e.discountIndex=t;var a="delete discount";e.$emit(i.SHOW_WARNING_MODAL,"discountSlabs",a)}},t.$on(i.WARNING_MODAL_CONFIRM,function(t,a){if("discountSlabs"==a){var r=e.discountDataList[e.discountIndex].id;o.deleteDiscount(r).then(function(t){"success"==t.data.status?(e.cancelAddDiscountView(),e.discountDataList.splice(e.discountIndex,1),e.$emit(i.SHOW_NOTIFICATION,{message:"Delete Successfully",type:"success"})):e.$emit(i.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})})}}),e.cancelAddDiscountView=function(){e.isAddViewActive=!1,e.isEditViewActive=!1,e.isAddNewButton=!0,e.isupload=!1},e.addNewDiscountRange=function(){e.count=e.count+1;var t=10,a=0,o=0,r="0.00";e.discountList.length>0&&(a=parseInt(e.discountList.length-1),o=parseInt(e.discountList[a].to));var i={from:o+1,to:o+t,percentage:r};e.discountList.push(i)},e.removeDiscountRange=function(t){t==e.discountList.length-1&&e.discountList.length>1&&e.discountList.splice(t,1)}}]),angular.module("discountSlab").factory("discountSlabService",["$http","AppConfig","$rootScope","discountSlabModel",function(e,t,a,o){var r=t.API_KEY;return fetchDiscountList=function(t,i){e.get(a.serviceAPI+"?reqmethod=fetchDiscountData&apikey="+encodeURIComponent(r)+"&start="+t+"&count="+i).success(function(e){o.setDiscountList(e)}).error(function(){console.log("error on setDiscountList : ",response)})},saveDiscount=function(t,o){var i=$.param({apikey:r,reqmethod:"saveDiscountData",name:t,discount:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},updateDiscount=function(t,o,i){var n=$.param({apikey:r,reqmethod:"updateDiscountData",id:t,discount_name:o,discount_range:i}),s=e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s},deleteDiscount=function(t){var o=$.param({apikey:r,reqmethod:"removeDiscountData",discount_id:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},{fetchDiscountList:fetchDiscountList,saveDiscount:saveDiscount,updateDiscount:updateDiscount,deleteDiscount:deleteDiscount}}]),angular.module("distressEffect").controller("DistressController",["$scope","$rootScope","$timeout","DistressService","DistressModel","translateService","MainEvent",function(e,t,a,o,r,i,n){e.isEditViewActive=!1,e.isUploadViewActive=!1,e.isSelectedDistressVisible=!1,e.isUploadDistressVisible=!1,e.distressList=[],e.searchStr="",e.distressRange=30,e.distressCheck=[],e.fileCount=0,e.uploadName="",e.uploadDistress={id:"",name:"",url:"",price:0},e.editDistress={id:"",name:"",url:"",price:0},e.preloader=!0,e.init=function(){e.dataLoaded=!1,e.isLoadMore=r.getLoadMoreStatus(),r.getDistressLoadStatus()?(e.dataLoaded=!0,e.distressList=r.getDistressList(),0==e.distressList.length&&(e.noData=!0)):o.fetchDistress(r.getStartIndex(),e.distressRange)},t.$on(n.DISTRESS_LIST_LOADED,function(t,a){$(".gallery-box-wrap").animate({scrollTop:1e3},"slow"),e.distressList=r.getDistressList(),e.noData=!1,0==e.distressList.length&&(e.noData=!0),e.distressRange>a?(r.setLoadMoreStatus(!1),e.isLoadMore=!1):(r.setLoadMoreStatus(!0),e.isLoadMore=!0),e.isLoadMorePreloader=!1,e.dataLoaded=!0,e.dataList=!1}),e.loadDistresssList=function(){e.resetUploadView(),o.fetchDistress(r.getStartIndex(),e.distressRange)},e.loadMore=function(){e.isLoadMorePreloader=!0,r.setStartIndex(e.distressRange),e.loadDistresssList()},e.distressSelected=function(t){t?(e.fileCount++,e.fileCount==e.distressList.length&&(e.allChecked=!0)):(e.fileCount--,(0==e.fileCount||e.fileCount!=e.distressList.length)&&(e.allChecked=!1))},e.selectAllChecked=function(t){for(var a=0;e.distressList.length>a;a++)e.distressCheck[a]=t;e.fileCount=t?e.distressList.length:0},e.uncheckAll=function(){for(var t=0;e.distressList.length>t;t++)e.distressCheck[t]=!1;e.fileCount=0,e.allChecked=!1},e.deleteSelectedDistress=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){var t="disstress delete";e.$emit(n.SHOW_WARNING_MODAL,"distress",t)}else console.log("No files selected")},t.$on(n.WARNING_MODAL_CONFIRM,function(t,a){if("distress"==a){for(var i=[],s=[],d=0;e.distressCheck.length>d;d++)1==e.distressCheck[d]&&(i.push(e.distressList[d].filename),s.push(e.distressList[d].id));o.removeDistress(i,s).then(function(t){"success"==t.data.status?(e.uncheckAll(),r.resetDistressList(),e.isEditViewActive=!1,e.isUploadViewActive=!1,e.resetUploadView(),e.loadDistresssList()):e.$emit(n.SHOW_NOTIFICATION,{message:"Delete failed",type:"info"})})}}),e.browseDistress=function(t){e.extainsionArr=[],e.uploadBase64=[];var o=["png","jpg","jpeg","bmp"];if(t&&t.length){e.uploadFileCount=t.length,t.length>1?(e.isUploadDistressVisible=!1,e.isUploadFileCount=!0):(e.isUploadDistressVisible=!0,e.isUploadFileCount=!1);for(var r=0;t.length>r;r++){var i=t[r],n=i.name.replace(/.*\./,"").toLowerCase();if(o.indexOf(n)>=0){e.extainsionArr.push(n);var s=new FileReader;s.onload=function(t){a(function(){e.uploadDistress.url=t.target.result;var a=t.target.result,o=a.indexOf("base64"),r=a.substring(o+7);e.uploadBase64.push(r)})},s.readAsDataURL(i)}else console.log("Invalid file format")}}},e.getUploadFiles=function(){e.uploadFiles=[];for(var t=0;e.uploadBase64.length>t;t++)e.uploadFiles.push({type:e.extainsionArr[t],base64:e.uploadBase64[t]})},e.uploadDistressToServer=function(){1==e.demoStatus?e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):(e.getUploadFiles(),e.uploadDistress.name&&e.uploadBase64&&(e.preloader=!1,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpload",!0),o.saveDistress(e.uploadDistress.name,e.uploadFiles).then(function(t){"success"==t.data.status?(e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpload",!1),e.uncheckAll(),r.resetDistressList(),e.loadDistresssList(),e.$emit(n.SHOW_NOTIFICATION,{message:"Upload successfully",type:"success"}),e.resetUploadView()):e.$emit(n.SHOW_NOTIFICATION,{message:"Upload failed",type:"info"})})))},e.resetUploadView=function(){e.uploadDistress={id:"",name:"",url:"",price:0},e.uploadBase64="",e.isUploadViewActive=!1,e.isUploadFileCount=!1},e.addNewDistress=function(){e.resetUploadView(),e.preloader=!0,e.uncheckAll(),e.isUploadDistressVisible=!1,e.isEditViewActive=!1,e.isUploadViewActive=!0},e.cancelUploadDistress=function(){e.resetUploadView(),e.isUploadViewActive=!1,e.isUploadDistressVisible=!1},e.editSelectedDistress=function(){if(e.isUploadViewActive=!1,e.fileCount>0){e.isEditViewActive=!0;for(var t=0;e.distressCheck.length>t;t++)1==e.distressCheck[t]&&(e.fileCount>1?(e.isEditViewActive=!1,e.editMultipleDistress()):1==e.fileCount&&(e.editDistress.id=e.distressList[t].id,e.editDistress.url=e.distressList[t].url,e.editDistress.name=e.distressList[t].name,e.editDistress.price=e.distressList[t].price,e.isSelectedDistressVisible=!0))}else e.isEditViewActive=!1,e.isUploadViewActive=!1,console.log("No files selected")},e.cancelEditDistress=function(){e.isEditViewActive=!1},e.resetEditView=function(){e.editDistress={id:"",name:"",url:"",price:0}},e.editMultipleDistress=function(){console.log("Multiple files selected")},e.updateDistressDetails=function(){1==e.demoStatus?e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):e.editDistress.name&&(e.preloader=!1,o.updateDistressData(e.editDistress.id,e.editDistress.name,e.editDistress.price).then(function(t){"success"==t.data.status?(e.uncheckAll(),e.preloader=!0,r.resetDistressList(),e.isEditViewActive=!1,e.isUploadViewActive=!1,e.loadDistresssList(),e.$emit(n.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"}),e.resetEditView()):e.$emit(n.SHOW_NOTIFICATION,{message:"Update failed",type:"info"})}))},"AddDistress"==t.Id&&e.addNewDistress()}]),angular.module("mask").factory("DistressService",["$http","AppConfig","$rootScope","DistressModel",function(e,t,a,o){var r=t.API_KEY,i=function(t,i){var n=$.param({apikey:r,reqmethod:"getDistressDetails",srtIndex:t,range:i});e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){o.setDistressList(e)}).error(function(e){console.log("error on fetchDistress : ",e)})},n=function(t,o){var i=$.param({apikey:r,reqmethod:"addBulkDistress",name:t,files:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},s=function(t,o){var i=$.param({apikey:r,reqmethod:"removeDistress",fileNames:t,fileIds:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},d=function(t,o,i){var n=$.param({apikey:r,reqmethod:"updateDistressData",id:t,name:o,price:i}),s=e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s};return{fetchDistress:i,saveDistress:n,removeDistress:s,updateDistressData:d}}]),angular.module("mask").controller("MaskController",["$scope","$rootScope","$timeout","MaskService","MaskModel","translateService","MainEvent",function(e,t,a,o,r,i,n){e.isEditViewActive=!1,e.isUploadViewActive=!1,e.isSelectedMaskVisible=!1,e.isUploadMaskSvgVisible=!1,e.isUploadMaskImgVisible=!1,e.maskList=[],e.searchStr="",e.maskRange=30,e.maskCheck=[],e.fileCount=0,e.uploadName="",e.uploadMask={id:"",name:"",svgUrl:"",imgUrl:""},e.editMask={id:"",name:"",svgUrl:"",imgUrl:"",thumbImg:"",svgImg:""},e.editMaskCopy={},e.maskEditedStatus=!1,e.imageEditedStatus=!1,e.nameEditedStatus=!1,e.preloader=!0,e.isLoadMorePreloader=!1,e.showMsg=i.translateText("Invalid file format"),e.init=function(){e.dataLoaded=!1,e.isLoadMore=r.getLoadMoreStatus(),r.getMaskLoadStatus()?(e.dataLoaded=!0,e.maskList=r.getMaskList(),0==e.maskList.length&&(e.noData=!0)):o.getMaskList(e.maskRange,r.getStartIndex())},t.$on(n.MASK_LIST_LOADED,function(t,a){e.maskList=r.getMaskList(),e.noData=!1,0==e.maskList.length&&(e.noData=!0),e.addNew&&e.loadMasksList(),e.maskRange>a?(r.setLoadMoreStatus(!1),e.isLoadMore=!1):(r.setLoadMoreStatus(!0),e.isLoadMore=!0),e.isLoadMorePreloader=!1,e.dataLoaded=!0,e.dataList=!1}),e.loadMasksList=function(){e.addNew&&(r.resetMaskList(),e.resetUploadView(),e.addNew=!1),o.getMaskList(e.maskRange,r.getStartIndex())},e.loadMore=function(){e.isLoadMorePreloader=!0,r.setStartIndex(e.maskRange),e.loadMasksList()},e.maskSelected=function(t){e.actionButtonStatus=!1,t?(e.fileCount++,e.fileCount==e.maskList.length&&(e.allChecked=!0)):(e.fileCount--,(0==e.fileCount||e.fileCount!=e.maskList.length)&&(e.allChecked=!1))},e.selectAllChecked=function(t){for(var a=0;e.maskList.length>a;a++)e.maskCheck[a]=t;e.fileCount=t?e.maskList.length:0},e.uncheckAll=function(){for(var t=0;e.maskList.length>t;t++)e.maskCheck[t]=!1;e.fileCount=0},e.deleteSelectedMask=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){var t="mask delete";e.$emit(n.SHOW_WARNING_MODAL,"mask",t)}else console.log("No files selected")},t.$on(n.WARNING_MODAL_CONFIRM,function(t,a){if("mask"==a){for(var i=[],s=0;e.maskCheck.length>s;s++)1==e.maskCheck[s]&&i.push(e.maskList[s].mask_id);o.removeMaskImage(i).then(function(t){"success"==t.data.status?(e.uncheckAll(),r.resetMaskList(),e.isEditViewActive=!1,e.loadMasksList()):e.$emit(n.SHOW_NOTIFICATION,{message:"Delete failed",type:"info"})})}}),e.browseMask=function(t){var o=["svg"];if(t&&t.length){for(var r=0;t.length>r;r++)var i=t[r];var n=i.name.replace(/.*\./,"").toLowerCase();if(o.indexOf(n)>=0){e.isUploadMaskSvgVisible=!0,e.showError1=!1;var s=new FileReader;s.onload=function(t){a(function(){e.uploadMask.svgUrl=t.target.result;var a=t.target.result,o=a.indexOf("base64");e.uploadBase64Svg=a.substring(o+7),e.uploadFileExtensionSvg=n})},s.readAsDataURL(i)}else console.log("Invalid file format"),e.showError1=!0}},e.browseImage=function(t){var o=["png","jpg","jpeg","bmp"];if(t&&t.length){for(var r=0;t.length>r;r++)var i=t[r];var n=i.name.replace(/.*\./,"").toLowerCase();if(o.indexOf(n)>=0){e.isUploadMaskImgVisible=!0,e.showError2=!1;var s=new FileReader;s.onload=function(t){a(function(){e.uploadMask.imgUrl=t.target.result;var a=t.target.result,o=a.indexOf("base64");e.uploadbase64Img=a.substring(o+7),e.uploadFileExtensionImg=n})},s.readAsDataURL(i)}else console.log("Invalid file format"),e.showError2=!0}},e.getNewFileName=function(e){var t=e.lastIndexOf("."),a=e.lastIndexOf("_")+1,o=e.substring(a,t),r=parseInt(o)+1,i=e.substring(0,a)+r+e.substring(t);return i},$(document).on("keydown",function(t){13==t.keyCode&&e.uploadMask.name&&e.uploadBase64Svg&&e.uploadbase64Img&&e.uploadMaskToServer()}),e.uploadMaskToServer=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else{var t=r.getIdByTime();t+"."+e.uploadFileExtensionSvg;var a=e.uploadBase64Svg;t+"."+e.uploadFileExtensionImg;var i=e.uploadbase64Img;e.uploadMask.name&&e.uploadBase64Svg&&e.uploadbase64Img&&(e.preloader=!1,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpload",!0),o.saveMask(t,e.uploadMask.name,a,i).then(function(t){"success"==t.data.status?(e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpload",!1),e.addNew=!0,r.resetMaskList(),e.loadMasksList(),e.$emit(n.SHOW_NOTIFICATION,{message:"Upload successfully",type:"success"})):e.$emit(n.SHOW_NOTIFICATION,{message:"Upload failed",type:"info"})}))}},e.resetUploadView=function(){e.uploadMask={id:"",name:"",svgUrl:"",imgUrl:""},e.isUploadViewActive=!1},e.addNewMask=function(){e.resetUploadView(),e.preloader=!0,e.uncheckAll(),e.isEditViewActive=!1,e.isUploadMaskImgVisible=!1,e.isUploadMaskSvgVisible=!1,e.isUploadViewActive=!0,e.showError1=!1,e.showError2=!1},e.cancelUploadMask=function(){e.resetUploadView(),e.isUploadViewActive=!1},e.editSelectedMask=function(){if(e.isUploadViewActive=!1,e.showError1=!1,e.showError2=!1,e.fileCount>0){e.isEditViewActive=!0;for(var t=0;e.maskCheck.length>t;t++)1==e.maskCheck[t]&&(e.fileCount>1?e.isEditViewActive=!1:1==e.fileCount&&(e.editMask.id=e.maskList[t].mask_id,e.editMask.svgUrl=e.maskList[t].svg_imageURL,e.editMask.imgUrl=e.maskList[t].thumb_imageURL,e.editMask.thumbImg=e.maskList[t].thumb_image,e.editMask.svgImg=e.maskList[t].svg_image,e.editMask.name=e.maskList[t].name,e.isSelectedMaskVisible=!0))}else e.isEditViewActive=!1,e.isUploadViewActive=!1,console.log("No files selected");angular.copy(e.editMask,e.editMaskCopy)},e.changeMask=function(t){var o=["svg"];if(t&&t.length){for(var r=0;t.length>r;r++)var i=t[r];var n=i.name.replace(/.*\./,"").toLowerCase();if(o.indexOf(n)>=0){e.showError1=!1;var s=new FileReader;e.maskEditedStatus=!1,s.onload=function(t){a(function(){e.editMask.svgUrl=t.target.result;var a=t.target.result,o=a.indexOf("base64");e.editBase64Svg=a.substring(o+7),e.editFileExtensionSvg=n})},s.readAsDataURL(i)}else console.log("Invalid file format"),e.showError1=!0}},e.changeImage=function(t){var o=["png","jpg","jpeg","bmp"];if(t&&t.length){for(var r=0;t.length>r;r++)var i=t[r];var n=i.name.replace(/.*\./,"").toLowerCase();if(o.indexOf(n)>=0){e.showError2=!1;var s=new FileReader;e.imageEditedStatus=!0,s.onload=function(t){a(function(){e.editMask.imgUrl=t.target.result;var a=t.target.result,o=a.indexOf("base64");e.editBase64Img=a.substring(o+7),e.editFileExtensionImg=n})},s.readAsDataURL(i)}else console.log("Invalid file format"),e.showError2=!0}},e.updateMaskDetails=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else{var t=e.editMask.id,a=e.editMask.name,i=angular.equals(e.editMask,e.editMaskCopy);e.maskEditedStatus,e.imageEditedStatus;var s="",d="";s=e.editBase64Svg?e.editBase64Svg:"",d=e.editBase64Img?e.editBase64Img:"";var l=e.editMask.thumbImg,c=e.editMask.svgImg,u="",g="";g=e.getNewFileName(c),u=e.getNewFileName(l),0==i?(e.preloader=!1,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!0),o.updateDesignMask(t,a,s,g,d,u).then(function(t){"success"==t.data.status?(e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!1),e.uncheckAll(),r.resetMaskList(),e.isEditViewActive=!1,e.resetEditMask(),e.loadMasksList(),e.$emit(n.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(n.SHOW_NOTIFICATION,{message:"Update failed",type:"info"})})):e.$emit(n.SHOW_NOTIFICATION,{message:"No Data changed",type:"info"})}},e.cancelEditMask=function(){e.isEditViewActive=!1,e.resetEditMask()},e.resetEditMask=function(){e.editMask={id:"",name:"",svgUrl:"",imgUrl:"",thumbImg:"",svgImg:""}},"AddMask"==t.Id&&e.addNewMask()}]),angular.module("mask").factory("MaskService",["$http","AppConfig","$rootScope","MaskModel",function(e,t,a,o){var r=t.API_KEY,i=function(t,i){var n=$.param({apikey:r,reqmethod:"getMaskImageList",srtIndex:i,range:t});e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){o.setMaskList(e)}).error(function(e){console.log("error on getMaskList : ",e)})},n=function(t,i,n,s){var d=$.param({apikey:r,reqmethod:"saveMaskPaths",id:t,name:i,maskdata:n,thumbdata:s}),l=e({method:"POST",url:a.serviceAPI,data:d,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){o.setMaskList(e)}).error(function(e){console.log("error on getMaskList : ",e)});return l},s=function(t){var o=$.param({apikey:r,reqmethod:"removeDesignMasks",designmaskIds:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},d=function(t,o,i,n,s,d){var l=$.param({apikey:r,reqmethod:"updateMaskPaths",maskName:o,imgbase64:s,imgFileName:d,svgBase64:i,svgFileName:n,maskId:t}),c=e({method:"POST",url:a.serviceAPI,data:l,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return c};return{getMaskList:i,saveMask:n,removeMaskImage:s,updateDesignMask:d}}]),angular.module("order").controller("OrderController",["$http","$scope","$rootScope","$timeout","OrderService","OrderModel","MainEvent","translateService","DashBoardModel","$filter",function(e,t,a,o,r,i,n,s){t.switchCbx=[],t.cbxStatus=!0,t.preloader=!0,t.orderList=[],t.orderFiles=[],t.oredrRange=30,t.lastOrderId=0,t.start=0,t.range=20,t.orderIncrementId=0,t.Id=0,t.isOrderList=!1,t.isLoadMore=!0,t.loadMoreValue=0,t.isDownloadBtnEnabled=!0,t.isOrderloader=!0,t.orderWrnMsg=s.translateText("Order warning message"),t.orderCheck=[],t.isPanelHeading=!1,t.selectedStatus=[],t.data={repeatSelect:null,availableOptions:[{id:"win",name:"Windows"},{id:"osx",name:"Mac"}]},t.downloadDesktopAppBtn=!0,t.init=function(){if(t.isLoadMore=i.getLoadMoreStatus(),i.getOrderLoadStatus()){t.orderList=i.getOrderList();for(var e=0;t.orderList.length>e;e++)1==t.orderList[e].print_status?(t.selectedStatus[e]=0,"Printed"==t.orderList[e].value&&(t.switchCbx[e]=!0)):(t.selectedStatus[e]=1,"Not printed"==t.orderList[e].value&&(t.switchCbx[e]=!1));t.isOrderloader=!1,t.isOrderList=!0}else r.loadOrder(t.lastOrderId,t.start,t.range)},t.refreshOrderList=function(){$("#allChecked").prop("checked",!1);for(var e=0;t.orderList.length>e;e++)t.orderCheck[e]=!1;t.isOrderloader=!0,t.isOrderList=!1,t.isDownloadBtnEnabled=!0;var a=0,o=0;i.resetOrderList(),r.loadOrder(a,o,t.range)},a.$on(n.ORDER_LIST_LOADED,function(e,a){t.orderList=i.getOrderList(),t.isLoadMorePreloader&&$(".order-admin-box-wrap").animate({scrollTop:10*$(".order-admin-box-wrap").height()},"slow");for(var o=0;t.orderList.length>o;o++)1==t.orderList[o].print_status?(t.switchCbx[o]=!0,t.selectedStatus[o]=0,t.orderList[o].value="Printed"):(t.switchCbx[o]=!1,t.selectedStatus[o]=1,t.orderList[o].value="Not printed");t.range>a&&(i.setLoadMoreStatus(!1),t.isLoadMore=!1),t.isLoadMorePreloader=!1,t.isOrderList=!0,t.isOrderloader=!1,t.orderList.length>0&&(t.lastOrderId=t.orderList[t.orderList.length-1].order_id),t.start=t.orderList.length,5>t.start&&(t.isLoadMore=!1)}),t.loadMore=function(){t.dataLoaded=!1,t.isLoadMorePreloader=!0,r.loadOrder(t.lastOrderId,t.start,t.range)},a.$on(n.LOAD_MODULE_ON_SITEMAP_CLICK,function(e,a){"Orders"==a&&1==t.isSiteMapEnabled&&(t.isOrderList=!0)}),t.statusDetails=function(e,a,o){0==e?(t.orderList[a].value="Not printed",t.selectedStatus[a]=1,t.switchCbx[a]=!1,t.orderList[a].print_status=0):1==e&&(t.orderList[a].value="Printed",t.selectedStatus[a]=0,t.switchCbx[a]=!0,t.orderList[a].print_status=1),1==t.demoStatus?t.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):r.updateOrderStatus(o,e).then(function(){t.$emit(n.SHOW_NOTIFICATION,{message:"Status updated successfully",type:"success"})})},t.selectAllChecked=function(e){for(var a=0;t.orderList.length>a;a++)t.orderCheck[a]=e;e?(t.isDownloadBtnEnabled=!1,t.downloadBtnClass="success",t.fileCount=t.orderList.length):(t.isDownloadBtnEnabled=!0,t.downloadBtnClass="default",t.fileCount=0)},t.downLoadButtonDisabled=function(e){0==e&&$("#allChecked").prop("checked",!1),t.countChecked=[];for(var a=0,o=0;t.orderList.length>o;o++)t.orderCheck[o]&&(t.countChecked[a]=t.orderList[o].order_incremental_id,a++);t.countChecked.length>0?(t.isDownloadBtnEnabled=!1,t.downloadBtnClass="success"):(t.isDownloadBtnEnabled=!0,t.downloadBtnClass="default")},t.downLoadOrderPakage=function(){t.orderIdList=[],t.orderIncrIdList=[];for(var e=0,a=0;t.orderList.length>a;a++)t.orderCheck[a]&&(t.orderIdList[e]=t.orderList[a].order_id,t.orderIncrIdList[e]=t.orderList[a].order_incremental_id,e++);20>=t.orderIncrIdList.length?r.downloadOrdersZip(""+t.orderIdList,""+t.orderIncrIdList):t.$emit(n.SHOW_NOTIFICATION,{message:"Number of order can be download is",type:"success"})},t.getUrlForDesktopApp=function(e){r.downloadDesktopApp(e)},t.downloadDesktopApp=function(){r.downloadDesktopApp(t.data.selectedOption.id)},t.allCheckedClicked=function(e){t.orderCheck.length>0&&(t.isDownloadBtnEnabled=!1,t.downloadBtnClass="success");
for(var a=0;t.orderList.length>a;a++)t.orderCheck[a]=e}}]),angular.module("order").factory("OrderService",["$http","AppConfig","$rootScope","OrderModel",function(e,t,a,o){var r=(t.API_KEY,function(t,r,i){e.get(a.serviceAPI+"?reqmethod=getOrders&lastOrderId="+t+"&start="+r+"&range="+i).success(function(e){o.setOrderList(e)}).error(function(e){console.log("error on loadOrderList : ",e)})}),i=function(t,o){var r=e.get(a.serviceAPI+"?reqmethod=updateOrderPrintStatus&orderId="+t+"&orderStaus="+o);return r};return getPrintFormatAll=function(t){var o=e.get(a.serviceAPI+"?reqmethod=getPrintFormatAll&order_id="+t);return o},downloadOrdersZip=function(e,t){window.open(a.serviceAPI+"?reqmethod=downloadOrderZipAdmin&order_id="+e+"&increment_id="+t)},downloadDesktopApp=function(t){e.get("../version/order_app.json").success(function(e){"win"==t?window.open(e.win,"_self"):"osx"==t&&window.open(e.osx,"_self")}).error(function(e){console.log("error",e)})},{loadOrder:r,updateOrderStatus:i,getPrintFormatAll:getPrintFormatAll,downloadOrdersZip:downloadOrdersZip,downloadDesktopApp:downloadDesktopApp}}]),angular.module("palette").controller("PaletteController",["$scope","$rootScope","$timeout","PaletteService","PaletteModel","translateService","MainEvent",function(e,t,a,o,r,n,s){function d(e,t,a){0>=e&&(e=0),0>=t&&(t=0),0>=a&&(a=0),e>255&&(e=255),t>255&&(t=255),a>255&&(a=255),this.r=e,this.g=t,this.b=a}function l(e){for(var t=u(e),a=[],o=1;t.length>o;o++){a[o-1]={};for(var r=0;t[0].length>r&&t[o].length>r;r++){var i=t[0][r];a[o-1][i]=t[o][r]}}var n=JSON.stringify(a);return n.replace(/},/g,"},\r\n"),a}function u(e,t){t=t||",";for(var a=RegExp("(\\"+t+"|\\r?\\n|\\r|^)"+'(?:"([^"]*(?:""[^"]*)*)"|'+'([^"\\'+t+"\\r\\n]*))","gi"),o=[[]],r=null;r=a.exec(e);){var i=r[1];if(i.length&&i!=t&&o.push([]),r[2])var n=r[2].replace(RegExp('""',"g"),'"');else var n=r[3];o[o.length-1].push(n)}return o}e.isEditViewActive=!1,e.isUploadViewActive=!1,e.isSelectedPaletteVisible=!1,e.isUploadPaletteVisible=!1,e.paletteCategoryList=[],e.printMethodList=[],e.uploadCSVRGBFiles=[],e.paletteList=[],e.categoryElms=[],e.CSVRGB={name:"",color_code:"",category_name:"",price:""},e.uploadPrintType=[],e.editIds=[],e.editPrintType=[],e.showUploadCSV=!1,e.showUploadPattern=!1,e.isCategoryListUpdated=!1,e.colorArray=[],e.searchStr="",e.paletteRange=30,e.paletteCheck=[],e.fileCount=0,e.uploadName="",e.uploadPalette={id:"",name:"",price:"",value:"",isPattern:0,isCmyk:!1},e.editPalette={id:"",name:"",price:"",value:"",isPattern:!1},e.preloader=!0,e.catDetail={id:"",name:""},e.cmyk={c:0,m:0,y:0,k:0,hexValue:"#ffffff"},e.showUploadCMYK=!1,e.showMsg=n.translateText("Invalid file format"),e.paletteType=[{id:1,name:"CMYK",value:2},{id:2,name:"RGB",value:0},{id:3,name:"PATTERN",value:1}],e.colorChooser={Val:"#000000"},e.isLoadMorePreloader=!1,e.isRGBCSV=!0,e.isCMYKCSV=!0,e.uploadCSVCMYKFiles=[],e.init=function(){e.dataLoaded=!1,e.palettePath=t.assertsPath+"palettes/",e.isLoadMore=r.getLoadMoreStatus(),e.selectedColorType=r.getColorType().type,e.isPattern=r.getColorType().value,e.selectedCategory=r.getCategory(),e.selectedPrintMethod={name:n.translateText("All Print Methods"),id:""},o.getPrintMethods().then(function(t){for(var a=0;t.data.length>a;a++)"1"==t.data[a].is_enable&&e.printMethodList.push(t.data[a])}),r.getPaletteLoadStatus()?(e.dataLoaded=!0,e.paletteCategoryList=r.getPaletteCategories(),e.paletteList=r.getPaletteList(),0==e.paletteList.length&&(e.noData=!0),e.selectedPrintMethod=r.getSelectedPrintMethod()):o.fetchPaletteCategories()},t.$on(s.PALETTE_CATEGORIES_LOADED,function(){e.paletteCategoryList=r.getPaletteCategories(),0==e.isCategoryListUpdated?e.checkColorTypeData():e.isCategoryListUpdated=!0}),e.getCurrentIndex=function(t){e.currentIndex=e.paletteCategoryList.indexOf(t)},e.getUpdateIndex=function(t){for(var a=0;e.paletteCategoryList.length>a;a++)e.paletteCategoryList[a].sort_order=a,e.paletteCategoryList[a].id==t.id&&(e.updateIndex=a);e.currentIndex!=e.updateIndex&&o.dragCategoryList(e.paletteCategoryList)},t.$on(s.PALETTE_LIST_LOADED,function(t,a){e.uncheckAll(),e.paletteList=r.getPaletteList(),e.noData=!1,0==e.paletteList.length&&(e.noData=!0),e.paletteRange>a?(r.setLoadMoreStatus(!1),e.isLoadMore=!1):(r.setLoadMoreStatus(!0),e.isLoadMore=!0),e.isLoadMorePreloader=!1,e.dataLoaded=!0,e.dataList=!1;try{$(".palette-list").animate({scrollTop:$(".palette-list")[0].scrollHeight},800)}catch(o){}}),e.loadPalleteList=function(){o.fetchPalettes(r.getStartIndex(),e.paletteRange,e.selectedPrintMethod.id,e.selectedCategory.id,e.isPattern)},e.categorySelected=function(t){e.noData=!1,e.dataLoaded=!1,e.dataList=!0,e.selectedCategory=""==t?{category_name:n.translateText("All Categories"),id:""}:t,e.isPattern=r.getColorType().value,r.resetPaletteList(),r.setCategory(e.selectedCategory),e.loadPalleteList()},e.printTypeSelected=function(t){e.dataLoaded=!1,e.dataList=!0,e.selectedPrintMethod=""==t?{name:n.translateText("All Print Methods"),id:""}:t,r.setSelectedPrintMethod(t),r.resetPaletteList(),e.loadPalleteList()},e.loadMore=function(){e.isLoadMorePreloader=!0,r.setStartIndex(e.paletteRange),e.loadPalleteList()},e.paletteSelected=function(t){t?(e.fileCount++,e.fileCount==e.paletteList.length&&(e.allChecked=!0)):(e.fileCount--,(0==e.fileCount||e.fileCount!=e.paletteList.length)&&(e.allChecked=!1))},e.selectAllChecked=function(t){for(var a=0;e.paletteList.length>a;a++)e.paletteCheck[a]=t;e.fileCount=t?e.paletteList.length:0},e.uncheckAll=function(){for(var t=0;e.paletteList.length>t;t++)e.paletteCheck[t]=!1;e.fileCount=0,e.allChecked=!1},e.deleteSelectedPalette=function(){if(1==e.demoStatus)e.$emit(s.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){var t="palette delete";e.$emit(s.SHOW_WARNING_MODAL,"palette",t)}else console.log("No files selected")},t.$on(s.WARNING_MODAL_CONFIRM,function(t,a){if("palette"==a){for(var i=[],n=[],d=0;e.paletteCheck.length>d;d++)1==e.paletteCheck[d]&&(i.push(e.paletteList[d].id),n.push(e.paletteList[d].value));o.removePalettes(i,n).then(function(t){"success"==t.data.status?(e.uncheckAll(),r.resetPaletteList(),e.isEditViewActive=!1,e.isUploadViewActive=!1,e.resetUploadView(),e.loadPalleteList()):e.$emit(s.SHOW_NOTIFICATION,{message:"Delete failed",type:"info"})})}}),e.upload=function(t){e.uploadbase64Arr=[],e.uploadFileExtensions=[];var o=["png"];if(e.showPatternError=!1,t&&t.length){e.uploadFileCount=t.length,t.length>1?(e.showUploadPattern=!1,e.isUploadFileCount=!0):(e.showUploadPattern=!0,e.isUploadFileCount=!1);for(var r=0;t.length>r;r++){var i=t[r],n=i.name.replace(/.*\./,"").toLowerCase();if(o.indexOf(n)>=0){e.uploadFileExtensions.push(n);var s=new FileReader;s.onload=function(t){a(function(){e.uploadPalette.value=t.target.result;var a=t.target.result,o=a.indexOf("base64");e.uploadbase64=a.substring(o+7),e.uploadbase64Arr.push(e.uploadbase64)})},s.readAsDataURL(i)}else e.showPatternError=!0,e.showUploadPattern=!1,console.log("Invalid file format")}}},e.uploadCSV=function(t){e.CSVRGB={name:"",color_code:"",category_name:"",price:""},e.isRGBCSV=!0,e.colorArray=[],e.colorChooser={Val:"#000000"},e.CSVRGBArray=[];var o=["csv"];if(e.showRGBColorError=!1,t&&t.length){e.showUploadCSV=!0;for(var r=0;t.length>r;r++)var i=t[r];var n=i.name.replace(/.*\./,"").toLowerCase();if(o.indexOf(n)>=0){e.isRGBCSV=!1;var s=new FileReader;s.onload=function(t){a(function(){for(var a=l(t.target.result),o=0;a.length>o;o++)a[o].name&&a[o].color_code&&a[o].category_name&&a[o].hasOwnProperty("name")&&a[o].hasOwnProperty("color_code")&&a[o].hasOwnProperty("category_name")&&a[o].hasOwnProperty("price")&&e.CSVRGBArray.push(a[o]);0==e.CSVRGBArray&&(e.showRGBColorError=!0,e.isRGBCSV=!0)})},s.readAsText(i)}else e.isRGBCSV=!0,e.showRGBColorError=!0,console.log("Invalid file format")}},e.getUploadCSVRGBFiles=function(){for(e.uploadCSVRGBFiles=[],i=0;e.CSVRGBArray.length>i;i++)for(j=0;e.paletteCategoryList.length>j;j++)e.CSVRGBArray[i].category_name==e.paletteCategoryList[j].category_name&&e.uploadCSVRGBFiles.push({name:e.CSVRGBArray[i].name,color_code:e.CSVRGBArray[i].color_code,price:e.CSVRGBArray[i].price,category_id:e.paletteCategoryList[j].id})},e.getUploadCSVCMYKFiles=function(){for(e.uploadCSVCMYKFiles=[],i=0;e.cmykArr.length>i;i++)for(j=0;e.paletteCategoryList.length>j;j++)e.cmykArr[i].category_name==e.paletteCategoryList[j].category_name&&e.uploadCSVCMYKFiles.push({c:e.cmykArr[i].c,m:e.cmykArr[i].m,y:e.cmykArr[i].y,k:e.cmykArr[i].k,name:e.cmykArr[i].name,hexValue:e.cmykArr[i].hexValue,price:e.cmykArr[i].price,category_id:e.paletteCategoryList[j].id})},e.getUploadFiles=function(){if(e.uploadPalleteFiles=[],1==e.uploadPalette.isPattern)for(var t=0;e.uploadbase64Arr.length>t;t++)e.uploadPalleteFiles.push({type:e.uploadFileExtensions[t],base64:e.uploadbase64Arr[t]})},$(document).on("keydown",function(t){var a=e.uploadPalette.isPattern;13==t.keyCode&&e.uploadPalette.name&&selectedCatIds.length>0&&(0!=a||e.colorArray.length>0)&&(1!=a||e.uploadbase64Arr.length>0)&&e.uploadNewPaletteData()}),e.uploadNewPaletteData=function(){if(1==e.demoStatus)e.$emit(s.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else{var t=[],a=[];e.uploadbase64Arr&&e.getUploadFiles(),e.CSVRGBArray.length>0&&e.getUploadCSVRGBFiles(),e.cmykArr.length>0&&e.getUploadCSVCMYKFiles();for(var i=0;e.categoryElms.length>i;i++)""!=e.categoryElms[i].categoryId&&a.push(e.categoryElms[i].categoryId);var n=e.uploadPalette.isPattern;(e.uploadPalette.name||!e.isCMYKCSV||!e.isRGBCSV)&&(a.length>0||e.uploadCSVRGBFiles.length>0||e.uploadCSVCMYKFiles.length>0)&&(1>e.colorArray.length||e.colorArray.length>0)&&(1>e.CSVRGBArray.length||e.CSVRGBArray.length>0)&&(1>e.cmykArr.length||e.cmykArr.length>0)&&(1!=n||e.uploadbase64Arr.length>0)?(e.preloader=!1,e.$emit(s.SHOW_HIDE_PRELOADER,".loader-OnUpload",!0),o.savePaletteData(e.uploadPalette.name,e.uploadPalette.price,t,a,n,e.uploadPalleteFiles,e.colorArray,e.uploadCSVRGBFiles,e.cmykArray,e.uploadCSVCMYKFiles).then(function(t){(t.data.status="Success")?(e.isPattern=n,g(),e.preloader=!0,e.$emit(s.SHOW_HIDE_PRELOADER,".loader-OnUpload",!1),r.resetPaletteList(),e.isUploadViewActive=!1,e.isEditViewActive=!1,e.resetUploadView(),e.loadPalleteList(),e.$emit(s.SHOW_NOTIFICATION,{message:"Upload successfully",type:"success"})):e.$emit(s.SHOW_NOTIFICATION,{message:"Upload failed",type:"info"})})):1>e.uploadCSVRGBFiles.length&&e.CSVRGBArray.length>1||1>e.uploadCSVCMYKFiles.length&&e.cmykArr.length>1?(e.$emit(s.SHOW_NOTIFICATION,{message:"Categories Does Not Exist",type:"info"}),e.CSVRGBArray=[],e.cmykArr=[],e.isCMYKCSV=!0,e.isRGBCSV=!0):e.$emit(s.SHOW_NOTIFICATION,{message:"Please Enter All the Field",type:"info"})}},e.resetUploadView=function(){e.uploadbase64Arr=[],e.categoryElms=[],e.colorArray=[],e.uploadCSVRGBFiles=[],e.uploadPrintType=[],e.CSVRGBArray=[],e.cmykArr=[],e.CSVRGB={name:"",color_code:"",category_name:"",price:""},e.CSVRGBArray=[{name:"",color_code:"",category_name:"",price:""}],e.isRGBCSV=!0,e.isCMYKCSV=!0,e.showRGBColorError=!1,e.colorChooser={Val:"#000000"},e.cmykArray=[{c:0,m:0,y:0,k:0,hexValue:"#ffffff"}],e.cmyk={c:0,m:0,y:0,k:0,hexValue:"#ffffff"},e.cmykArr=[{c:0,m:0,y:0,k:0,hexValue:"#ffffff",category_name:"",price:""}],e.uploadPalette={id:"",name:"",price:"",value:"",isPattern:0},e.categoryElms.push({category:n.translateText("Category"),categoryId:""}),e.showUploadCSV=!1,e.showUploadPattern=!1,e.showPatternError=!1,e.isUploadFileCount=!1,e.showUploadCMYK=!1,e.isCmyk={csv:!0}},e.addNewPalette=function(){e.resetUploadView(),e.preloader=!0,e.uncheckAll(),e.isEditViewActive=!1,e.isUploadViewActive=!0,e.showPatternError=!1},e.cancelUploadPallete=function(){e.resetUploadView(),e.isUploadViewActive=!1,e.isEditViewActive=!1},e.addUploadCategoyElm=function(){e.categoryElms.push({category:n.translateText("Category"),categoryId:""})},e.uploadCategorySelected=function(t,a){e.categoryElms[a].category=t.category_name,e.categoryElms[a].categoryId=t.id},e.removeUploadCategoryElms=function(t){e.categoryElms.splice(t,1)},e.onColorChooserChange=function(t){e.CSVRGBArray=[],e.colorArray=[],e.colorArray.push(t),e.isRGBCSV=!0,e.showRGBColorError=!1},e.editSelectedPalette=function(){e.fileCount=0;for(var t=0;e.paletteCheck.length>t;t++)1==e.paletteCheck[t]&&e.fileCount++;if(e.fileCount>0){e.isEditViewActive=!0,e.isUploadViewActive=!1,e.resetEditView();for(var a=0;e.paletteCheck.length>a;a++)1==e.paletteCheck[a]&&(e.fileCount>1?e.editIds.push(e.paletteList[a].id):1==e.fileCount&&(e.editIds.push(e.paletteList[a].id),e.showPalleteDetails(e.paletteList[a])));e.fileCount>1&&e.editMultiplePalettes()}else e.isEditViewActive=!1,console.log("No files selected")},e.checkPaletteCat=function(e){for(var t=0;e.length>t;t++)for(j=t+1;e.length>j;j++){if(e[t].length!=e[j].length||e[t].id!=e[j].id)return!1;break}return!0},e.checkPalettePType=function(e){for(var t=0;e.length>t;t++)for(j=t+1;e.length>j;j++){if(e[t].length!=e[j].length||e[t].id!=e[j].id)return!1;break}return!0},e.editMultiplePalettes=function(){e.categoryIds=[],e.printIds=[],e.paltCategoryIds=[],e.paltPrintIds=[];for(var t=0;e.editIds.length>t;t++)for(var a=0;e.paletteList.length>a;a++)e.paletteList[a].id==e.editIds[t]&&(e.categoryIds.push(e.paletteList[a].categoryIds),e.printIds.push(e.paletteList[a].printIds));var o=e.checkPaletteCat(e.categoryIds);if(o){for(var t=0;e.editIds.length>t;t++)for(var a=0;e.paletteList.length>a;a++)e.paletteList[a].id==e.editIds[t]&&(e.paltCategoryIds=e.paletteList[a].categoryIds);e.loadCategoryElms(e.paltCategoryIds)}else e.editCategoryElms.push({category:n.translateText("Category"),categoryId:""})},e.showPalleteDetails=function(t){e.editPalette.name=t.name,e.editPalette.price=t.price,e.editPalette.value=t.value,e.editPalette.isPattern=t.is_pattern,e.isSelectedPaletteVisible=!0,e.colorPic=t.value,2==t.is_pattern&&(e.cmyk.hexValue=t.value,e.cmyk.c=t.cmyk.c,e.cmyk.m=t.cmyk.m,e.cmyk.y=t.cmyk.y,e.cmyk.k=t.cmyk.k),e.loadCategoryElms(t.categoryIds)},e.loadCategoryElms=function(t){for(var a=0;t.length>a;a++)for(var o=0;e.paletteCategoryList.length>o;o++)if(t[a]==e.paletteCategoryList[o].id){e.editCategoryElms.push({category:e.paletteCategoryList[o].category_name,categoryId:t[a]});break}},e.checkCategory=function(t){if(e.editCategoryElms.length>0){for(var a=0;e.editCategoryElms.length>a;a++)if(e.editCategoryElms[a].categoryId==t.id)return!1;return!0}},e.editCategorySelected=function(t,a){var o=e.checkCategory(t);o?(e.editCategoryElms[a].category=t.category_name,e.editCategoryElms[a].categoryId=t.id):e.editCategoryElms.splice(-1,1)},e.addEditCategoyElm=function(){e.editCategoryElms.push({category:n.translateText("Category"),categoryId:""})},e.removeEditCategoryElms=function(t){e.editCategoryElms.splice(t,1)},e.resetEditView=function(){e.editPalette={id:"",name:"",price:"",value:"",isPattern:!1},e.editIds=[],e.editCategoryElms=[],e.editPrintType=[],e.isSelectedPaletteVisible=!1},e.saveEditPaletteData=function(){if(1==e.demoStatus)e.$emit(s.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){for(var t=[],a=[],i=0;e.editCategoryElms.length>i;i++)""!=e.editCategoryElms[i].categoryId&&null!=e.editCategoryElms[i].categoryId&&t.push(e.editCategoryElms[i].categoryId);e.editPalette.name&&t.length>0?(e.preloader=!1,e.$emit(s.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!0),o.updatePaletteData(e.editIds,e.editPalette.name,e.editPalette.price,a,t,e.editPalette.value,e.editPalette.isPattern,e.cmyk).then(function(t){(t.data.status="Success")?(e.preloader=!0,e.$emit(s.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!1),e.uncheckAll(),r.resetPaletteList(),e.cancelEditPallete(),e.loadPalleteList(),e.$emit(s.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(s.SHOW_NOTIFICATION,{message:"Update failed",type:"info"})})):e.$emit(s.SHOW_NOTIFICATION,{message:"Please Enter All the Field",type:"info"})}else e.$emit(s.SHOW_NOTIFICATION,{message:"No file selected",type:"info"})},e.cancelEditPallete=function(){e.resetEditView(),e.isEditViewActive=!1,e.uncheckAll()},e.managePaletteCategory=function(){$("#paletteCategoryModal").modal("show"),e.resetCategoryModal()},e.resetCategoryModal=function(){e.showCategoryClosebtn=[],e.showCategoryBadge=[],e.selectedCateg=""},e.addNewCategory=function(t){1==e.demoStatus?e.$emit(s.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):(e.$emit(s.SHOW_HIDE_PRELOADER,".loader-OnCategoryAdd",!0),o.addPaletteCategory(t).then(function(t){"success"==t.data.status?(e.isCategoryListUpdated=!0,o.fetchPaletteCategories(),e.$emit(s.SHOW_PALETTE_NOTIFICATION,{message:"Saved successfully",type:"success"}),e.$emit(s.SHOW_HIDE_PRELOADER,".loader-OnCategoryAdd",!1)):(e.$emit(s.SHOW_PALETTE_NOTIFICATION,{message:"Adding Failed",type:"info"}),e.$emit(s.SHOW_HIDE_PRELOADER,".loader-OnCategoryAdd",!1))}))},e.deletePaletteCategory=function(t){if(1==e.demoStatus)e.$emit(s.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(0/0!=parseInt(t.id)){e.catId=t.id;var a="Category Delete";e.$emit(s.CATEGORY_DELETE_MODAL,"Palette Category",a)}else console.log("No files selected")},t.$on(s.CATEGORY_DELETE_MODAL_CONFIRM,function(t,a){"Palette Category"==a&&o.removePaletteCategory(e.catId).then(function(t){"success"==t.data.status?(e.isCategoryListUpdated=!0,o.fetchPaletteCategories(),e.$emit(s.SHOW_PALETTE_NOTIFICATION,{message:"Delete Successfully",type:"success"})):e.$emit(s.SHOW_PALETTE_NOTIFICATION,{message:"Delete failed",type:"info"})})}),"AddPalette"==t.Id?e.addNewPalette():"AddPaletteCategory"==t.Id&&setTimeout(function(){e.managePaletteCategory()},1e3),e.editCategory=function(t){e.catDetail.id=e.paletteCategoryList[t].id,e.catDetail.name=e.paletteCategoryList[t].category_name,$("#categoryUpdateModal").modal("show")},e.updateCategory=function(){1==e.demoStatus?e.$emit(s.SHOW_PALETTE_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):o.updateCategoryName(e.catDetail.id,e.catDetail.name).then(function(t){t.data.msg?($("#categoryUpdateModal").modal("hide"),e.$emit(s.SHOW_PALETTE_NOTIFICATION,{message:"Adding failed",type:"info"})):(e.isCategoryListUpdated=!0,o.fetchPaletteCategories(),$("#categoryUpdateModal").modal("hide"),e.$emit(s.SHOW_PALETTE_NOTIFICATION,{message:"Update Successfully",type:"success"}))})},e.toRGB=function(){e.showUploadCMYK=!1,e.isCmyk.csv=!0,e.cmykArray=[],e.colorArray=[];var t=_cmykToRGB(),a=dec2hex(t.r)+dec2hex(t.g)+dec2hex(t.b);e.cmyk.hexValue="#"+a,e.cmykArray.push(e.cmyk)},dec2hex=function(e){var t="00";return e>=0&&15>=e?t="0"+e.toString(16):e>=16&&255>=e&&(t=e.toString(16)),t},_cmykToRGB=function(){var t=new d(0,0,0);return c=e.cmyk.c/100,m=e.cmyk.m/100,y=e.cmyk.y/100,k=e.cmyk.k/100,t.r=1-Math.min(1,c*(1-k)+k),t.g=1-Math.min(1,m*(1-k)+k),t.b=1-Math.min(1,y*(1-k)+k),t.r=Math.round(255*t.r),t.g=Math.round(255*t.g),t.b=Math.round(255*t.b),t},e.uploadCMYK=function(t){e.cmyk={c:0,m:0,y:0,k:0,hexValue:"#ffffff"},e.colorArray=[],e.cmykArray=[],e.cmykArr=[],e.isCMYKCSV=!0;var o=["csv"];if(t&&t.length){e.showCMYKError=!1,e.showUploadCMYK=!0;for(var r=0;t.length>r;r++)var i=t[r];var n=i.name.replace(/.*\./,"").toLowerCase();if(o.indexOf(n)>=0){e.isCMYKCSV=!1;var s=new FileReader;s.onload=function(t){a(function(){var a=l(t.target.result);cmykCSVArray=a;for(var o=0;cmykCSVArray.length>o;o++)cmykCSVArray[o].name&&cmykCSVArray[o].hexValue&&cmykCSVArray[o].category_name&&cmykCSVArray[o].hasOwnProperty("name")&&cmykCSVArray[o].hasOwnProperty("c")&&cmykCSVArray[o].hasOwnProperty("m")&&cmykCSVArray[o].hasOwnProperty("y")&&cmykCSVArray[o].hasOwnProperty("k")&&cmykCSVArray[o].hasOwnProperty("hexValue")&&cmykCSVArray[o].hasOwnProperty("category_name")&&cmykCSVArray[o].hasOwnProperty("price")&&e.cmykArr.push(cmykCSVArray[o]);0==e.cmykArr&&(e.showCMYKError=!0,e.isCmyk.csv=!0,e.isCMYKCSV=!0)})},s.readAsText(i)}else e.isCMYKCSV=!0,console.log("Invalid file format")}},e.changePaletteTab=function(t){e.resetUploadView(),e.showPatternError=!1,e.showRGBColorError=!1,e.showCMYKError=!1,0==t?(e.isRGBCSV=!0,e.isCMYKCSV=!0,e.colorChooser.Val="#000000",e.uploadPalette.isPattern=0,e.showUploadCSV=!1):1==t?(e.isRGBCSV=!0,e.isCMYKCSV=!0,e.uploadPalette.isPattern=1,e.showUploadPattern=!1,e.isUploadFileCount=!1):(e.isRGBCSV=!0,e.isCMYKCSV=!0,e.uploadPalette.isPattern=2,e.showUploadCMYK=!1)},e.checkColorTypeData=function(){o.checkColorTypeData().then(function(t){if(t.data){var a=t.data;1==a[0].cmyk?(e.selectedColorType=e.paletteType[0].name,e.isPattern=2,e.loadPalleteList()):(e.selectedColorType=e.paletteType[1].name,e.isPattern=0,e.loadPalleteList())}else console.log("checkColorTypeData Error")})},e.colorTypeSelected=function(t){e.dataLoaded=!1,e.dataList=!0,e.fileCount=0,e.paletteCheck=[],e.isPattern=t.value,e.selectedColorType=t.name,r.setColorType({type:e.selectedColorType,value:t.value}),r.resetPaletteList(),e.loadPalleteList()},e.onColorUpdate=function(t){a(function(){e.editPalette.value=t})};var g=function(){e.selectedColorType=0==e.isPattern?e.paletteType[1].name:1==e.isPattern?e.paletteType[2].name:e.paletteType[0].name,r.setColorType({type:e.selectedColorType,value:e.isPattern})}}]),AppRoot.directive("numberOnly",function(){return{require:"ngModel",link:function(e,t,a,o){o.$parsers.push(function(e){if(void 0==e){var t="";return t}if(e>100){var t="100";t!=e&&(o.$setViewValue(t),o.$render())}else if(0>e&&""==e){var t="0";t!=e&&(o.$setViewValue(t),o.$render())}else if(0==parseInt(e)){var t="0";t!=e&&(o.$setViewValue(t),o.$render())}else{var t=e.replace(/[^0-9]/g,"0");t!=e&&(o.$setViewValue(t),o.$render())}return t})}}}),angular.module("palette").factory("PaletteService",["$http","AppConfig","$rootScope","PaletteModel",function(e,t,a,o){var r=t.API_KEY,i=function(t,i,n,s,d){var l=$.param({apikey:r,reqmethod:"getPatelletByCategoryAdmin",srtIndex:t,range:i,categoryId:s,is_pattern:d});e({method:"POST",url:a.serviceAPI,data:l,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){o.setPaletteList(e)}).error(function(e){console.log("error on fetchPalettes : ",e)})},n=function(t,o,i,n,s,d,l,c,u,g){var p=$.param({apikey:r,reqmethod:"addBulkPalette",name:t,price:o,print_method_id:i,category_id:n,is_pattern:s,pattern:d,color:l,csv:c,cmyk:u,csvcmyk:g}),m=e({method:"POST",url:a.serviceAPI,data:p,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return m},s=function(){var t=e.get(a.serviceAPI+"?reqmethod=getAllPrintMethods&apikey="+encodeURIComponent(r));return t},d=function(t,o,i,n,s,d,l,c){var u=$.param({apikey:r,reqmethod:"updatePaletteData",id:t,name:o,price:i,print_method_id:n,category_id:s,paletteValue:d,isPattern:l,cmyk:c}),g=e({method:"POST",url:a.serviceAPI,data:u,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return g},l=function(t,o){var i=$.param({apikey:r,reqmethod:"removePalettes",paletteIds:t,fileNames:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},c=function(){var t=$.param({apikey:r,reqmethod:"fetchPaletteCategories"});e({method:"POST",url:a.serviceAPI,data:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){o.setPaletteCategories(e)}).error(function(e){console.log("error on fetchPaletteCategories : ",e)})},u=function(t){var o=$.param({apikey:r,reqmethod:"addPaletteCategory",categoryName:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},g=function(t){var o=$.param({apikey:r,reqmethod:"editPaletteCategory",categoryId:t.id,categoryName:t.name}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},p=function(t){var o=$.param({apikey:r,reqmethod:"removePaletteCategory",categoryId:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},m=function(t,o){var i=$.param({apikey:r,reqmethod:"updatePaletteCategoryStatus",paletteCategoryId_List:t,paletteCategoryStatus_List:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},f=function(t,o){var r=e.get(a.serviceAPI+"?reqmethod=updatePaletteCatName"+"&id="+t+"&name="+o);return r},h=function(){var t=e.get(a.serviceAPI+"?reqmethod=getColorStatus&apikey="+encodeURIComponent(r));return t},C=function(t){var o=$.param({apikey:r,reqmethod:"updatePalleteDragCategoryList",categoryData:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i};return{fetchPalettes:i,savePaletteData:n,updatePaletteData:d,removePalettes:l,getPrintMethods:s,fetchPaletteCategories:c,addPaletteCategory:u,editPaletteCategory:g,removePaletteCategory:p,updatePaletteCategoryStatus:m,updateCategoryName:f,checkColorTypeData:h,dragCategoryList:C}}]),angular.module("preDecoratedProduct").controller("preDecoratedProductCtrl",["$scope","$rootScope","$timeout","translateService","MainEvent","preDecoratedProductModel","preDecoratedProductService","DashBoardModel","utilities",function(e,t,a,o,r,i,n,s,d){e.decoratedProductList=[],e.isAddViewActive=!1,e.productCategoryData=[],e.uploadCategoryType=[],e.uploadSizeType=[],e.tempCheck=[],e.dataRange=10,e.fileCount=0,e.addNewColor={visible:!0},e.isNewColor=!1;var l,c=d.getAssertPath();e.init=function(){if(e.isLoadMore=i.getLoadMoreStatus(),i.getDecoratedProductLoadStatus()){var t=i.getdecoratedProductList();e.decoratedProductList=[];for(var o=0;t.length>o;o++){var r=t[o].template_image_json[0].substring(t[o].template_image_json[0].lastIndexOf("/")+1);t[o].template_image_json[0]=t[o].template_image_json[0].substring(0,t[o].template_image_json[0].lastIndexOf("/"))+"/"+r,l=t[o].template_image_json[0].indexOf("http")>-1?t[o].template_image_json[0].match(/([^\/]+)(?=\.\w+$)/)[0]:t[o].template_image_json[0],t[o].template_image_json[0]=c+l+".png",e.decoratedProductList.push(t[o]),e.loadDesignSVGFromURL(t[o].template_image_json[0],o)}}else n.loadPreDecoratedProducts(i.getStartIndex(),e.dataRange);a(function(){e.productCategoryData=s.getProductCatList()},5e3),i.getSizeStatus()?(e.preloader=!1,e.SizeData=i.getSizeData()):(e.preloader=!0,n.getSizeData())},e.refreshList=function(){e.preloader=!0,i.resetDecoratedProductList(),i.resetStartIndex(),e.fileCount=0,e.tempCheck=[],n.loadPreDecoratedProducts(i.getStartIndex(),e.dataRange)},e.loadDesignSVGFromURL=function(e,t){void 0!=e&&$.ajax({url:e,dataType:"text",index:t,success:function(){element=angular.element('<img src="'+e+'"/>'),element.css({opacity:"1",width:"100%",height:"auto","max-height":"100%","margin-left":"0px","margin-top":"0px"}),$("#product_template_"+t).empty(),$("#product_template_"+t).append(element)},error:function(e,t,a){console.log("loadDesignSVGFromURL >> ",a)}})},t.$on(r.PREDECORATED_LIST_LOADED,function(t,a){$(".pre-product-gallery-box-wrap").animate({scrollTop:0},"slow"),e.dataRange>a?(i.setLoadMoreStatus(!1),e.isLoadMore=!1):(i.setLoadMoreStatus(!0),e.isLoadMore=!0);var o=i.getdecoratedProductList();e.decoratedProductList=[];for(var r=0;o.length>r;r++){var n=o[r].template_image_json[0].substring(o[r].template_image_json[0].lastIndexOf("/")+1);o[r].template_image_json[0]=o[r].template_image_json[0].substring(0,o[r].template_image_json[0].lastIndexOf("/"))+"/"+n,l=o[r].template_image_json[0].indexOf("http")>-1?o[r].template_image_json[0].match(/([^\/]+)(?=\.\w+$)/)[0]:o[r].template_image_json[0],o[r].template_image_json[0]=c+l+".png",e.decoratedProductList.push(o[r]),e.loadDesignSVGFromURL(o[r].template_image_json[0],r)}e.preloader=!1,e.isLoadMorePreloader=!1}),getColorByProduct=function(){i.getColorStatus()&&i.getId()==e.addProductTemp.simpleproduct_id?(e.colorData=i.getColorData(),e.colorData.length>0&&(e.selectedColor=e.colorData[0].label,e.selectedColorId=e.colorData[0].value),e.addpreloader=!0):(n.getColorData(e.addProductTemp.simpleproduct_id),i.setId(e.addProductTemp.simpleproduct_id),e.addpreloader=!1)},t.$on(r.SIZE_DATA_LOADED,function(){i.setSizeStatus(!0),e.SizeData=i.getSizeData(),e.preloader=!1}),t.$on(r.COLOR_DATA_LOADED,function(){i.setColorStatus(!0),e.colorData=i.getColorData(),e.colorData.length>0&&(e.selectedColor=e.colorData[0].label,e.selectedColorId=e.colorData[0].value),e.addpreloader=!0}),uploadVariableReset=function(){e.addProductTemp={conf_id:0,simpleproduct_id:0,product_name:"hgh",description:"",short_description:"",price:0,sku:"",qty:1,is_customized:0,images:[],cat_id:[],sizes:[],color_id:0,ref_id:0,print_method_id:0},e.uploadCategoryType=[],e.uploadSizeType=[],e.addpreloader=!0},e.pTemplateSelected=function(t){t?e.fileCount++:e.fileCount--},e.addAsProduct=function(){e.addpreloader=!1,uploadVariableReset(),e.isAddViewActive=!0;for(var t=0;e.decoratedProductList.length>t;t++)if(1==e.tempCheck[t]&&1==e.fileCount){e.addProductTemp.simpleproduct_id=e.decoratedProductList[t].product_id,e.addProductTemp.ref_id=e.decoratedProductList[t].ref_id,e.addProductTemp.print_method_id=e.decoratedProductList[t].print_method_id;var a=e.decoratedProductList[t].name;price=(parseFloat(e.decoratedProductList[t].product_price)+parseFloat(e.decoratedProductList[t].custom_price)).toFixed(2),imageUrl=e.decoratedProductList[t].template_image_json,getColorByProduct(),showProductTemplateDetails(a,price,imageUrl)}},showProductTemplateDetails=function(t,a,o){e.addProductTemp.product_name=t,e.addProductTemp.price=a,e.addProductTemp.images=o},e.saveTemplateAsProduct=function(t,a){if(1==e.demoStatus)e.$emit(r.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else{e.addProductTemp.cat_id=[],e.addProductTemp.sizes=[];for(var o=0;e.productCategoryData.length>o;o++)e.uploadCategoryType[o]&&e.addProductTemp.cat_id.push(e.productCategoryData[o].id);for(var s=0;e.SizeData.length>s;s++)e.uploadSizeType[s]&&e.addProductTemp.sizes.push(e.SizeData[s].value);e.addProductTemp.color_id=e.selectedColorId,e.isNewColor?e.addProductTemp.sizes.length>0&&e.addProductTemp.cat_id.length>0?(e.addpreloader=!1,n.uploadTemplateAsProduct(e.addProductTemp).then(function(t){t.data.conf_id?(u(t.data),e.addpreloader=!0,e.isAddViewActive=!1,e.isNewColor=!0,e.addNewColor.visible=!0,e.fileCount=0,e.tempCheck=[],e.uploadSizeType=[],i.setColorStatus(!1),e.$emit(r.SHOW_NOTIFICATION,{message:"Upload successfully",type:"success"})):(e.addpreloader=!0,e.$emit(r.SHOW_NOTIFICATION,{message:"Upload failed",type:"info"}))})):(e.addpreloader=!0,e.$emit(r.SHOW_NOTIFICATION,{message:"please fill out all required fields",type:"info"})):t.$valid?t.$valid&&a.$valid&&e.addProductTemp.sizes.length>0&&e.addProductTemp.cat_id.length>0?(e.addpreloader=!1,n.checkDuplicateSku(e.addProductTemp.sku).then(function(t){0==t.data.length?n.uploadTemplateAsProduct(e.addProductTemp).then(function(t){t.data.conf_id?(u(t.data),e.addpreloader=!0,e.isAddViewActive=!1,e.isNewColor=!0,e.addNewColor.visible=!0,e.fileCount=0,e.tempCheck=[],e.uploadSizeType=[],i.setColorStatus(!1),e.$emit(r.SHOW_NOTIFICATION,{message:"Pre decorated added",type:"success"})):(e.addpreloader=!0,e.$emit(r.SHOW_NOTIFICATION,{message:"Upload failed",type:"info"}))}):(e.addpreloader=!0,e.$emit(r.SHOW_NOTIFICATION,{message:"Sku Already Exist",type:"info"}))})):(e.addpreloader=!0,e.$emit(r.SHOW_NOTIFICATION,{message:"please fill out all required fields",type:"info"})):(e.addpreloader=!0,e.$emit(r.SHOW_NOTIFICATION,{message:"Please enter valid data",type:"info"}))}},e.cancelTemplate=function(){uploadVariableReset(),e.isAddViewActive=!1,e.isNewColor=!1,e.addNewColor.visible=!0,e.fileCount=0,e.tempCheck=[]},e.assignColor=function(t){e.selectedColor=e.colorData[t].label,e.selectedColorId=e.colorData[t].value},e.loadMore=function(){e.isLoadMorePreloader=!0,i.setStartIndex(e.dataRange),n.loadPreDecoratedProducts(i.getStartIndex(),e.dataRange)},t.$on(r.LOAD_MODULE_ON_SITEMAP_CLICK,function(t,a){"Predecorated Product"==a&&e.cancelTemplate()}),e.addNewColorVariant=function(){e.colorData.length>0?(e.selectedColor=e.colorData[0].label,e.selectedColorId=e.colorData[0].value,e.addNewColor.visible=!1):(e.cancelTemplate(),e.$emit(r.SHOW_NOTIFICATION,{message:"Color not available",type:"info"}))
};var u=function(t){if(e.addProductTemp.conf_id=t.conf_id,e.colorData.length>0)for(var a=0;t.variants.length>a;a++)for(var o=0;e.colorData.length>o;o++)e.colorData[o].value==t.variants[a].color_id&&e.colorData.splice(o,1)};e.deleteTemplate=function(){if(1==e.demoStatus)e.$emit(r.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){var t="predeco delete";e.$emit(r.SHOW_WARNING_MODAL,"predeco",t)}else console.log("No files selected")},t.$on(r.WARNING_MODAL_CONFIRM,function(t,a){if("predeco"==a){for(var o=[],s=0;e.tempCheck.length>s;s++)1==e.tempCheck[s]&&o.push(e.decoratedProductList[s].id);n.removePreDecoImage(o).then(function(t){t.data.status?(i.resetDecoratedProductList(),e.isAddViewActive=!1,e.refreshList()):e.$emit(r.SHOW_NOTIFICATION,{message:"Delete failed",type:"info"})})}})}]),angular.module("preDecoratedProduct").factory("preDecoratedProductService",["$http","AppConfig","$rootScope","preDecoratedProductModel",function(e,t,a,o){var r=t.API_KEY,i=function(t,i){e.get(a.serviceAPI+"?reqmethod=getDecoratedImage&apikey="+encodeURIComponent(r)+"&srtIndex="+t+"&range="+i).success(function(e){o.setDecoratedProduct(e.pre_decorated_product)}).error(function(){console.log("error on loadPreDecoratedProducts : ",response)})},n=function(t){var i=e.get(a.serviceAPI+"?reqmethod=getColorArr&productId="+t+"&apikey="+encodeURIComponent(r)).success(function(e){o.setColorData(e)}).error(function(e){console.log("error load color List: ",e)});return i},s=function(){var t=e.get(a.serviceAPI+"?reqmethod=getSizeArr&apikey="+encodeURIComponent(r)).success(function(e){o.setSizeData(e)}).error(function(e){console.log("error load productSize List: ",e)});return t},d=function(t){t=JSON.stringify(t),t=encodeURIComponent(t);var o=$.param({apikey:r,reqmethod:"addTemplateProducts",data:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}});return i},l=function(t){var o=$.param({apikey:r,reqmethod:"checkDuplicateSku",sku_arr:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},c=function(t){var o=$.param({apikey:r,reqmethod:"removePreDecoTemplate",ids:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i};return{loadPreDecoratedProducts:i,getColorData:n,getSizeData:s,uploadTemplateAsProduct:d,checkDuplicateSku:l,removePreDecoImage:c}}]),angular.module("printSettingWizard").controller("PrintWizardController",["$scope","$rootScope","$timeout","MainEvent","translateService","PrintWizardService","PrintWizardModel","AppModel","MainService","DashBoardModel","utilities","ProductModel",function(e,t,a,o,r,i,n,s,d,l,c,u){function g(e){var t=!0;if(1==e.is_extra_side_price){var a=e.extra_side_price;if(a)for(var o=0;a.length>o;o++)(parseInt(a[o].from)>=parseInt(a[o].to)||""==a[o].from||""==a[o].to||0==parseInt(a[o].from)||0==parseInt(a[o].from))&&(t=!1),0!=o&&(parseInt(a[o].from)<=parseInt(a[o-1].to)||parseInt(a[o].from)>=parseInt(a[o].to))&&(t=!1)}if(1==e.is_name_number_price){var r=e.name_number_price;if(r)for(var o=0;r.length>o;o++)(parseInt(r[o].from)>=parseInt(r[o].to)||""==r[o].from||r[o].to==r||0==parseInt(r[o].from)||0==parseInt(r[o].from))&&(t=!1),0!=o&&(parseInt(r[o].from)<=parseInt(r[o-1].to)||parseInt(r[o].from)>=parseInt(r[o].to))&&(t=!1)}return t}e.selectedPrintSize={type:""},e.selectedArea={type:""},e.selectedWhiteBase={type:"Fixed Cost"},e.selectedGrayScale={type:"Black and white"},e.selectedBlendType={type:"Wooden"},e.printIds=[],e.printStatus=[],e.printSettings={},e.printMethods=[],e.printMethodTabs=[],e.isPrintMethodPresent=!1,e.paletteList=[],e.selectedPaletteIndex=null,e.printSizePrice=[],e.printSizeIds=[],e.count=0,e.warningMessage="",e.showPreloader=!0,e.showSaveBtn=!1,e.uploadButton=!0,e.pricetableView={priceStatus:"0"},e.disableAll=r.translateText("Disable All"),e.printMethodPlaceHolder=r.translateText("Enter Print Method"),e.allPaletteCat=[],e.paletteCatByPrntmthd=[],e.printSettingsTemp={},e.printModuleLoad=!1,e.addPrintImageUrl="./assets/images/no-img.png",e.printProfile={name:""},e.editPrint={name:""},e.existPrintName="",e.productCatList=[],e.webFontCatList=[],e.printMethodListView=!0,e.printWizard=!1,e.nextPage="addPrintProfileView",e.selectedIndex=1,e.wizardLoader=!1,e.printTabList=[{name:"Name and Image",file:"editPrintName"},{name:"Enable Or Disable Features",file:"featureSetting"},{name:"Load Print Profile",file:"chooseProfile"},{name:"General Settings",file:"generalSetting"},{name:"Assign assets",file:"categoryList"},{name:"Color Settings",file:"colorCategory"},{name:"Price Settings",file:"costSetting"},{name:"Price Sheet",file:"priceTableSetting"}],e.selectedColor="#ffffff",e.printAreaPrice=[],e.selectedColorTableType={type:""};var p=!1,m=0,f=!1;e.numberOfColors,e.isSelectColor=!0,e.featureList=[],e.sideNamePriceDetails=[],e.extraSide={value:1},e.extraSidePrice=[],e.teamPrice=[],e.defaultExtraSidePrice=[{from:"1",to:"10",overridePrice:[{sideName:"side 1",price:"0.00"}]}],e.defaultTeamPrice=[{from:"1",to:"10",per_name:"0.00",per_number:"0.00"}],e.init=function(){try{i.getAllPrintMethods().then(function(t){t.data instanceof Array?t.data.length>0?(e.printModuleLoad=!0,e.isPrintMethodPresent=!0,e.resetPrintMethods(t.data),e.printModuleLoad=!1,e.showPreloader=!1):(e.$emit(o.SHOW_NOTIFICATION,{message:"no printmethod",type:"info"}),e.isPrintMethodPresent=!1):(e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"}),e.isPrintMethodPresent=!1)}),""!=t.Id&&(e.printModuleLoad=!1,e.showPreloader=!1,e.editSelectedPrintProfile(t.Id,t.printIndex))}catch(a){console.log("Got Service Error on Init() :: getAllPrintMethods()"+a)}},checkDuplicateName=function(){for(var t=0;e.printMethods.length>t;t++)if(e.printMethods[t].name.toUpperCase()==e.printProfile.name.toUpperCase())return!0;return!1},checkDuplicateNameUpdate=function(t){if(e.tempName==t)return!1;for(var a=0;e.printMethods.length>a;a++)if(e.printMethods[a].name.toUpperCase()==t.toUpperCase())return!0;return!1},e.addPrintProfile=function(t){e.wizardLoader=!1,e.statusMode=!0,e.selectedIndex=0,e.printWizard=!0,e.nextPage=t,e.printMethodListView=!1,e.printProfile.name="",e.addPrintImageUrl="./assets/images/no-img.png"},e.uploadPrintImage=function(t){if(e.demoStatus)e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"});else if(e.selectedIndex=null,t&&t.length)for(var r=0;t.length>r;r++){var i=t[r],n=new FileReader;n.onload=function(t){a(function(){e.addPrintImageUrl=t.target.result;var a=t.target.result.indexOf("base64");e.printImageBase64=t.target.result.substring(a+7),e.uploadButton=!1})},n.readAsDataURL(i)}},e.addNewPrintProfile=function(t){if(e.demoStatus)e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"});else try{if(e.printProfile.name){var a=checkDuplicateName(e.printProfile.name);if(a)e.$emit(o.SHOW_NOTIFICATION,{message:"Print type already exists",type:"warning"});else{e.wizardLoader=!0;var r=0;i.addnewPrintMethod(r,e.printProfile.name,e.addPrintImageUrl,"png").then(function(a){a.data instanceof Array?(e.selectedId=a.data[0].pk_id,n.setPrintSettingsById(a.data),e.selectedIndex=1,e.nextPage=t,e.newPrintName="",e.$emit(o.SHOW_NOTIFICATION,{message:"Successfully Added",type:"success"}),i.getAllPrintMethods().then(function(t){t.data&&e.resetPrintMethods(t.data)})):(e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"}))})}}else e.$emit(o.SHOW_NOTIFICATION,{message:"Enter print method name",type:"warning"})}catch(s){console.log("Got Error on addNewPrintProfile() "+s)}},e.updatePrintProfileName=function(t){if(e.demoStatus)e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"});else try{if(e.editPrint.name){var a=checkDuplicateNameUpdate(e.editPrint.name);a?e.$emit(o.SHOW_NOTIFICATION,{message:"Print type already exists",type:"warning"}):(e.wizardLoader=!0,i.addnewPrintMethod(e.selectedId,e.editPrint.name,e.printImageUrl,"png").then(function(a){n.setPrintSettingsById(a.data),a.data instanceof Array?(""!=t&&(e.selectedIndex=1,e.nextPage=t),i.getAllPrintMethods().then(function(t){t.data&&(e.resetPrintMethods(t.data),e.$emit(o.SHOW_NOTIFICATION,{message:"Successfully Added",type:"success"}))})):(e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"}))}))}else e.$emit(o.SHOW_NOTIFICATION,{message:"Enter print method name",type:"warning"})}catch(r){console.log("Got an Error on Update Print Profile"+r)}},t.$on(o.LOAD_MODULE_ON_SITEMAP_CLICK,function(t,a){"Print Settings"==a&&(e.selectedIndex=0)}),e.resetPrintMethods=function(t){e.isPrintMethodPresent=0==t.length?!1:!0,e.printMethodTabs=[],e.printMethods=t;for(var a=0;e.printMethods.length>a;a++)e.printMethods[a].status=!1,"1"==e.printMethods[a].is_enable&&(e.printMethods[a].status=!0),e.printMethodTabs.push(e.printMethods[a])},e.editSelectedPrintProfile=function(t){e.wizardLoader=!0,e.statusMode=!1,e.selectedIndex=0,e.printWizard=!0,e.nextPage="editPrintName",e.printMethodListView=!1,e.$emit(o.SELECTED_ITEM_FOR_SITEMAP,t.name),t.pk_id?e.selectedId=t.pk_id:t.id&&(e.selectedId=t.id),i.getPrintSettingsById(e.selectedId)},e.getCurrentStep=function(t){return e.selectedIndex==t?"active":""},t.$on(o.PRINT_MODEL_GET_SETTING_BY_ID,function(){if(parseInt(n.getPrintId())>0){e.noOfColors={value:""},e.colorGropList=[],e.allPrintSize=[],e.editPrint.name=n.getPrintProfileName(),e.tempName=n.getPrintProfileName(),e.wizardLoader=!1,e.selectedPrintItem=n.getPrintProfileName(),e.printImageUrl=t.assertsPath+"printmethod/"+n.getPrintImage()+c.getRandomNo(),e.printSettings=angular.copy(n.getPrintSettings()),e.printSettingsTemp=angular.copy(e.printSettings),e.text_Price=n.getTextPrice(),e.img_Upload_Price=n.getImagePrice(),e.printAreaRangeDetails=angular.copy(n.getPrintAreaRange()),e.selectedWhiteBase.type="1"==e.printAreaRangeDetails[0].wht_base.is_fixed?"Fixed Cost":"percentage";var i=angular.copy(s.getPrintSizeData());e.allPrintSize="1"==i[0].id?i:angular.copy(JSON.parse(JSON.stringify(i.reverse()))),e.PrintSizeByPrntmthd=angular.copy(n.getPrintSize()),e.colorPriceTable=angular.copy(n.getColorPriceTable()),e.allPrintPalette=angular.copy(n.getPrintPalette()),e.paletteCatByPrntmthd=angular.copy(n.getPalleteCategory()),e.productCatByPrntmthd=angular.copy(n.getProductCategory()),e.fontCatByPrntmthd=angular.copy(n.getFontCategory()),e.clipArtCatByPrntmthd=angular.copy(n.getDesignCategory()),e.templateCatByPrntmthd=angular.copy(n.getTemplateCategory()),e.patternCatByPrntmthd=angular.copy(n.getPatternCategory()),e.backgroundCatByPrntmthd=angular.copy(n.getBackgroundCategory()),e.featureList=angular.copy(s.getFeatureList()),e.printFeatureList=angular.copy(n.getPrintFeature()),e.colorGroupPrice=angular.copy(n.getColorGroupPrice()),e.extraSidePrice=angular.copy(n.getExtraSidePrice()),e.extraSidePrice&&0==e.extraSidePrice.length&&(e.extraSidePrice=e.defaultExtraSidePrice),e.extraSide.value=e.extraSidePrice[0]?e.extraSidePrice[0].overridePrice.length:1,e.teamPrice=angular.copy(n.getNameNumberPrice()),0==e.teamPrice.length&&(e.teamPrice=e.defaultTeamPrice),e.noOfColors.value=e.colorPriceTable.no_of_colors,e.colorRangeDetails=e.colorPriceTable.details,e.loadProductCategory(),e.loadFontCategory(),e.loadDesignCategory(),e.loadBackgroundCategory(),e.loadBackgroundPatternCategory(),e.loadTemplateCategory(),e.loadPaletteCat(),e.loadPrintSizeByPrintMethod(),e.loadMaxSelectColor(),e.loadSizePriceTable(),e.selectedGrayScale.type="1"==e.printSettings.is_gray_scale?"Gray scale":"Black and white",e.selectedBlendType.type="1"==e.printSettings.is_engrave?"Wooden":"Metal",e.selectedPrintSize.type="1"==e.printSettings.is_percentage?"Percentage":"Fixed Cost",e.selectedArea.type="1"==e.printSettings.is_print_area_percentage?"Variable Cost":"Fixed Cost",1==e.printSettings.is_color_chooser&&0==e.printSettings.is_used_colors&&0==e.printSettings.is_max_palettes&&0==e.printSettings.is_forcecolor?(e.FillColorVal=""==n.getTextFillColor()?"#000000":n.getTextFillColor(),e.strokeColorVal=""==n.getTextStrokeColor()?"#000000":n.getTextStrokeColor(),e.wordCloudColorVal1=""==n.getWcColor1()?"#000000":n.getWcColor1(),e.wordCloudColorVal2=""==n.getWcColor2()?"#000000":n.getWcColor2(),e.wordCloudColorVal3=""==n.getWcColor3()?"#000000":n.getWcColor3(),e.enableAllColor=!0):(e.tempFillColorVal=""==n.getTextFillColor()?"#000000":n.getTextFillColor(),e.tempStrokeColorVal=""==n.getTextStrokeColor()?"#000000":n.getTextStrokeColor(),e.tempWordCloudColorVal1=""==n.getWcColor1()?"#000000":n.getWcColor1(),e.tempWordCloudColorVal2=""==n.getWcColor2()?"#000000":n.getWcColor2(),e.tempWordCloudColorVal3=""==n.getWcColor3()?"#000000":n.getWcColor3(),e.enableAllColor=!1),e.getFeatureList(),e.AllFeature=[],e.selectedFeature=angular.copy(e.featureList),angular.forEach(e.featureList,function(t,a){e.selectedFeature[a].subtabs_list=[],angular.forEach(e.featureList[a].subtabs_list,function(o){angular.forEach(e.allowedModules,function(r){o.type==r&&1==o.status&&1==t.status&&(e.selectedFeature[a].subtabs_list.push(o),45==o.id&&(o.status="0"))})})});for(var d=0;e.selectedFeature.length>d;d++)0==e.selectedFeature[d].status&&(e.selectedFeature.splice(d,1),d--);e.loadFeatures(),a(function(){e.printSettingsTemp.printStatus=1==e.printSettings.is_default?!0:!1,0==e.printSettings.is_color_price_range&&0==e.printSettings.is_print_size?(e.pricetableView.priceStatus=2,e.selectedColorTableType.type=r.translateText("Disabled")):(e.pricetableView.priceStatus=1==e.printSettings.is_color_price_range?1:0,e.selectedColorTableType.type=1==e.printSettings.is_color_price_range?"Color Price":"Area Price")})}else e.backToPrintList(),e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})}),e.printMethodChanged=function(t,a,i){e.demoStatus?e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"}):(e.printIds=[],e.printStatus=[],p=!0,printMethodDisableStatus=a,m=i,e.warningType="disablePrintMethod",e.printIds.push(parseInt(t.id)),e.printStatus.push(1==a?"1":"0"),e.warningMessage=a?r.translateText("enable Printmethod"):r.translateText("disable Printmethod"),$("#printMethodWarningModal").modal("show"))},e.deletePrintMethod=function(t){e.demoStatus?e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"}):(f=!0,e.warningType="deletePrintMethod",e.warningMessage=r.translateText("delete Printmethod"),e.deleteId=t,$("#printMethodWarningModal").modal("show"))},e.loadPrintSizeByPrintMethod=function(){e.printSizeList=[],angular.forEach(e.allPrintSize,function(t,a){e.PrintSizeByPrntmthd.length>0?(e.printSizeList.push({id:t.id,name:t.name,percentage:0,price:"0.00"}),angular.forEach(e.PrintSizeByPrntmthd,function(o,r){t.name==o.name&&(e.printSizeList[a]={id:e.PrintSizeByPrntmthd[r].id,name:e.PrintSizeByPrntmthd[r].name,percentage:e.PrintSizeByPrntmthd[r].percentage,price:e.PrintSizeByPrntmthd[r].price})})):e.printSizeList.push({id:t.id,name:t.name,percentage:"0",price:"0.00"})})},e.updatePrintImage=function(t){if(e.demoStatus)e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"});else if(t&&t.length)for(var r=0;t.length>r;r++){var i=t[r],n=new FileReader;n.onload=function(t){a(function(){e.printImageUrl=t.target.result;var a=t.target.result.indexOf("base64");e.printImageBase64=t.target.result.substring(a+7),e.uploadButton=!1})},n.readAsDataURL(i)}},e.updatePrintStatus=function(t){e.demoStatus?e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"}):(e.defaultPrintMethodStatus=t,e.warningType="printStatus",e.defaultPrintMethodStatus?(e.warningMessage=r.translateText("make default printmethod"),$("#printMethodWarningModal").modal("show")):(e.warningMessage=r.translateText("Choose default printmethod"),$("#okWarningModal").modal("show")))},checkDefaultPrntMthd=function(e,t){for(var a=0;e.length>a;a++)if(e[a].id==t&&0==e[a].is_default)return!0;return!1},e.onWarningModalConfirm=function(){switch(e.warningType){case"printStatus":if(e.defaultPrintMethodStatus){var t=e.defaultPrintMethodStatus?1:0;i.updateDefaultPrintStatus(e.selectedId,t).then(function(t){t.data instanceof Array?(n.setPrintSettingsById(t.data),i.getAllPrintMethods().then(function(t){t.data&&e.resetPrintMethods(t.data)}),e.$emit(o.SHOW_NOTIFICATION,{message:"Status updated",type:"success"})):e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})})}else e.printSettingsTemp.printStatus=!0;break;case"deletePrintMethod":var a=checkDefaultPrntMthd(e.printMethods,e.deleteId);a?i.deletePrintMethod(e.deleteId).then(function(t){t.data instanceof Array?(e.resetPrintMethods(t.data),e.printProfile.name="",e.addPrintImageUrl="./assets/images/no-img.png",e.$emit(o.SHOW_NOTIFICATION,{message:"Delete Successfully",type:"success"})):e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})}):(e.warningMessage=r.translateText("Default profile cannot be deleted"),$("#okWarningModal").modal("show"));break;case"disablePrintMethod":e.demoStatus?e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"}):e.printIds.length>0&&i.updateMultiplePrintMethod(e.printIds,e.printStatus).then(function(t){t.data instanceof Array?(e.resetPrintMethods(t.data),e.$emit(o.SHOW_NOTIFICATION,{message:"Print Status Updated",type:"success"}),e.printIds=[],e.printStatus=[]):e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})})}},e.okWarningModalConfirm=function(){e.printSettingsTemp.printStatus=!0},e.onWarningModalCancel=function(){1!=f&&(e.printSettingsTemp.printStatus=!e.defaultPrintMethodStatus),p&&(e.printMethods[m].status=!printMethodDisableStatus)},e.usedColorForSetUpCostChanged=function(t){e.printSettings.is_no_of_used_colors=t?1:0},e.deletePrintSize=function(t){if(e.demoStatus)e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"});else{e.printSizeDeleteIndex=t;var a="printsize delete";e.$emit(o.SHOW_WARNING_MODAL,"printSettings",a)}},t.$on(o.WARNING_MODAL_CONFIRM,function(a,r){"printSettings"==r&&i.deletePrintSize(e.selectedId,e.printSizeList[e.printSizeDeleteIndex].id).then(function(a){n.setPrintSize(a.data[0].print_size),t.$emit(o.PRINT_MODEL_GET_SETTING_BY_ID),e.$emit(o.SHOW_NOTIFICATION,{message:"Deleted Successfully",type:"success"})})}),e.loadPaletteCat=function(){i.fetchPaletteCat().then(function(t){e.allPaletteCat=t.data,angular.forEach(e.allPaletteCat,function(t,a){e.paletteCatByPrntmthd.length>0?(t.status=!1,angular.forEach(e.paletteCatByPrntmthd,function(o){t.category_name==o.name&&(e.allPaletteCat[a].status=!0)})):t.status=!1}),e.palleteCategory1=[],e.palleteCategory1=e.allPaletteCat,e.paletteCategoryStatus=[];for(var a=0;e.allPaletteCat.length>a;a++)e.paletteCategoryStatus.push(e.allPaletteCat[a].status)})},e.palleteCategoryChanged=function(t,a,o){var o=e.allPaletteCat.indexOf(a);e.paletteCategoryStatus[o]=t},e.updateNoOfColors=function(t){if(parseInt(e.noOfColors.value)!=parseInt(t)){if(parseInt(t)>parseInt(e.noOfColors.value))for(var a=0;e.colorRangeDetails.length>a;a++)for(var o=0;parseInt(t)>o;o++)o>=parseInt(e.noOfColors.value)&&(0==a?e.colorRangeDetails[a].clr_price.push({price:0,perc:0,is_fixed:1}):e.colorRangeDetails[a].clr_price.push({price:0,perc:0,is_fixed:0}));else for(var r=0;parseInt(e.noOfColors.value)>r;r++)if(r>=parseInt(t))for(var i=0;e.colorRangeDetails.length>i;i++)e.colorRangeDetails[i].clr_price.splice(-1,1);e.noOfColors.value=parseInt(t)}},e.addNewColorRange=function(){e.count=e.count+1;var t=10,a=0,o=0,r=[],i={price:"0.00",perc:0,is_fixed:0};e.colorRangeDetails.length>0&&(a=parseInt(e.colorRangeDetails.length-1),o=parseInt(e.colorRangeDetails[a].to));for(var n=0;parseInt(e.noOfColors.value)>n;n++)r.push({price:"0.00",perc:0,is_fixed:0});var s={from:o+1,to:o+t,wht_base:i,clr_price:r};e.colorRangeDetails.push(s)},e.addNewExtraSidePrice=function(){var t=10,a=0,o=0,r=[];e.extraSidePrice&&e.extraSidePrice.length>0&&(a=parseInt(e.extraSidePrice.length-1),o=parseInt(e.extraSidePrice[a].to)),e.addMoreExtraSides();for(var i=0;parseInt(e.extraSide.value)>i;i++)r.push({sideName:"side "+(i+1),price:"0.00"});var n={from:o+1,to:o+t,overridePrice:r};e.extraSidePrice.push(n)},e.addNewTeamPrice=function(){var t=10,a=0,o=0;e.teamPrice&&e.teamPrice.length>0&&(a=parseInt(e.teamPrice.length-1),o=parseInt(e.teamPrice[a].to));var r={from:o+1,to:o+t,per_name:"0.00",per_number:"0.00"};e.teamPrice.push(r)},e.removeTeamPrice=function(t){t==e.teamPrice.length-1&&e.teamPrice.length>1&&e.teamPrice.splice(t,1)},e.removeExtraSidePrice=function(t){t==e.extraSidePrice.length-1&&e.extraSidePrice.length>1&&e.extraSidePrice.splice(t,1)},e.addMoreExtraSides=function(){if(e.extraSide.value&&0!=e.extraSide.value&&e.extraSidePrice.length>0)for(var t=0;e.extraSidePrice.length>t;t++){var a=e.extraSidePrice[t].overridePrice;if(a&&a.length){if(a.length>e.extraSide.value){for(;a.length>e.extraSide.value;){var o=a.length-1;a.splice(o,1)}e.extraSidePrice[t].overridePrice=a}if(a.length<e.extraSide.value){for(;a.length<e.extraSide.value;){var r=a.length;a.push({sideName:"side "+(r+1),price:"0.00"})}e.extraSidePrice[t].overridePrice=a}}}},e.removeRange=function(t){t==e.colorRangeDetails.length-1&&e.colorRangeDetails.length>1&&e.colorRangeDetails.splice(t,1)},e.showFillColorListModal=function(){e.selectedPaletteIndex=null,e.colorPicker="fill",$("#print_pallete_list_Modal").modal("show")},e.showStrokeColorListModal=function(){e.selectedPaletteIndex=null,e.colorPicker="border",$("#print_pallete_list_Modal").modal("show")},e.showWordcloud1ColorListModal=function(){e.selectedPaletteIndex=null,e.colorPicker="wc1",$("#print_pallete_list_Modal").modal("show")},e.showWordcloud2ColorListModal=function(){e.selectedPaletteIndex=null,e.colorPicker="wc2",$("#print_pallete_list_Modal").modal("show")},e.showWordcloud3ColorListModal=function(){e.selectedPaletteIndex=null,e.colorPicker="wc3",$("#print_pallete_list_Modal").modal("show")},e.selectedPalette=function(t){"fill"==e.colorPicker?e.tempFillColorVal=e.allPrintPalette[t].value:"border"==e.colorPicker?e.tempStrokeColorVal=e.allPrintPalette[t].value:"wc1"==e.colorPicker?e.tempWordCloudColorVal1=e.allPrintPalette[t].value:"wc2"==e.colorPicker?e.tempWordCloudColorVal2=e.allPrintPalette[t].value:"wc3"==e.colorPicker&&(e.tempWordCloudColorVal3=e.allPrintPalette[t].value),e.selectedPaletteIndex=t},e.showNotification=function(e,t){$("#"+e).show(),$("#"+e).empty(),$("#"+e).pgNotification({style:"bar",message:r.translateText(t),position:"center",timeout:0,type:"info"}).show()},e.changedColorChooser=function(t,a){"1"==t?(e.printSettings.is_color_chooser=1,e.showNotification(a,"show color chooser")):(e.printSettings.is_color_chooser=0,$("#"+a).empty())},e.changedGrayScaleChooser=function(t){"1"==t?(e.printSettings.is_gray_scale=1,e.selectedGrayScale.type=r.translateText("Gray scale")):(e.printSettings.is_gray_scale=0,e.selectedGrayScale.type=r.translateText("Black and white"))},e.changedForceColor=function(t,a){"1"==t?(e.printSettings.is_forcecolor=1,e.showNotification(a,"Set Force Color Enable")):(e.printSettings.is_forcecolor=0,$("#"+a).empty())},e.updateFeatures=function(t){if(e.demoStatus)e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"});else{e.wizardLoader=!0,e.featureByPrintMethod=[],e.featureSubList=[],e.featureSubTabStatus=[];for(var a=0;e.printFeatureListView.length>a;a++)for(j=0;e.printFeatureListView[a].subtabs_list.length>j;j++)e.featureSubList.push(e.printFeatureListView[a].subtabs_list[j]),e.featureSubTabStatus.push(e.printFeatureListView[a].subtabs_list[j].status);for(var a=0;e.printFeatureListView.length>a;a++)"Name & Number"==e.printFeatureListView[a].name&&(e.featureSubList.push(e.printFeatureListView[a]),e.featureSubTabStatus.push(e.printFeatureListView[a].status));angular.forEach(e.featureSubTabStatus,function(t,a){"Name & Number"!=e.featureSubList[a].name?0==t&&e.featureSubList[a]&&e.featureByPrintMethod.push({id:e.featureSubList[a].id,is_enable:0==t?"1":"0",is_name_number:0}):0==t&&e.featureSubList[a]&&e.featureByPrintMethod.push({id:e.featureSubList[a].id,is_enable:0==t?"1":"0",is_name_number:1})}),e.$emit(o.SHOW_HIDE_PRELOADER,"#print_color_category",!0),i.updateFeature(n.getPrintId(),e.featureByPrintMethod).then(function(){i.updatePrintSettings(e.printSettings,n.getPrintId(),e.text_Price).then(function(a){a.data instanceof Array?(n.setPrintSettingsById(a.data),""!=t&&(e.selectedIndex=2,e.nextPage=t),e.$emit(o.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):(e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"}))})})}},e.updateChooseProfile=function(t){e.demoStatus?e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"}):(e.wizardLoader=!0,e.printSettings.pk_id!=e.selectedId&&(e.printSettings.is_default=0),e.printSettings.pk_id=e.selectedId,i.updatePrintSettings(e.printSettings,e.selectedId,e.text_Price).then(function(a){a.data instanceof Array?(n.setPrintSettingsById(a.data),""!=t&&(e.selectedIndex=3,e.nextPage=t),e.$emit(o.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):(e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"}))}))},e.updateGeneralSetting=function(t){e.demoStatus?e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"}):e.printSettings.min_order_quantity>=1||0==e.printSettings.is_min_order?(e.wizardLoader=!0,i.updatePrintSettings(e.printSettings,e.selectedId,e.text_Price).then(function(a){a.data instanceof Array?(n.setPrintSettingsById(a.data),""!=t&&(e.selectedIndex=4,e.nextPage=t),e.$emit(o.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):(e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"}))})):e.$emit(o.SHOW_NOTIFICATION,{message:"Minimum Order quantity Can not be Zero",type:"info"})},e.updateCategory=function(t){e.demoStatus?e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"}):(e.wizardLoader=!0,e.productCatByPMethod=[],angular.forEach(e.productCategoryStatus,function(t,a){1==t&&e.productCatList[a]&&e.productCatByPMethod.push({id:e.productCatList[a].id,is_enable:1==t?"0":"1"})}),e.fontCatByPMethod=[],angular.forEach(e.fontCategoryStatus,function(t,a){1==t&&e.webFontCatList[a]&&e.fontCatByPMethod.push({id:e.webFontCatList[a].id,is_enable:1==t?"0":"1"})}),e.designCatByPMethod=[],angular.forEach(e.clipArtCategoryStatus,function(t,a){1==t&&e.clipArtCatList[a]&&e.designCatByPMethod.push({id:e.clipArtCatList[a].id,is_enable:1==t?"0":"1"})}),e.paletteCategoryList=[],angular.forEach(e.paletteCategoryStatus,function(t,a){1==t&&e.allPaletteCat[a]&&e.paletteCategoryList.push({pk_id:e.allPaletteCat[a].id,is_enable:1==t?"0":"1"})}),e.templateByPMethod=[],angular.forEach(e.templateCategoryStatus,function(t,a){1==t&&e.templateCatList[a]&&e.templateByPMethod.push({id:e.templateCatList[a].id,is_enable:1==t?"0":"1"})}),e.backgroundByPMethod=[],angular.forEach(e.backgroundCategoryStatus,function(t,a){1==t&&e.backgroundCatList[a]&&e.backgroundByPMethod.push({id:e.backgroundCatList[a].id,is_enable:1==t?"0":"1"})}),e.backgroundPatternByPMethod=[],angular.forEach(e.backgroundPatternCategoryStatus,function(t,a){1==t&&e.backgroundPatternCatList[a]&&e.backgroundPatternByPMethod.push({id:e.backgroundPatternCatList[a].id,is_enable:1==t?"0":"1"})}),e.paletteCategoryList.length>0&&e.fontCatByPMethod.length>0&&e.designCatByPMethod.length>0&&e.templateByPMethod.length>0&&e.backgroundByPMethod.length>0&&e.backgroundPatternByPMethod.length>0?i.updateCategoryToPrintMethod(e.selectedId,e.productCatByPMethod,e.paletteCategoryList,e.fontCatByPMethod,e.designCatByPMethod,e.templateByPMethod,e.backgroundByPMethod,e.backgroundPatternByPMethod).then(function(a){a.data instanceof Array?(n.setPrintSettingsById(a.data),""!=t&&(e.selectedIndex=5,e.nextPage=t),e.$emit(o.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):(e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"}))}):(e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Please select at least one category",type:"info"})))},e.updateColor=function(t){e.demoStatus?e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"}):(e.getCurrentTextColor(),e.wizardLoader=!0,e.paletteCategoryList=[],angular.forEach(e.paletteCategoryStatus,function(t,a){1==t&&e.allPaletteCat[a]&&e.paletteCategoryList.push({pk_id:e.allPaletteCat[a].id,is_enable:1==t?"0":"1"})}),i.updatePrintSettings(e.printSettings,e.selectedId,e.text_Price).then(function(){i.updateTextSetting(e.selectedId,e.sColor,e.fColor,e.wColor1,e.wColor2,e.wColor3).then(function(a){a.data instanceof Array?(n.setPrintSettingsById(a.data),""!=t&&(e.selectedIndex=6,e.nextPage=t),e.$emit(o.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):(e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"}))})}))},e.updateCostSetting=function(t){e.demoStatus?e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"}):parseInt(e.text_Price.allowded_lines)>0&&parseInt(e.text_Price.allowded_lines)==e.text_Price.line_price.length&&1==e.printSettings.is_multiline_text_price||0==e.printSettings.is_multiline_text_price?(parseInt(e.img_Upload_Price.allowed_sides)>0&&parseInt(e.img_Upload_Price.allowed_sides)==e.img_Upload_Price.image_price.length&&1==e.printSettings.is_calulate_multiple_side||0==e.printSettings.is_calulate_multiple_side)&&(e.wizardLoader=!0,i.updatePrintSettings(e.printSettings,e.selectedId,e.text_Price,e.img_Upload_Price).then(function(a){a.data instanceof Array?(n.setPrintSettingsById(a.data),""!=t&&(e.selectedIndex=7,e.nextPage=t),e.$emit(o.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):(e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"}))})):e.$emit(o.SHOW_NOTIFICATION,{message:"Allow line Should not be Zero",type:"info"})},e.backPrintSettings=function(t){e.nextPage=e.printTabList[t-1].file,e.selectedIndex=t-1},e.goToStep=function(t){e.statusMode||(e.selectedIndex=t,e.nextPage=e.printTabList[t].file)},e.skipPrintSetting=function(t){e.printTabList.length-1!=t?(e.nextPage=e.printTabList[t+1].file,e.selectedIndex=t+1):(e.printWizard=!1,e.printMethodListView=!0)},e.setAllColor=function(t){t?(e.enableAllColor=!0,e.printSettings.is_used_colors=0,e.printSettings.is_color_chooser=1,e.printSettings.is_max_palettes=0,e.printSettings.is_forcecolor=0):(e.enableAllColor=!1,e.printSettings.is_used_colors=1,e.printSettings.is_color_chooser=0,e.printSettings.is_max_palettes=1,e.printSettings.is_forcecolor=1)},e.getCurrentTextColor=function(){e.enableAllColor?(e.fColor=e.FillColorVal,e.sColor=e.strokeColorVal,e.wColor1=e.wordCloudColorVal1,e.wColor2=e.wordCloudColorVal2,e.wColor3=e.wordCloudColorVal3):(e.fColor=e.tempFillColorVal,e.sColor=e.tempStrokeColorVal,e.wColor1=e.tempWordCloudColorVal1,e.wColor2=e.tempWordCloudColorVal2,e.wColor3=e.tempWordCloudColorVal3)},e.loadFeatures=function(){angular.forEach(e.selectedFeature,function(t,a){e.printFeatureList.length>0&&angular.forEach(e.printFeatureList,function(o,r){t.name==o.name&&(t.status=o.status,angular.forEach(e.selectedFeature[a].subtabs_list,function(t,o){angular.forEach(e.printFeatureList[r].subtabs_list,function(i){t.id==i.id&&(e.selectedFeature[a].subtabs_list[o].status=0),e.printFeatureList[r].subtabs_list.length==e.selectedFeature[a].subtabs_list.length&&0==e.selectedFeature[a].subtabs_list[o].status?e.selectedFeature[a].status=0:e.printFeatureList[r].subtabs_list.length<e.selectedFeature[a].subtabs_list.length&&1==e.selectedFeature[a].subtabs_list[o].status&&(e.selectedFeature[a].status=1),"22"==i.id&&1==e.selectedFeature[a].status&&"45"==t.id&&(t.status=1)})}))})}),e.printFeatureListView=[],e.printFeatureListView=e.selectedFeature,e.printFeatureStatus=[]},e.changedPrintFeaturesTab=function(t,a,o){e.printFeatureSubList=[],e.printFeatureListView[o].status=t?!0:!1,a.status=1==e.printFeatureListView[o].status?1:0,angular.forEach(e.printFeatureListView[o].subtabs_list,function(t){t.status=1==e.printFeatureListView[o].status&&45==t.id?"0":e.printFeatureListView[o].status
})},e.changedPrintFeaturesSubTab=function(t,a,o,r){var i,n;a.status=t?1:0;for(var s=0,d=0;r.length>d;d++)r[d].status||s++;if(e.printFeatureListView[o].status=s==r.length?0:1,"Reduce Color"==a.name?i=a:"Select Color"==a.name&&(n=a),"Select Color"==a.name&&1==t)for(var d=0;e.printFeatureListView[o].subtabs_list.length>d;d++)"Reduce Color"==e.printFeatureListView[o].subtabs_list[d].name&&(e.printFeatureListView[o].subtabs_list[d].status=0);else if("Select Color"==a.name&&0==t){for(var d=0;e.printFeatureListView[o].subtabs_list.length>d;d++)"Reduce Color"==e.printFeatureListView[o].subtabs_list[d].name&&(e.printFeatureListView[o].subtabs_list[d].status=1);e.isMaxNumberColor=!1}else if("Reduce Color"==a.name&&1==t){for(var d=0;e.printFeatureListView[o].subtabs_list.length>d;d++)"Select Color"==e.printFeatureListView[o].subtabs_list[d].name&&(e.printFeatureListView[o].subtabs_list[d].status=0);e.isMaxNumberColor=!1}else if("Reduce Color"==a.name&&0==t)for(var d=0;e.printFeatureListView[o].subtabs_list.length>d;d++)"Select Color"==e.printFeatureListView[o].subtabs_list[d].name&&(e.printFeatureListView[o].subtabs_list[d].status=1)},e.getFeatureList=function(){for(var a=d.getrevdata(t.license_key),o="AAIfFAUTBFwAHBEZHiQVCARcAAIfFAUTBDMRHgYRA1wUFQMZFx5cExECBFwZHREXFTUUGQRcHQk5HREXFQ==",r=a.split("|"),i=r[0].split(","),n=d.getrevdata(o),s=0;i.length>s;s++){if(-1!=window.location.hostname.search(i[s])&&-1!=document.URL.search(i[s])){e.allowedModules=r[2].split(",");break}e.allowedModules=n.split(",")}},e.loadProductCategory=function(){if(e.productCatList=l.getProductCatList(),e.productCatList.length>0){for(var t=0;e.productCatList.length>t;t++)if(e.productCatByPrntmthd.length>0){e.productCatList[t].status=!1;for(var a=0;e.productCatByPrntmthd.length>a;a++)e.productCatList[t].id==e.productCatByPrntmthd[a].product_category_id&&(e.productCatList[t].status=!0)}else e.productCatList[t].status=!1;e.productCategory1=[],e.productCategory1=e.productCatList,e.productCategoryStatus=[];for(var t=0;e.productCatList.length>t;t++)e.productCategoryStatus.push(e.productCatList[t].status)}},e.productCategoryChanged=function(t,a,o){var o=e.productCatList.indexOf(a);e.productCategoryStatus[o]=t},e.loadFontCategory=function(){i.loadWebfontsCategories().then(function(t){e.webFontCatList=t.data,angular.forEach(e.webFontCatList,function(t,a){e.fontCatByPrntmthd.length>0?(t.status=!1,angular.forEach(e.fontCatByPrntmthd,function(o){t.id==o.font_category_id&&(e.webFontCatList[a].status=!0)})):t.status=!1}),e.fontCategory1=[],e.fontCategory1=e.webFontCatList,e.fontCategoryStatus=[];for(var a=0;e.webFontCatList.length>a;a++)e.fontCategoryStatus.push(e.webFontCatList[a].status)})},e.webFontCategoryChanged=function(t,a,o){var o=e.webFontCatList.indexOf(a);e.fontCategoryStatus[o]=t},e.loadDesignCategory=function(){i.loadDesignCategories().then(function(t){e.clipArtCatList=t.data,angular.forEach(e.clipArtCatList,function(t,a){e.clipArtCatByPrntmthd.length>0?(t.status=!1,angular.forEach(e.clipArtCatByPrntmthd,function(o){t.id==o.design_category_id&&(e.clipArtCatList[a].status=!0)})):t.status=!1}),e.clipArtCategory1=[],e.clipArtCategory1=e.clipArtCatList,e.clipArtCategoryStatus=[];for(var a=0;e.clipArtCatList.length>a;a++)e.clipArtCategoryStatus.push(e.clipArtCatList[a].status)})},e.designCategoryChanged=function(t,a,o){var o=e.clipArtCatList.indexOf(a);e.clipArtCategoryStatus[o]=t},e.loadTemplateCategory=function(){i.loadTemplateCategories().then(function(t){e.templateCatList=t.data,angular.forEach(e.templateCatList,function(t,a){e.templateCatByPrntmthd.length>0?(t.status=!1,angular.forEach(e.templateCatByPrntmthd,function(o){t.id==o.template_category_id&&(e.templateCatList[a].status=!0)})):t.status=!1}),e.templateCategory1=[],e.templateCategory1=e.templateCatList,e.templateCategoryStatus=[];for(var a=0;e.templateCatList.length>a;a++)e.templateCategoryStatus.push(e.templateCatList[a].status)})},e.templateCategoryChanged=function(t,a,o){var o=e.templateCatList.indexOf(a);e.templateCategoryStatus[o]=t},e.loadBackgroundCategory=function(){i.loadBackgroundCategories().then(function(t){e.backgroundCatList=t.data,angular.forEach(e.backgroundCatList,function(t,a){e.backgroundCatByPrntmthd.length>0?(t.status=!1,angular.forEach(e.backgroundCatByPrntmthd,function(o){t.id==o.background_category_id&&(e.backgroundCatList[a].status=!0)})):t.status=!1}),e.backgroundCategory1=[],e.backgroundCategory1=e.backgroundCatList,e.backgroundCategoryStatus=[];for(var a=0;e.backgroundCatList.length>a;a++)e.backgroundCategoryStatus.push(e.backgroundCatList[a].status)})},e.backgroundCategoryChanged=function(t,a,o){var o=e.backgroundCatList.indexOf(a);e.backgroundCategoryStatus[o]=t},e.loadBackgroundPatternCategory=function(){i.loadBackgroundPatternCategories().then(function(t){e.backgroundPatternCatList=t.data,angular.forEach(e.backgroundPatternCatList,function(t,a){e.patternCatByPrntmthd.length>0?(t.status=!1,angular.forEach(e.patternCatByPrntmthd,function(o){t.id==o.pattern_category_id&&(e.backgroundPatternCatList[a].status=!0)})):t.status=!1}),e.backgroundPatternCategory1=[],e.backgroundPatternCategory1=e.backgroundPatternCatList,e.backgroundPatternCategoryStatus=[];for(var a=0;e.backgroundPatternCatList.length>a;a++)e.backgroundPatternCategoryStatus.push(e.backgroundPatternCatList[a].status)})},e.backgroundPatternCategoryChanged=function(t,a,o){var o=e.backgroundPatternCatList.indexOf(a);e.backgroundPatternCategoryStatus[o]=t},e.onStrokeColorChange=function(t){e.strokeColor="",e.strokeColorVal=t},e.onFillColorChange=function(t){e.FillColorVal="",e.FillColorVal=t},e.onWordCloudColorVal1Change=function(t){e.wordCloudColorVal1="",e.wordCloudColorVal1=t},e.onWordCloudColorVal2Change=function(t){e.wordCloudColorVal2="",e.wordCloudColorVal2=t},e.onWordCloudColorVal3Change=function(t){e.wordCloudColorVal3="",e.wordCloudColorVal3=t},e.selectedPrintProfile=function(t){e.selectedPrintItem=e.printMethodTabs[t].name,e.printMethodTabs[t].pk_id?e.selectedPId=e.printMethodTabs[t].pk_id:e.printMethodTabs[t].id&&(e.selectedPId=e.printMethodTabs[t].id),i.getPrintSettingsById(e.selectedPId)},e.backToPrintList=function(){e.$emit(o.SELECTED_ITEM_FOR_SITEMAP,""),e.printWizard=!1,e.printMethodListView=!0},t.$on(o.LOAD_MODULE_ON_SITEMAP_CLICK,function(t,a){"Print Profile"==a&&(e.printWizard=!1,e.printMethodListView=!0)}),e.onColorPriceFocous=function(t,a){e.resetColorPriceStatus(),e.resetColorWBase(),e.colorRangeDetails[t].fixedPrice[a].activeCheckBox=!0},e.getStatus=function(t){for(var a=[],o=0;e.colorRangeDetails[t].clr_price.length>o;o++)a.push({activeCheckBox:!1});return a},e.applyFixedCost=function(t,a,o){o?($("#color-price_"+t+"_"+a+"_price").addClass("active"),e.colorRangeDetails[t].clr_price[a].is_fixed=1):($("#color-price_"+t+"_"+a+"_perc").removeClass("active"),e.colorRangeDetails[t].clr_price[a].is_fixed=0)},e.resetColorPriceStatus=function(){for(var t=e.colorRangeDetails.length,a=0;t>a;a++)for(var o=0;e.colorRangeDetails[a].fixedPrice.length>o;o++)e.colorRangeDetails[a].fixedPrice[o].activeCheckBox=!1},e.onWhiteBasePriceFocous=function(t){e.resetColorPriceStatus(),e.resetColorWBase(),e.colorRangeDetails[t].fixedWBStatus.activeCheckBox=!0},e.getColorWhitebaseStatus=function(){var e={activeCheckBox:!1};return e},e.resetColorWBase=function(){for(var t=e.colorRangeDetails.length,a=0;t>a;a++)e.colorRangeDetails[a].fixedWBStatus.activeCheckBox=!1},e.applyColorWhiteBaseFixed=function(t,a){a?($("#color-wb-"+t+"_price").addClass("active"),e.colorRangeDetails[t].wht_base.is_fixed=1):($("#color-wb-"+t+"_perc").removeClass("active"),e.colorRangeDetails[t].wht_base.is_fixed=0)},e.changePriceTable=function(t){1==t?(e.pricetableView.priceStatus=1,e.printSettings.is_print_size=0,e.printSettings.is_color_price_range=1):0==t?(e.pricetableView.priceStatus=0,e.printSettings.is_print_size=1,e.printSettings.is_color_price_range=0):3==t?(e.pricetableView.priceStatus=3,e.printSettings.is_print_size=0,e.printSettings.is_color_price_range=0):(e.pricetableView.priceStatus=2,e.printSettings.is_print_size=0,e.printSettings.is_color_price_range=0)},e.addNewAreaRange=function(){var t=9,a=0,o=1,r=[];sizeLength=e.allPrintSize.length,whPrice={price:"0.00",percentage:0,is_fixed:1},e.printAreaRangeDetails.length>1&&(a=parseInt(e.printAreaRangeDetails.length-1),o=parseInt(e.printAreaRangeDetails[a].to),t=10);for(var i=0;sizeLength>i;i++)r.push({id:e.allPrintSize[i].id,name:e.allPrintSize[i].name,price:"0.00",percentage:0,is_fixed:1});var n={from:o+1,to:o+t,wht_base:whPrice,area_prc:r};e.printAreaRangeDetails.push(n)},e.removeAreaRange=function(t){t==e.printAreaRangeDetails.length-1&&e.printAreaRangeDetails.length>1&&e.printAreaRangeDetails.splice(t,1)},e.checkAreaRange=function(t){if(1==e.printSettings.is_print_size&&t.length>1)for(var a=0;t.length>a;a++)if(a>0){if(parseInt(t[a].from)>=parseInt(t[a].to)||""==t[a].to||""==t[a].from||"1"==t[a].to||"1"==t[a].from)return!1;for(var o=a+1;t.length>o;o++)if(parseInt(t[o].from)<parseInt(t[a].to)||t[a].to==t[o].from)return!1}return!0},e.updatePrintAreaTable=function(t){if(e.demoStatus)e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"});else{var a=e.checkAreaRange(e.printAreaRangeDetails);a?(e.wizardLoader=!0,i.updatePrintSizePrice(e.printAreaRangeDetails,e.selectedId,e.printSettings.is_print_size,e.printSettings.is_color_price_range,e.printSettings.is_print_area_percentage).then(function(a){a.data?(n.setPrintSettingsById(a.data),""!=t&&(e.$emit(o.SELECTED_ITEM_FOR_SITEMAP,""),e.printWizard=!1,e.printMethodListView=!0),e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):(e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"}))})):e.$emit(o.SHOW_NOTIFICATION,{message:"Invalid Range",type:"info"})}},e.loadSizePriceTable=function(){var t=JSON.parse(JSON.stringify(e.printAreaRangeDetails)),a=e.printAreaRangeDetails.length,o=t.length,r=e.allPrintSize.length,i=e.printAreaRangeDetails[0].area_prc.length;if(i>0){for(var n=0;e.printAreaRangeDetails.length>n;n++){e.printAreaRangeDetails[n].area_prc=[];for(var s=0;r>s;s++)e.printAreaRangeDetails[n].area_prc.push({id:e.allPrintSize[s].id,name:e.allPrintSize[s].name,price:"0.00",percentage:0,is_fixed:1})}for(var d=0;r>d;d++)for(var l=0;o>l;l++)for(var c=0;t[l].area_prc.length>c;c++)e.allPrintSize[d].name==t[l].area_prc[c].name&&(e.printAreaRangeDetails[l].area_prc[c]={id:t[l].area_prc[c].id,name:t[l].area_prc[c].name,price:t[l].area_prc[c].price,percentage:t[l].area_prc[c].percentage,is_fixed:t[l].area_prc[c].is_fixed})}else for(var u=0;a>u;u++){e.printAreaRangeDetails[u].wht_base={price:"0.00",percentage:0,is_fixed:1};for(var g=0;r>g;g++)e.printAreaRangeDetails[u].area_prc.push({id:e.allPrintSize[g].id,name:e.allPrintSize[g].name,price:"0.00",percentage:0,is_fixed:1})}},e.checkColorRange=function(t){if(1==e.printSettings.is_color_price_range)if(t.length>1)for(var a=0;t.length>a;a++){if(parseInt(t[a].from)>=parseInt(t[a].to)||""==t[a].to||""==t[a].from)return!1;for(var o=a+1;t.length>o;o++)if(parseInt(t[o].from)<parseInt(t[a].to)||t[a].to==t[o].from)return!1}else if(t[0].to==t[0].from||t[0].to<t[0].from)return!1;return!0},e.updateColorPriceTable=function(t){if(e.demoStatus)e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"});else{e.colorPriceTable.no_of_colors=e.noOfColors.value;var a=e.checkColorRange(e.colorRangeDetails);a&&parseInt(e.colorPriceTable.no_of_colors)==e.colorRangeDetails[0].clr_price.length?(e.wizardLoader=!0,i.updateColorRangePrice(e.selectedId,e.colorRangeDetails,e.printSizeList,e.colorPriceTable.no_of_colors,e.printSettings.is_color_price_range,e.printSettings.is_print_size,e.printSettings.is_percentage,e.printSettings.is_color_area_price,e.printSettings.screen_cost).then(function(a){a.data?(n.setPrintSettingsById(a.data),""!=t&&(e.$emit(o.SELECTED_ITEM_FOR_SITEMAP,""),e.printWizard=!1,e.printMethodListView=!0),e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):(e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"}))})):e.$emit(o.SHOW_NOTIFICATION,{message:"Invalid Range",type:"info"})}},e.updateTeamAndSidePriceTable=function(t){if(e.demoStatus)e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"});else{e.nameNumberExtraSidePriceObj={},e.nameNumberExtraSidePriceObj.name_number_price=e.teamPrice,e.nameNumberExtraSidePriceObj.extra_side_price=e.extraSidePrice,e.nameNumberExtraSidePriceObj.is_name_number_price=e.printSettings.is_name_number_price,e.nameNumberExtraSidePriceObj.is_extra_side_price=e.printSettings.is_extra_side_price;var a=g(e.nameNumberExtraSidePriceObj);a&&e.nameNumberExtraSidePriceObj?(e.wizardLoader=!0,i.updateTeamAndSideRangePrice(e.selectedId,e.nameNumberExtraSidePriceObj).then(function(a){a.data?(n.setPrintSettingsById(a.data),""!=t&&(e.$emit(o.SELECTED_ITEM_FOR_SITEMAP,""),e.printWizard=!1,e.printMethodListView=!0),e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):(e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"}))})):e.$emit(o.SHOW_NOTIFICATION,{message:"Invalid Range",type:"info"})}},e.changeNameNumberEnable=function(t){e.printSettings.is_name_number_price="0"!=t?1:0},e.changeExtraSidePriceEnable=function(t){e.printSettings.is_extra_side_price="0"!=t?1:0},e.disableAllPriceTable=function(t){e.demoStatus?e.$emit(o.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"}):(e.wizardLoader=!0,i.updatePrintSettings(e.printSettings,n.getPrintId(),e.text_Price).then(function(a){a.data instanceof Array?(n.setPrintSettingsById(a.data),""!=t&&(e.$emit(o.SELECTED_ITEM_FOR_SITEMAP,""),e.printWizard=!1,e.printMethodListView=!0),e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):(e.wizardLoader=!1,e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"}))}))},e.addNewTextLine=function(){try{var t=e.text_Price.line_price.length,a=parseInt(e.text_Price.allowded_lines);if(a>=t)for(var o=0;a>o;o++)o+1>t&&e.text_Price.line_price.push(e.text_Price.line_price[t-1]);else for(var o=0;t>o;o++)o>=a&&e.text_Price.line_price.splice(-1,1)}catch(r){console.log("Error in text_price Json")}},e.addNewSidePriceLines=function(){try{var t=e.img_Upload_Price.image_price.length,a=parseInt(e.img_Upload_Price.allowed_sides);if(a>=t)for(var o=0;a>o;o++)o+1>t&&e.img_Upload_Price.image_price.push(void 0!=e.img_Upload_Price.image_price[o]?e.img_Upload_Price.image_price[o]:0);else for(var o=0;t>o;o++)o>=a&&e.img_Upload_Price.image_price.splice(-1,1)}catch(r){console.log("Error in image_upload_price Json")}},$(document).mouseup(function(t){try{var o=$(".price-check-wrap");!o.is(t.target)&&0===o.has(t.target).length&&e.colorRangeDetails[0].fixedPrice&&e.colorRangeDetails&&a(function(){e.resetColorPriceStatus(),e.resetColorWBase()})}catch(t){}}),e.whitebaseTypeChanged=function(t){var a=e.printAreaRangeDetails.length;if("1"==t)for(var o=0;a>o;o++)e.printAreaRangeDetails[o].wht_base.is_fixed=1;else for(var o=0;a>o;o++)e.printAreaRangeDetails[o].wht_base.is_fixed=0},e.openMaskPrice=function(){i.getAllMaskData().then(function(t){if(t.data instanceof Array||"nodata"==t.data.status){e.customMaskList=t.data;var a=$("#customMaskModal");$("#customMaskModal").modal("show"),a.children(".modal-dialog").addClass("modal-lg")}})},e.updateMaskPrice=function(){i.updateCustoMask(e.customMaskList).then(function(t){t.data instanceof Array?(u.setMaskList(t.data),e.$emit(o.SHOW_MASK_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(o.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})})},e.changeMinOrderStatus=function(t){e.printSettings.is_min_order="0"!=t?1:0},e.changeUsedColor=function(t){e.printSettings.is_used_colors="0"!=t?1:0},e.changeMaxPalette=function(t){e.printSettings.is_max_palettes="0"!=t?1:0},e.changeSetupCost=function(t){e.printSettings.is_setup_cost="0"!=t?1:0},e.changeClipArt=function(t){e.printSettings.is_clip_art="0"!=t?1:0},e.changeBackGround=function(t){e.printSettings.is_background="0"!=t?1:0},e.changeBackGroundPattern=function(t){e.printSettings.is_background_pattern="0"!=t?1:0},e.changeFont=function(t){e.printSettings.is_font="0"!=t?1:0},e.changePalette=function(t){e.printSettings.is_palette="0"!=t?1:0},e.changeAdditinalPrice=function(t){e.printSettings.is_additional_price="0"!=t?1:0},e.changeMultiLineText=function(t){e.printSettings.is_multiline_text_price="0"!=t?1:0},e.changeScalingPrice=function(t){e.printSettings.is_scalling="0"!=t?1:0},e.editMaxNumberOfSelectedColor=function(){var t=$("#selectMaxColor");$("#selectMaxColor").modal("show"),t.children(".modal-dialog").addClass("modal-md"),e.isMaxNumberColor=!0},e.addNumberOfMaxSelectColor=function(t){i.addNumberOfMaxColor(t).then(function(t){"success"==t.data.status&&($("#selectMaxColor").modal("hide"),e.$emit(o.SHOW_NOTIFICATION,{message:"Successfully Added",type:"success"}))})},e.loadMaxSelectColor=function(){i.loadMaximumSelectColor().then(function(t){e.numberOfColors=t.data.max_number_of_color})},e.changeImageUploadCost=function(t){e.printSettings.is_image_upload_price="0"!=t?1:0},e.changeBrowsePattern=function(t){e.printSettings.is_browse_allow="0"!=t?1:0},e.changedTermsAndCondition=function(t){e.printSettings.is_terms_and_condition_allow="0"!=t?1:0},e.changedBlendChooser=function(t){"1"==t?(e.printSettings.is_engrave=1,e.selectedBlendType.type=r.translateText("Wooden")):(e.printSettings.is_engrave=0,e.selectedBlendType.type=r.translateText("Metal"))}}]),angular.module("printSettingWizard").directive("toggleClass",function(){return{restrict:"A",link:function(e,t,a){t.bind("click",function(){t.toggleClass(a.toggleClass)})}}}),angular.module("printSettingWizard").factory("PrintWizardService",["$http","AppConfig","$rootScope","PrintWizardModel",function(e,t,a,o){var r=t.API_KEY,i=function(){var t=e.get(a.serviceAPI+"?reqmethod=getAllPrintMethods&apikey="+encodeURIComponent(r));return t};return getPrintSettingsById=function(t){e.get(a.serviceAPI+"?reqmethod=getAllPrintSettings&apikey="+encodeURIComponent(r)+"&print_method_id="+t).success(function(e){o.setPrintSettingsById(e)}).error(function(e){console.log("error getPrintSettingsById : ",e)})},addUpdatePrintMethod=function(t,o){var i=$.param({apikey:r,reqmethod:"addUpdatePrintMethod",id:t,name:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},addnewPrintMethod=function(t,o,i,n){var s=$.param({apikey:r,reqmethod:"addNewPrintSettingsAdmin",print_id:t,name:o,type:n,base64:i}),d=e({method:"POST",url:a.serviceAPI,data:s,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return d},updateMultiplePrintMethod=function(t,o){var i=$.param({apikey:r,reqmethod:"updateMultiplePrintMethod",id:t,status:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},deletePrintMethod=function(t){var o=$.param({apikey:r,reqmethod:"deletePrintMethod",id:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},updatePrintSettings=function(t,o,i,n){var s=$.param({apikey:r,reqmethod:"updatePrintSetting",id:o,settings:t,textline_price:i,img_upload_price:n}),d=e({method:"POST",url:a.serviceAPI,data:s,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return d},updateColorGroupPrice=function(t,o,i){var n=$.param({apikey:r,reqmethod:"addUpdateColorPriceGroup",color_grp_price:t,print_method_id:o,other_color_group_price:i}),s=e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s},fetchPalettes=function(){var t=$.param({apikey:r,reqmethod:"fetchPalettes",srtIndex:0,range:"",printTypeId:"",categoryId:""}),o=e({method:"POST",url:a.serviceAPI,data:t,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return o},deletePrintSize=function(t,o){var i=$.param({apikey:r,reqmethod:"deletePrintSize",print_method_id:t,print_size_id:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},updateDefaultPrintStatus=function(t,o){var i=$.param({apikey:r,reqmethod:"addUpdatePrintImage",print_method_id:t,is_default:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},uploadImage=function(t,o,i){var n=$.param({apikey:r,reqmethod:"addUpdatePrintImage",print_method_id:t,base64:o,type:i}),s=e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s},updateSettings=function(t,o){var i=$.param({apikey:r,reqmethod:"updatePrintSetting",id:t,settings:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},fetchPaletteCat=function(){var t=e.get(a.serviceAPI+"?reqmethod=fetchPaletteCategories&apikey="+encodeURIComponent(r));return t},updateFeature=function(t,o){var i=$.param({apikey:r,reqmethod:"addUpdatePrintFeature",features:o,print_method_id:t}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},loadCategories=function(){var t=e.get(a.serviceAPI+"?reqmethod=getCategories&apikey="+encodeURIComponent(r));return t},loadWebfontsCategories=function(){var t=e.get(a.serviceAPI+"?reqmethod=allWebFontsCatagory&apikey="+encodeURIComponent(r));return t},loadTemplateCategories=function(){var t=e.get(a.serviceAPI+"?reqmethod=getTemplateCategory&apikey="+encodeURIComponent(r));return t},loadDesignCategories=function(){var t=e.get(a.serviceAPI+"?reqmethod=allDesignCatagory&apikey="+encodeURIComponent(r));return t},updateTextSetting=function(t,o,i,n,s,d){var l=$.param({apikey:r,reqmethod:"updateTextColorToPrintMethod",fillcolor:i,stockcolor:o,wc_color1:n,wc_color2:s,wc_color3:d,print_method_id:t}),c=e({method:"POST",url:a.serviceAPI,data:l,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return c},updateCategoryToPrintMethod=function(t,o,i,n,s,d,l,c){var u=$.param({apikey:r,reqmethod:"addAllCategoryByPrintId",print_method_id:t,product_category:o,palette_category:i,font_category:n,design_category:s,template_category:d,background_category:l,pattern_category:c}),g=e({method:"POST",url:a.serviceAPI,data:u,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return g},updatePrintSizePrice=function(t,o,i,n,s){for(var d=JSON.parse(JSON.stringify(t)),l=t.length,c=0;l>c;c++)delete d[c].fixedStatus,delete d[c].fixedWhitSts;var u=$.param({apikey:r,reqmethod:"addUpdatePrintAreaPrice",print_method_id:o,details:d,is_color_table:n,is_print_size:i,is_print_area_percentage:s}),g=e({method:"POST",url:a.serviceAPI,data:u,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return g},updateColorRangePrice=function(t,o,i,n,s,d,l,c,u){for(var g=JSON.parse(JSON.stringify(o)),p=o.length,m=0;p>m;m++)delete g[m].fixedPrice,delete g[m].fixedWBStatus;var f=$.param({apikey:r,reqmethod:"updateQuantityRangeByPrintId",print_method_id:t,quantity_range:g,color_print_area:i,is_color_table:s,is_print_size:d,is_percentage:l,no_of_colors:n,is_color_area:c,screen_cost:u}),h=e({method:"POST",url:a.serviceAPI,data:f,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return h},updateTeamAndSideRangePrice=function(t,o){var i=$.param({apikey:r,reqmethod:"addUpdateNameNumberExtraSidePrice",print_method_id:t,nameSidePriceData:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},getAllMaskData=function(){var t=e.get(a.serviceAPI+"?reqmethod=fetchCustomMaskData&apikey="+encodeURIComponent(r));return t},updateCustoMask=function(t){var o=$.param({apikey:r,reqmethod:"updateCustomMaskData",customMaskList:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},loadBackgroundCategories=function(){var t=e.get(a.serviceAPI+"?reqmethod=getBackgroundDesignCatagory&apikey="+encodeURIComponent(r));return t},loadBackgroundPatternCategories=function(){var t=e.get(a.serviceAPI+"?reqmethod=getBackgroundPatternCategory&apikey="+encodeURIComponent(r));return t},addNumberOfMaxColor=function(t){var o=e.get(a.serviceAPI+"?reqmethod=addMaxNumberForSelectColor"+"&max_number_of_color="+t);return o},loadMaximumSelectColor=function(){var t=e.get(a.serviceAPI+"?reqmethod=getMaxmNumberOfSelectColor&apikey="+encodeURIComponent(r));return t},{getAllPrintMethods:i,getPrintSettingsById:getPrintSettingsById,addUpdatePrintMethod:addUpdatePrintMethod,updateMultiplePrintMethod:updateMultiplePrintMethod,deletePrintMethod:deletePrintMethod,addnewPrintMethod:addnewPrintMethod,updatePrintSettings:updatePrintSettings,updateColorGroupPrice:updateColorGroupPrice,fetchPalettes:fetchPalettes,deletePrintSize:deletePrintSize,updateDefaultPrintStatus:updateDefaultPrintStatus,uploadImage:uploadImage,updateSettings:updateSettings,fetchPaletteCat:fetchPaletteCat,updateFeature:updateFeature,loadCategories:loadCategories,loadWebfontsCategories:loadWebfontsCategories,loadTemplateCategories:loadTemplateCategories,loadDesignCategories:loadDesignCategories,updateTextSetting:updateTextSetting,updateCategoryToPrintMethod:updateCategoryToPrintMethod,updatePrintSizePrice:updatePrintSizePrice,updateColorRangePrice:updateColorRangePrice,getAllMaskData:getAllMaskData,updateCustoMask:updateCustoMask,loadBackgroundCategories:loadBackgroundCategories,loadBackgroundPatternCategories:loadBackgroundPatternCategories,addNumberOfMaxColor:addNumberOfMaxColor,loadMaximumSelectColor:loadMaximumSelectColor,updateTeamAndSideRangePrice:updateTeamAndSideRangePrice}}]),angular.module("product").controller("ProductController",["$http","$scope","$rootScope","ProductService","$timeout","translateService","ProductModel","MainEvent","MainService","webStorage","AppModel","$filter","$window","colorVariantPriceFactory","sizeVariantPriceFactory","unitFactory","variableBoundaryFactory","svgFactory",function(e,t,a,o,r,i,n,s,d,l,c,u,g,p,m,f,h,C){function S(e,t,a){var o=Raphael.pathBBox(e),r=t/o.width,i=a/o.height;0==r&&(r=1);var n="s"+r+","+i+",0,0";return e=Raphael.transformPath(e,"t"+-o.x+","+(40/i-o.y)),e=Raphael.transformPath(e,n),y(e)}function y(e){var t=""+e;return t=t.replace(/([0-9]),([-0-9])/g,"$1 $2"),t=t.replace(/([0-9]),([-0-9])/g,"$1 $2"),t=t.replace(/,/g,"")}t.categoryList=[],t.categoryId="";var I=1;t.searchStr="",t.productList=[],t.tabModel="boundary",t.print={sizeName:""},t.thumbSides=[],t.sides=[],t.canvas="",t.maskPath="",t.bound="",t.tempMaskData=[],t.firstTimeSizeload=!0,t.printSizeList=[],t.selectedSize=i.translateText("Printing Sizes"),t.selectedMaskName=i.translateText("Printing Masks"),t.sideIndex=-1,t.boundary={name:"bound"},t.isCustomSize=!1,t.isScalePrice=!0,t.printAreaType,t.isProductLoad=!0,t.originalMaskData=[],t.variantColors=[],t.variantColorUrl=[],t.simpleProductId="",t.data=[],t.error_msg="",t.allPrintMethod=[],t.printMthdStatus=[],t.prntMethodByProduct=[],t.tempadditionalPrice=[],t.additionalPrice=[],t.productLoad=!0,t.TransitionView=!1,t.print.is_Transition=!1,t.transitionStatus="",t.tempProductSizelist=[],t.printSizeListDefault=[],t.printSizes=[],t.custom={height:"",weight:""},t.productUnit="",t.tempSizeVariantPrices=[],t.maskUploadPrice=[],t.maskUploadHeight=[],t.maskUploadWidth=[],t.maskDimesion=.011112,t.searchValue="",t.showNoResultMsg=!1,t.allCustomMaskData=[],t.scaleUnitList=[{id:1,name:i.translateText("Inches")},{id:2,name:i.translateText("Centimetre")},{id:3,name:i.translateText("Millimetre")},{id:4,name:i.translateText("Feet")}],t.selectedScaleUnit={id:1,name:i.translateText("Inches")},t.transitionMessage="This provides transition facility to the smaller print size, in case of resize the graphics/text on product boundary.",t.addNewCustomSizeMessage="This configures the custom size for rectangle boundary.",t.addNewMaskMessage="This configures the custom mask.",t.borderMessage="This sets border for variable boundary.",t.addSideMessage="Here it allows user to add number of sides.",t.addNewSize={status:!1},t.addNewMask={status:!1},t.productMaskId=[],t.saveMaskButton=!1,t.saveSizeButton=!1,t.selectedTemplate=i.translateText("No Template"),t.templateStatus=!1,t.isBleedMark=[],t.selectedScaleUnit.id=1,t.customDropDown={status:!1},t.changeHeight=[],t.changeWidth=[],t.settingView="rectangle_boundary",t.isVariableAreaDimention={status:!0,keyField:""},t.isTemplateAssign="0",t.tstatus=!1;var _=1,v=0,T=u("orderBy"),A=!1,L=!1,P=!1,O=!1,D=!1,w=!1,k=!0;t.isSidesAdded=[],t.sidesAllowed=[],t.fileType=".svg",t.editAditionalPrice=[],t.selectedTemplateIndex=0;var b=0,M=0,E=!1,x={};t.isSimple=!1,t.simpleProductWithoutColor=!1,t.isSizeExits=!1,t.isPreDecoProduct=!0,t.isMultiplePrint=!0,t.customMaskArea={width:0,height:0},t.init=function(){if(t.loadMore=!1,t.dataLoaded=!1,t.showLoader=!1,t.productsList=!0,t.productData=!1,t.categoryDropDown=!1,t.selectedItem=t.defaultCategory=i.translateText("All categories"),t.range=30,n.resetLoadMore(),t.isLoadMore=n.getLoadMoreStatus(),n.getProductListLoadedStatus()){var e=n.getProductList(),a=n.getProductCount();I=n.getStartIndex(),t.searchValue=n.getSearchString(),t.checkLoadMore(a),t.dataLoaded=!0,0==e.length&&(t.showNoResultMsg=!0),t.productList=e,t.dataLoaded=!0,t.categoryDropDown=!0}else N(!1);if(n.getCategoryListLoadedStatus()){t.categoryList=n.getCategoryList();var r=n.getSelectedCategory();t.categoryId=r.id,t.selectedItem=r.name,n.setCategoryList(t.categoryList)}else o.loadCategories().then(function(e){e.data.categories instanceof Array?(t.categoryList.push({id:"",name:t.defaultCategory}),angular.forEach(e.data.categories,function(e){t.categoryList.push(e)}),t.categoryId=t.categoryList[0].id,n.setCategoryList(t.categoryList)):t.$emit(s.SHOW_NOTIFICATION,{message:"Product Category Fail To Load",type:"danger"})});o.activePrintMethod().then(function(e){t.allPrintMethod=[],angular.forEach(e.data,function(e){var a={};1==e.is_enable&&(a.id=e.id,a.name=e.name,t.allPrintMethod.push(a))})}),n.getCustomMaskLoadStatus()?t.allCustomMaskData=n.getMaskList():o.getAllMaskData(),t.getCurrentModule(),angular.forEach(t.currentModule,function(e){"preDecoProduct"==e?t.allowdPredeco=e:t.allowdMultplePrintingArea=e}),(""==t.allowdPredeco||void 0==t.allowdPredeco)&&(t.isPreDecoProduct=!1),(""==t.allowdMultplePrintingArea||void 0==t.allowdMultplePrintingArea)&&(t.isMultiplePrint=!1)},t.getCurrentModule=function(){for(var e=d.getrevdata(a.license_key),o="AAIfFAUTBFwAHBEZHiQVCARcAAIfFAUTBDMRHgYRA1wUFQMZFx5cExECBFwZHREXFTUUGQRcHQk5HREXFQ==",r=e.split("|"),i=r[0].split(","),n=d.getrevdata(o),s=0;i.length>s;s++){if(-1!=window.location.hostname.search(i[s])&&-1!=document.URL.search(i[s])){t.currentModule=r[3].split(",");break}t.currentModule=n.split(",")}},t.selectedCatagory=function(e){$("#assignTemplateModal").modal("hide"),t.isLoadMore=!1,t.searchStr="",t.searchValue="",n.setSearchString(t.searchValue),t.showNoResultMsg=!1,I=1,n.setStartIndex(I),t.categoryId=t.categoryList[e].id,t.selectedItem=t.categoryList[e].name,n.resetProductList(),n.setSelectedCategory(t.categoryId,t.selectedItem),N(!0)};var N=function(e){t.productData=!1,t.categoryDropDown=e,t.loadMore||(t.productList=[],t.dataLoaded=!1),o.loadProducts(t.range,t.categoryId,I,t.searchStr).then(function(e){if(e.data.product instanceof Array||null==e.data.product){null!=e.data.product?(angular.forEach(e.data.product,function(e){t.productList.push(e)}),0==t.productList.length&&(t.showNoResultMsg=!0)):t.showNoResultMsg=!0,t.productsList=!0,t.loadMore?t.loadMore=!1:t.dataLoaded=!0,t.categoryDropDown=!0;try{$(".product-list").animate({scrollTop:$(".product-list")[0].scrollHeight},800)}catch(a){}}else t.showNoResultMsg=!0,t.dataLoaded=!0,t.isLoadMore=!1,t.$emit(s.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})})};t.checkLoadMore=function(e){void 0!=e?t.range>e?(n.setLoadMoreStatus(!1),t.isLoadMore=!1):(n.setLoadMoreStatus(!0),t.isLoadMore=!0):(n.setLoadMoreStatus(!1),t.isLoadMore=!1)
},a.$on(s.PRODUCT_LIST_LOADED,function(e,a){t.checkLoadMore(a),n.setCategoryListLoadedStatus(!0)}),t.selectedProduct=function(e){t.tabModel="boundary",t.priceRule="color",t.productData=!1,t.selectedThumbIndex=0,t.isLoadMore=!1,t.showLoader=!0,t.productsList=!1,t.categoryDropDown=!1,t.productLoad=!0,t.isPrintMethodPresent=!0,t.setPrintSizeList(),o.getPrintMethodByPCategory(t.productList[e].id).then(function(e){t.prntMethodByProduct=e.data,t.isPrintMethodPresent=!1}),o.loadProductDetails(t.productList[e].id)},t.loadMoreProducts=function(){I+=1,n.setStartIndex(I),t.loadMore=!0,N(!0)},t.changeTab=function(e){t.tabModel!=e&&t.thumbSides.length>0&&(t.tabModel=e),"setting"==e&&(B(),Y()),"price"==e&&t.loadgenralInfo()},a.$on(s.LOAD_MODULE_ON_SITEMAP_CLICK,function(e,a){"Product List"==a&&t.dataLoaded&&!t.showLoader&&(t.categoryDropDown=!0,t.productData=!1,t.productsList=!0,t.dataLoaded=!0,t.showLoader=!1,t.isCustomSize=!1,t.variantColors=[],t.variantColorUrl=[],t.data=[],t.error_msg="",t.printMthdList1=[],t.printMthdList2=[],t.isLoadMore=n.getLoadMoreStatus())}),a.$on(s.PRODUCT_MODEL_READY,function(){0!=n.getId()?(t.sideIndex=-1,t.tempMaskData=[],t.cropMark=[],t.safeZone=[],t.isCropMark=[],t.isSafeZone=[],t.unitView=[],t.maskUploadPrice=[],t.maskUploadHeight=[],t.maskUploadWidth=[],t.productMaskId=[],t.getPrintArea(),t.getMaskSize(),t.sides=[],t.tempSizeVariantPrices=[],t.productUnit=c.getUnit(),t.pId=n.getId(),t.isPreDecorated=n.getPredecoratedStatus(),t.simpleProductId=n.getSimpleProductID(),t.name=n.getName(),t.category=n.getCategory(),t.price=n.getPrice(),t.isBorderEnable=[],t.colors=n.getColors(),t.thumbSides=n.getThumbsides(),t.thumbSides.length>0?(t.sides=n.getSides(),t.setProductMaskData(),t.createCanvas()):(t.sideIndex=0,Y(),t.templateStatus=!0,t.warningMessage=i.translateText("Assign a template"),$("#assignTemplateModal").modal({backdrop:"static",keyboard:!1}),$("#assignTemplateModal").modal("show")),t.tempadditionalPrice=n.getAdditionalprices(),t.tempSizeVariantPrices=n.getSizeAdditionalPrice(),angular.forEach(t.additionalprices,function(e){var a={};a.printId=e.prntMthdId,a.printPrice=e.prntMthdPrice,t.editAditionalPrice.push(a)}),t.showLoader=!1,t.productData=!0,t.$emit(s.SELECTED_ITEM_FOR_SITEMAP,t.name),1==t.firstTimeSizeload&&t.setPrintSizeList(),t.originalPrintData=[],angular.forEach(t.tempPrintSizeData,function(e){t.originalPrintData.push(e)}),t.changeBorderColor(t.colors),t.printAreaType=n.getPrintAreaType(),"true"==t.printAreaType.bounds?(t.boundary.name="bound",t.settingView="rectangle_boundary"):"true"==t.printAreaType.custom_size?(t.boundary.name="customBoundry",t.settingView="variable_boundary"):"true"==t.printAreaType.customMask?(t.boundary.name="variableMask",t.settingView="variable_mask"):"true"==t.printAreaType.mask?(t.boundary.name="mask",t.settingView="mask"):"true"==t.printAreaType.multipleBoundary&&(t.boundary.name="multipleBoundary",t.settingView=""),x=n.getCurrentProductDetails(),E=n.getProductType(),t.simpleProductWithoutColor=!E||""!=x.xecolor&&null!=x.xecolor?!1:!0,t.isSimple=E,E&&(t.priceRule="whitebase"),t.loadgenralInfo()):(t.isLoadMore=n.getLoadMoreStatus(),t.showLoader=!1,t.productData=!1,t.productsList=!0,t.categoryDropDown=!0,t.$emit(s.SHOW_NOTIFICATION,{message:"Product Detail Fail To Load",type:"danger"}))}),t.loadgenralInfo=function(){E||t.loadSizeQuantityData(),o.getAdditionalPrice(t.pId).then(function(e){if(t.tempadditionalPrice=e.data,E){t.variants=[],t.variants[0]={attributes:"",colorUrl:"",xeColor:"",xe_color_id:""},t.variants[0].attributes=x.attributes,t.variants[0].colorUrl=x.colorSwatch,t.variants[0].xeColor=x.xecolor,t.variants[0].xe_color_id=x.xe_color_id;var a=t.variants[0].xeColor,o=t.variants[0].colorUrl,r=a.substring(a.indexOf("_")+1);a.indexOf("#")>-1?(t.variantColors.push(r),t.variants[0].xeColor=r):t.variantColorUrl.push(o),W(),t.additionalPrice[0].variantid=t.pId}else t.loadVariantsData()})},t.createCanvas=function(){var e=document.getElementById("xe_product_editor");""==t.canvas&&e&&(t.canvas=Raphael(e,500,500,0,0)),t.initCanvas(0)},t.initCanvas=function(e){t.sideIndex!=e&&1==t.isProductLoad&&(t.canvas.clear(),t.isProductLoad=!1,t.sideIndex=e,t.addProductToCanvas(e))},t.addProductToCanvas=function(e){var a=t.sides[e];t.isProductLoad=!0,t.canvas.image(a,0,0,500,500),t.drawBoundary()},t.drawBoundary=function(){r(function(){if(t.actualWidth="",t.actualHeight="","boundary"==t.tabModel)if("bound"==t.boundary.name)if(t.isCustomSize)t.settingView="variable_boundary",t.drawUserDefinedBound(200,200,150,150);else{t.getPrintArea(),t.settingView="rectangle_boundary";var e=t.tempMaskData[t.sideIndex].bounds;e.boundwidth>0&&t.setBoundsRect(e.boundwidth,e.boundheight,e.boundx,e.boundy,!1),t.updatePrintSize(t.sideIndex)}else if("mask"==t.boundary.name){t.settingView="mask";var a=t.tempMaskData[t.sideIndex].mask;t.customMaskArea.height=a.height,t.customMaskArea.width=a.width,t.drawProductMask(a.path,a.left,a.top,a.height,a.width),j()}else if("customBoundry"==t.boundary.name)if(t.settingView="variable_boundary",t.isCustomSize)t.drawUserDefinedBound(200,200,150,150);else{var e=t.tempMaskData[t.sideIndex].bounds;t.tempMaskData[t.sideIndex].customsize.width>0&&"customBoundry"==t.boundary.name&&t.setBoundsRect(t.tempMaskData[t.sideIndex].customsize.width,t.tempMaskData[t.sideIndex].customsize.height,t.tempMaskData[t.sideIndex].customsize.left,t.tempMaskData[t.sideIndex].customsize.top,!0)}else if("variableMask"==t.boundary.name){t.settingView="variable_mask",""==t.tempMaskData[0].custom_mask&&(t.tempMaskData[0].custom_mask=t.tempMaskData[0].mask);var a=t.tempMaskData[t.sideIndex].custom_mask;a.path=t.tempMaskData[t.sideIndex].mask.path,t.drawProductMask(a.path,a.left,a.top,a.height,a.width),j()}else if("multipleBoundary"==t.boundary.name){t.settingView="";var o=t.multiBoundData[t.sideIndex];t.unitView[0]=t.multiBoundData[t.sideIndex].scaleRatio_unit,t.updateScaleUnit(t.sideIndex),r(function(){U(),tt(o.svg,!1)},100)}else{t.settingView="mask";var a=t.tempMaskData[t.sideIndex].mask;t.customMaskArea.height=a.height,t.customMaskArea.width=a.width,t.drawProductMask(a.path,a.left,a.top,a.height,a.width),j()}})},t.setBoundsRect=function(e,a,o,r,i){U(),_=a/e,i?e>a?(e="customBoundry"!=t.boundary.name?200:450,a="customBoundry"!=t.boundary.name?parseInt(e*_):e*_):(a="customBoundry"!=t.boundary.name?200:450,e="customBoundry"!=t.boundary.name?parseInt(a/_):a/_):(e=parseInt(e),a=parseInt(a)),t.bound=t.canvas.rect(o,r,e,a).attr({fill:"#ffffff",stroke:"black","fill-opacity":0}).hover(function(e){e.currentTarget.style.cursor="move"}),b=498-t.bound.attrs.width,M=498-t.bound.attrs.height,t.canvasObserve(t.bound)},t.drawProductMask=function(e,a,o,r,i){U();var n,s,d=Raphael.pathBBox(e);(d.height>500||d.width>500)&&(d.height>d.width?(s=500,n=s/d.height*d.width):(n=500,s=n/d.width*d.height),r=r?r:s,i=i?i:n,e=S(e,i,r)),t.maskPath=t.canvas.path(e).attr({x:a,y:o,height:r,width:i,stroke:"black",fill:"#ffffff","fill-opacity":0}).hover(function(e){e.currentTarget.style.cursor="move"}),t.maskPath.translate(a,o),t.canvasObserve(t.maskPath)},t.resizeCustomBoundary=function(e){if(t.customMaskArea.height.length>3&&(t.customMaskArea.height=t.customMaskArea.height.slice(0,3)),t.customMaskArea.width.length>3&&(t.customMaskArea.width=t.customMaskArea.width.slice(0,3)),!isNaN(t.customMaskArea.height)&&!isNaN(t.customMaskArea.width)){if(0==t.customMaskArea.height&&""==t.customMaskArea.height&&(t.customMaskArea.height=1),0==t.customMaskArea.width&&""==t.customMaskArea.width&&(t.customMaskArea.width=1),"swap"==e){var a=angular.copy(t.customMaskArea.height);t.customMaskArea.height=t.customMaskArea.width,t.customMaskArea.width=a}var o=t.tempMaskData[t.sideIndex].mask.path,r=t.tempMaskData[t.sideIndex].mask.left,i=t.tempMaskData[t.sideIndex].mask.top,n=t.customMaskArea.height,s=t.customMaskArea.width,d=S(o,s,n);t.drawProductMask(d,r,i,n,s)}},t.canvasObserve=function(e){var a=e.attrs,o=function(){this.ox=this.attr("x"),this.oy=this.attr("y")},r=function(e,a){this.attr({x:this.ox+e,y:this.oy+a}),("mask"==t.boundary.name||"variableMask"==t.boundary.name)&&this.transform("T"+(e+this.ox)+","+(a+this.oy))},i=function(){F(a)};e.drag(r,o,i),F(a)};var F=function(e){if("bound"==t.boundary.name)t.isCustomSize||(t.tempMaskData[t.sideIndex].bounds.boundwidth=e.width,t.tempMaskData[t.sideIndex].bounds.boundheight=e.height,t.tempMaskData[t.sideIndex].bounds.boundx=e.x,t.tempMaskData[t.sideIndex].bounds.boundy=e.y);else if("mask"==t.boundary.name)t.tempMaskData[t.sideIndex].mask.left=e.x,t.tempMaskData[t.sideIndex].mask.top=e.y,t.tempMaskData[t.sideIndex].mask.height=e.height,t.tempMaskData[t.sideIndex].mask.width=e.width,t.tempMaskData[t.sideIndex].mask.path=y(e.path);else if("customBoundry"==t.boundary.name)t.tempMaskData[t.sideIndex].customsize.width=t.tempMaskData[t.selectedThumbIndex].customsize.width,t.tempMaskData[t.sideIndex].customsize.height=t.tempMaskData[t.selectedThumbIndex].customsize.height,t.tempMaskData[t.sideIndex].customsize.left=e.x,t.tempMaskData[t.sideIndex].customsize.top=e.y;else if("variableMask"==t.boundary.name)t.tempMaskData[t.sideIndex].custom_mask.width=e.width,t.tempMaskData[t.sideIndex].custom_mask.height=e.height,t.tempMaskData[t.sideIndex].custom_mask.left=e.x,t.tempMaskData[t.sideIndex].custom_mask.top=e.y;else if(t.boundary.name="multipleBoundary"){var a=new XMLSerializer,o=a.serializeToString(e);t.multiBoundData[t.sideIndex].svg=o}};t.changeBoundary=function(e){"w"==e?(t.tempMaskData[t.sideIndex].bounds.boundheight=parseFloat(t.tempMaskData[t.sideIndex].bounds.boundwidth*_),t.tempMaskData[t.sideIndex].bounds.boundwidth=parseFloat(t.tempMaskData[t.sideIndex].bounds.boundwidth)):"h"==e&&(t.tempMaskData[t.sideIndex].bounds.boundwidth=parseFloat(t.tempMaskData[t.sideIndex].bounds.boundheight/_),t.tempMaskData[t.sideIndex].bounds.boundheight=parseFloat(t.tempMaskData[t.sideIndex].bounds.boundheight)),t.drawBoundary()},t.setProductMaskData=function(){t.originalMaskData=[],t.tempMultiBoundData=angular.copy(n.getMultipleBoundary()),t.multiBoundData=angular.copy(n.getMultipleBoundary()),t.tempMaskData=angular.copy(n.getMaskData()),t.originalMaskData=angular.copy(n.getMaskData()),v=t.tempMaskData.length,t.tempPrintSizeData=[],t.tempPrintSizeData=n.getPrintSizeData(),t.tempPrintSizeData.length>0&&(t.transitionStatus=t.tempPrintSizeData[0].is_transition),r(function(){t.print.is_Transition="1"==t.transitionStatus?!0:!1,t.showMaskUpload(t.tempMaskData,t.print.is_Transition)}),t.isBleedMark="1"==t.tempMaskData[0].is_safeZone||"1"==t.tempMaskData[0].is_cropMark?!0:!1},t.changeThumbSide=function(e){t.selectedThumbIndex=e,t.initCanvas(e)},t.setPrintSizeList=function(){t.printSizeList=[],o.fetchPrintSizeList().then(function(e){t.printSizeList=e.data.printSize,t.firstTimeSizeload=!1})},t.selectPrintSize=function(e){t.selectedSize=t.printSizeList[e].name,t.actualWidth=t.printSizeListDefault[e].width,t.actualHeight=t.printSizeListDefault[e].height,t.selectedSizeStatus=t.printSizeList[e].is_user_defined,"0"==t.selectedSizeStatus&&"A8"!=t.selectedSize?(t.transitionSize=t.printSizeList[e-1].name,t.TransitionView=!0):t.TransitionView=!1,t.tempPrintSizeData[t.sideIndex].size=t.printSizeList[e].name,t.tempPrintSizeData[t.sideIndex].id=t.printSizeList[e].id;var a=parseFloat(t.printSizeList[e].width),o=parseFloat(t.printSizeList[e].height);t.bound?t.setBoundsRect(a,o,t.bound.attrs.x,t.bound.attrs.y,!0):t.setBoundsRect(a,o,100,100,!0)},t.updatePrintSize=function(e){t.selectedSize=i.translateText("Printing Sizes"),t.TransitionView=!1,r(function(){if(t.tempPrintSizeData.length>0){var a=!1;t.printSizeList=c.getPrintSizeData();for(var o=t.printSizeList.length,r=0;o>r;r++)if(t.printSizeList[r].name==t.tempPrintSizeData[e].size){a=!0;break}for(var n=t.printSizeListDefault.length,s=0;n>s;s++)if(t.printSizeListDefault[s].id==t.tempPrintSizeData[e].id&&a){t.actualWidth=t.printSizeListDefault[s].width,t.actualHeight=t.printSizeListDefault[s].height;break}if(t.originalPrintData[e].size=a?t.originalPrintData[e].size:"",t.tempPrintSizeData[e].size&&""!=t.tempPrintSizeData[e].size&&a&&(t.selectedSize=t.tempPrintSizeData[e].size,"A8"!=t.selectedSize))for(var s=0;t.printSizeList.length>s;s++)if(t.selectedSize==t.printSizeList[s].name&&"0"==t.printSizeList[s].is_user_defined){t.transitionSize=t.printSizeList[s-1].name,t.TransitionView=!0;break}}else t.selectedSize=i.translateText("Printing Sizes")})},t.changeBorderColor=function(e){e=e.split("#").join("");for(var a="",o=0;6>o;o++)a+=(15-parseInt(e[o],16)).toString(16);t.borderColor="#"+a},t.drawUserDefinedBound=function(e,a,o,r){var i=t.canvas.rect(o,r,e,a).attr({fill:"#ffffff","fill-opacity":0,stroke:t.borderColor}).hover(function(e){e.currentTarget.style.cursor="move"});b=498-i.attrs.width,M=498-i.attrs.height,1==A&&t.canvasObserve(i)},t.changeMaskBoundary=function(e){t.customDropDown.status=!1,t.boundary.name=e,t.drawBoundary()};var U=function(){t.allBoundary=[],t.bound&&t.bound.remove(),t.maskPath&&t.maskPath.remove(),t.activeElement&&t.activeElement.remove(),t.displayCanvas&&t.displayCanvas.remove()};t.checkPrintSizeDuplicate=function(){t.printSizeListArr=[],t.printSizeListArr=angular.copy(c.getPrintSizeData());for(var e=0;t.printSizeListArr.length>e;e++)if(t.printSizeListArr[e].name.toUpperCase()==t.print.sizeName.toUpperCase())return!1;return!0},t.saveCustomSize=function(){if(1==t.demoStatus)t.$emit(s.SHOW_SIZE_NOTIFICATION,{message:"Demo Mode Active",type:"info"});else if(t.error_msg="",""!=t.print.sizeName)if(""!=t.custom.height&&""!=t.custom.width){var e=t.print.sizeName,a=t.custom.height,r=t.custom.width,i=t.checkPrintSizeDuplicate();i?(t.saveSizeButton=!0,o.saveCustomPrintSize(e,a,r,1).then(function(e){e.data.printSize instanceof Array&&(t.cancelPrintAreaList(),c.setPrintSizeData(e.data),t.getPrintArea(),t.setPrintSizeList(),t.saveSizeButton=!1,t.$emit(s.SHOW_SIZE_NOTIFICATION,{message:"Saved successfully",type:"success"}))})):t.$emit(s.SHOW_SIZE_NOTIFICATION,{message:"Print Size Already Exist",type:"info"})}else t.$emit(s.SHOW_SIZE_NOTIFICATION,{message:"Please enter Height and Width",type:"info"});else t.$emit(s.SHOW_SIZE_NOTIFICATION,{message:"Please enter size Name",type:"info"})},t.showMaskUpload=function(e,a){if(""==e[0].mask.path)r(function(){for(var a=0;e.length>a;a++)t.maskUploadHeight.push(0),t.maskUploadWidth.push(0),t.maskUploadPrice.push(0),t.isCropMark.push(0),t.isSafeZone.push(0),t.cropMark.push(0),t.safeZone.push(0),t.unitView.push(1),t.isBorderEnable.push(0),t.isSidesAdded.push(0),t.sidesAllowed.push(0)});else for(var o=0;e.length>o;o++)t.maskUploadPrice[e[o].side]=e[o].mask_price,t.productMaskId[e[o].side]=e[o].mask_id,t.maskUploadHeight[e[o].side]=e[o].mask_height,t.maskUploadWidth[e[o].side]=e[o].mask_width,t.isCropMark[e[o].side]=e[o].is_cropMark,t.isSafeZone[e[o].side]=e[o].is_safeZone,t.isBorderEnable[e[o].side]=e[o].isBorderEnable,t.cropMark[e[o].side]=e[o].cropValue,t.safeZone[e[o].side]=e[o].safeValue,t.unitView[o]=e[o].scaleRatio_unit,t.isSidesAdded[e[o].side]=e[o].isSidesAdded,t.sidesAllowed[e[o].side]=e[o].sidesAllowed;if(1==a)for(var o=0;t.tempPrintSizeData.length>o;o++)t.tempPrintSizeData[o].is_transition=1;else for(var o=0;t.tempPrintSizeData.length>o;o++)t.tempPrintSizeData[o].is_transition=0;t.updateScaleUnit(t.sideIndex)},t.updateScaleUnit=function(){if(t.unitView[0]){for(var e=0;t.scaleUnitList.length>e;e++)if(t.scaleUnitList[e].id==parseInt(t.unitView[0])){t.selectedScaleUnit.name=t.scaleUnitList[e].name,t.selectedScaleUnit.id=t.scaleUnitList[e].id;break}}else for(var e=0;t.scaleUnitList.length>e;e++)if(t.scaleUnitList[e].name.toUpperCase()==t.productUnit.toUpperCase()){t.selectedScaleUnit.name=t.scaleUnitList[e].name,t.selectedScaleUnit.id=t.scaleUnitList[e].id;break}for(var e=0;t.unitView.length>e;e++)t.unitView[e]=t.selectedScaleUnit.id;t.productUnit=t.selectedScaleUnit.name},t.selectedUnit=function(e,a){if(t.maskDimesion=1==t.scaleUnitList[e].id?.011112:2==t.scaleUnitList[e].id?.02822448:.2822448,a){t.selectedScaleUnit.name=t.scaleUnitList[e].name,t.selectedScaleUnit.id=t.scaleUnitList[e].id,t.productUnit=t.scaleUnitList[e].name;for(var o=0;t.unitView.length>o;o++)t.unitView[o]=t.scaleUnitList[e].id}t.getPrintArea(),"bound"==t.boundary.name&&t.updatePrintSize(t.sideIndex)},t.getWidth=function(e,a){return""!=t.tempMaskData[a].mask.path&&""!=e?(t.getMaskScaleHeightWidth(t.tempMaskData,a),t.maskUploadWidth[a]=(parseFloat(t.maskUserDefineHeightWidth.height)*t.aspectRatio).toFixed(2)):t.maskUploadWidth[a]=0,e},t.getHeight=function(e,a){return""!=t.tempMaskData[a].mask.path&&""!=e?(t.getMaskScaleHeightWidth(t.tempMaskData,a),t.maskUploadHeight[a]=parseFloat(t.maskUserDefineHeightWidth.width)*(1/t.aspectRatio).toFixed(2)):t.maskUploadHeight[a]=0,e},t.getMaskScaleHeightWidth=function(e,a){t.maskHeightWidth={},t.maskUserDefineHeightWidth={},t.aspectRatio=0,""!=e[a].mask.path&&(t.maskHeightWidth=Raphael.pathBBox(e[a].mask.path),t.maskUserDefineHeightWidth={height:parseFloat(t.maskUploadHeight[a]),width:parseFloat(t.maskUploadWidth[a])},parseFloat(t.maskHeightWidth.width)>0&&parseFloat(t.maskHeightWidth.height)>0&&(t.aspectRatio=parseFloat(t.maskHeightWidth.width)/parseFloat(t.maskHeightWidth.height)))},t.getMaskAndUserDefineData=function(e){if(t.tempMaskHeightWidth=[],t.tempMaskUserDefineHeightWidth=[],""!=e[0].mask.path)for(var a=0;e.length>a;a++)t.tempMaskHeightWidth.push(Raphael.pathBBox(e[a].mask.path)),t.tempMaskUserDefineHeightWidth.push({height:parseFloat(t.maskUploadHeight[a]),width:parseFloat(t.maskUploadWidth[a])})},t.getMaskScaleRatio=function(e){if(t.wRatio=[],t.hRatio=[],t.scaleRatio=[],""!=e[0].mask.path&&"bound"!=t.boundary.name){t.getMaskAndUserDefineData(e);for(var a,o,r=0;e.length>r;r++)t.tempMaskUserDefineHeightWidth[r].width>0&&t.tempMaskUserDefineHeightWidth[r].height>0?(a=t.maskDimesion*t.tempMaskHeightWidth[r].height,o=t.maskDimesion*t.tempMaskHeightWidth[r].width,t.hRatio.push(parseFloat(t.tempMaskUserDefineHeightWidth[r].height)/parseFloat(a)),t.wRatio.push(parseFloat(t.tempMaskUserDefineHeightWidth[r].width)/parseFloat(o)),t.scaleRatio.push(Math.min(t.hRatio[r],t.wRatio[r]))):(t.hRatio.push(1),t.wRatio.push(1),t.scaleRatio.push(1))}else for(var r=0;e.length>r;r++)t.hRatio.push(1),t.wRatio.push(1),t.scaleRatio.push(1)},t.saveMaskBoundary=function(e){if(1==t.demoStatus)t.$emit(s.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else{var a=t.printAreaType.unit_id,r=t.printAreaType.maxWidth,i=t.printAreaType.maxHeight,n=t.printAreaType.pricePerUnit,d=!1;if(d=J(),maskboundsJson=JSON.stringify(t.originalMaskData),multiboundsJson=JSON.stringify(t.multiBoundData),k&&d&&w){if(t.isVariableAreaDimention.status){for(var l=0;t.maskUploadPrice.length>l;l++)void 0==t.maskUploadPrice[l]&&(t.maskUploadPrice[l]="0.00");t.getMaskScaleRatio(t.originalMaskData),o.savePrintSizes(t.pId,t.tempPrintSizeData),o.saveMaskBoundsData(t.pId,maskboundsJson,L,P,A,O,a,n,r,i,t.maskUploadWidth,t.maskUploadHeight,t.maskUploadPrice,t.scaleRatio,t.unitView,t.isBorderEnable[0],t.isSidesAdded[0],D,multiboundsJson).then(function(a){"success"==a.data.status?(t.tempMaskData=angular.copy(t.originalMaskData),0==e?t.$emit(s.SHOW_NOTIFICATION,{message:"save your boundry",type:"success"}):t.$emit(s.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):t.$emit(s.SHOW_NOTIFICATION,{message:"Mask failed to save",type:"info"})}),e&&(t.templateTempId!=t.selectedTemplateId&&t.saveProductTemplate(),"multipleBoundary"!=t.boundary.name&&t.savePrintMethod())}}else t.$emit(s.SHOW_NOTIFICATION,{message:"Set boundary for all",type:"info"})}},t.openCustomSizeSetting=function(){t.getPrintArea();var e=$("#customPrintSizeModal");$("#customPrintSizeModal").modal("show"),e.children(".modal-dialog").addClass("modal-lg")};var R=function(){t.sizeAdditionalPrice=m.createSizePriceJson(t.data,t.prntMethodByProduct,t.tempSizeVariantPrices)},W=function(){t.additionalPrice=p.createColorPriceJson(t.variants,t.prntMethodByProduct,t.tempadditionalPrice)};t.updateAdditionalPrice=function(){1==t.demoStatus?t.$emit(s.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"info"}):o.saveAdditionalPrice(t.pId,t.additionalPrice).then(function(e){"success"==e.data.status?(t.tempadditionalPrice=t.additionalPrice,t.$emit(s.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):t.$emit(s.SHOW_NOTIFICATION,{message:"Error in server",type:"info"})})};var B=function(){angular.forEach(t.allPrintMethod,function(e,a){t.prntMethodByProduct.length>0?(e.status=!1,e.fetched_from="Product",angular.forEach(t.prntMethodByProduct,function(o){e.name==o.name&&(t.allPrintMethod[a].status=!0,t.allPrintMethod[a].fetched_from=o.fetched_from)})):e.status=!1}),t.printMthdList1=[],t.printMthdList2=[];var e=t.allPrintMethod.length/2;(""+e).indexOf(".")&&(e+=.5),t.printMthdList1=t.allPrintMethod.slice(0,e),t.printMthdList2=t.allPrintMethod.slice(e),t.printMthdStatus=[];for(var a=0;t.allPrintMethod.length>a;a++)t.printMthdStatus.push(t.allPrintMethod[a].status)};t.changePrintMethod=function(e,a){var o=t.allPrintMethod.indexOf(a);t.printMthdStatus[o]=e},t.savePrintMethod=function(){if(1==t.demoStatus);else{var e=[];angular.forEach(t.printMthdStatus,function(a,o){1==a&&t.allPrintMethod[o]&&e.push(t.allPrintMethod[o].id)}),o.saveproductPrintMethod(t.pId,e).then(function(e){"success"==e.data.status&&(t.prntMethodByProduct=[],angular.forEach(t.allPrintMethod,function(e,a){1==t.printMthdStatus[a]&&(e.print_method_id=e.id,t.prntMethodByProduct.push(e))}))})}},t.loadVariantsData=function(){o.loadVariants(t.pId).then(function(e){t.variants=e.data.variants,t.variantColors=[],t.variantColorUrl=[],t.isSizeExits=!1;for(var a=0;t.variants.length>a;a++){var o=t.variants[a].xeColor,r=t.variants[a].colorUrl,i=o.substring(o.indexOf("_")+1);o.indexOf("#")>-1?(t.variantColors.push(i),t.variants[a].xeColor=i):t.variantColorUrl.push(r),""!=t.variants[a].xe_size_id&&(t.isSizeExits=!0)}W()})},t.loadSizeQuantityData=function(){t.data=[],o.getSizeAndQuantities(t.pId,t.simpleProductId).then(function(e){t.productLoad=!1;for(var a=0;e.data.quantities.length>a;a++)t.data.push(e.data.quantities[a]);R()})},t.selectTransitionStatus=function(e){if(e)for(var a=0;t.tempPrintSizeData.length>a;a++)t.tempPrintSizeData[a].is_transition=1;else for(var a=0;t.tempPrintSizeData.length>a;a++)t.tempPrintSizeData[a].is_transition=0},t.getPrintArea=function(){t.printSizeListDefault=angular.copy(c.getPrintSizeData()),"mm"==t.productUnit?t.printSizeListDefault=f.inchToMM(t.printSizeListDefault,"height","width"):"cm"==t.productUnit?t.printSizeListDefault=f.inchToCM(t.printSizeListDefault,"height","width"):"ft"==t.productUnit&&(t.printSizeListDefault=f.inchToFT(t.printSizeListDefault,"height","width"))},t.getPrintSizeToUpdate=function(){var e="mm",a="cm",o="ft";return t.printSizes=angular.copy(t.printSizeListDefault),t.productUnit.toUpperCase()==e.toUpperCase()?(t.printSizes=f.mmToInch(t.printSizes,"height","width"),!0):t.productUnit.toUpperCase()==a.toUpperCase()?(t.printSizes=f.cmToInch(t.printSizes,"height","width"),!0):t.productUnit.toUpperCase()==o.toUpperCase()?(t.printSizes=f.ftToInch(t.printSizes,"height","width"),!0):!0},t.updateCustomSize=function(){if(t.printSizes=[],t.demoStatus)t.$emit(s.SHOW_SIZE_NOTIFICATION,{message:"Demo Mode Active",type:"danger"});else{var e=t.getPrintSizeToUpdate(),a=K();t.$emit(s.SHOW_HIDE_PRELOADER,"#print_area",!0),t.printSizes.length>0?e&&a?o.updatePrintArea(t.printSizes).then(function(e){t.$emit(s.SHOW_HIDE_PRELOADER,"#print_area",!1),(e.statusText="OK")?(t.cancelPrintAreaList(),c.setPrintSizeData(e.data),t.getPrintArea(),t.printSizeList=angular.copy(c.getPrintSizeData()),t.$emit(s.SHOW_SIZE_NOTIFICATION,{message:"Saved successfully",type:"success"})):t.$emit(s.SHOW_SIZE_NOTIFICATION,{message:"Error in server",type:"danger"})}):t.$emit(s.SHOW_SIZE_NOTIFICATION,{message:"Please enter all the field",type:"info"}):t.$emit(s.SHOW_SIZE_NOTIFICATION,{message:"No Custom PrintArea to Save",type:"danger"})}},t.closebtnClick=function(e){if(t.demoStatus)t.$emit(s.SHOW_SIZE_NOTIFICATION,{message:"Demo Mode Active",type:"danger"});else{t.printAreaIndex=e;var a="printarea delete";t.$emit(s.SHOW_PRODUCT_WARNING_MODAL,"printArea",a)}},a.$on(s.PRODUCT_WARNING_MODAL_CONFIRM,function(e,a){"printArea"==a&&o.deletePrintArea(t.printSizeListDefault[t.printAreaIndex].id).then(function(e){e.data&&(t.cancelPrintAreaList(),c.setPrintSizeData(e.data),t.getPrintArea(),t.setPrintSizeList(),t.updatePrintSize(t.sideIndex),t.$emit(s.SHOW_SIZE_NOTIFICATION,{message:"Delete Successfully",type:"success"}))})}),t.cancelPrintAreaList=function(){t.custom={height:"",weight:""},t.print.sizeName="",t.addNewSize.status=!1},t.updateVariantPrice=function(){1==t.demoStatus?t.$emit(s.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"info"}):o.saveSizeAdditionalPrice(t.pId,t.sizeAdditionalPrice).then(function(e){e.data?(t.tempSizeVariantPrices=[],t.tempSizeVariantPrices=e.data,R(),t.$emit(s.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):t.$emit(s.SHOW_NOTIFICATION,{message:"Error in server",type:"info"})})},t.searchProductOnKeyUp=function(e){(!e.length||e.length>=3)&&(t.searchStr=e,t.showNoResultMsg=!1,t.isLoadMore=!1,I=1,n.setStartIndex(I),n.setSearchString(t.searchStr),n.resetProductList(),N(!0))},$("#searchId").keyup(function(e){13==e.keyCode&&$("#searchBtn").click()}),t.borderEnabled=function(e,a){t.isBorderEnable[a]=1==e?"1":"0"},t.changeCropMark=function(e){for(var a=0;v>a;a++)t.tempMaskData[a].is_cropMark=1==e?"1":"0"},t.changeSafeZone=function(e){for(var a=0;v>a;a++)t.tempMaskData[a].is_safeZone=1==e?"1":"0"},t.openCustomMaskSetting=function(){t.CustoMask=[],t.clearMaskInfo();var e=$("#customMaskModal");$("#customMaskModal").modal("show"),e.children(".modal-dialog").addClass("modal-lg")},t.customUpload=function(e){t.uploadCustomMask={data:"",isMask:!1};var a=["svg"];if(e&&e.length){for(var o=0;e.length>o;o++)var i=e[o];var n=i.name.replace(/.*\./,"").toLowerCase();if(a.indexOf(n)>=0){var d=new FileReader;d.onload=function(e){r(function(){t.uploadCustomMask.isMask=!0,t.uploadCustomMask.data=e.target.result;var a=e.target.result,o=a.indexOf("base64");t.uploadBase64Svg=a.substring(o+7);var r=atob(t.uploadBase64Svg),i=C.svgStringToPath(r);if(r){var n=$.parseXML(r),s=$(n).find("svg"),d=s[0].getElementsByTagName("path"),l=d[0]?d[0].getBBox():"";svgH=l?parseFloat(l.height).toFixed(2):0,svgW=l?parseFloat(l.width).toFixed(2):0,t.CustoMask.height=svgH||0,t.CustoMask.width=svgW||0}1>=i.pathCount?t.uploadMaskPath=i.fullpath:(i.multiPath=i.multiPath.replace(/\#$/,""),t.uploadMaskPath=i.multiPath)})},d.readAsDataURL(i)}else t.$emit(s.SHOW_MASK_NOTIFICATION,{message:"Invalid File Format",type:"info"})}},t.getBase64=function(a){e.get(a).then(function(e){t.setDropdownMaskData(e.data)})},t.setDropdownMaskData=function(e){var a=C.svgStringToPath(e);1>=a.pathCount?t.tempMaskData[t.sideIndex].mask.path="mask"==t.boundary.name?a.fullpath:a.fullpath:(a.multiPath=a.multiPath.replace(/\#$/,""),t.tempMaskData[t.sideIndex].mask.path="mask"==t.boundary.name?a.multiPath:a.multiPath),t.tempMaskData[t.sideIndex].mask_name=t.selectedMaskName,t.tempMaskData[t.sideIndex].mask_id=t.loadId,t.drawBoundary()},t.checkName=function(){if(t.allCustomMaskData.length>0){for(var e=0;t.allCustomMaskData.length>e;e++)if(t.allCustomMaskData[e].name==t.maskName)return t.$emit(s.SHOW_MASK_NOTIFICATION,{message:"Mask Already Exist",type:"info"}),!1;return!0}return!0},t.clearMaskInfo=function(){t.getMaskSize(),t.uploadBase64Svg=[],t.CustoMask={width:0,height:0,name:"",price:"0.00"},t.uploadCustomMask={data:"",isMask:!1},t.addNewMask={status:!1}},t.saveCustomMask=function(e){if(1==t.demoStatus)t.$emit(s.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"info"});else{t.customMaskData=[],t.maskName=e.name,t.maskHeight=e.height,t.maskWidth=e.width,t.maskPrice=e.price,t.customMaskData=t.uploadBase64Svg;var a=t.checkName();a&&(""!=t.maskName&&void 0!=t.maskName?void 0!=t.customMaskData&&""!=t.customMaskData?(t.saveMaskButton=!0,o.saveMaskData(t.maskName,t.customMaskData,t.maskHeight,t.maskWidth,t.maskPrice).then(function(e){e.data&&(t.clearMaskInfo(),n.setMaskList(e.data),t.getMaskSize(),t.saveMaskButton=!1,t.$emit(s.SHOW_MASK_NOTIFICATION,{message:"Saved Successfully",type:"success"}))})):t.$emit(s.SHOW_MASK_NOTIFICATION,{message:"Please Upload Mask",type:"info"}):t.$emit(s.SHOW_MASK_NOTIFICATION,{message:"Please Enter Name",type:"info"}))}},t.selectMaskSize=function(e,a){data=n.getMaskList(),t.loadId=e.id,t.selectedMaskName=e.name,t.url=e.url,t.actualWidth=data[a].maskwidth,t.actualHeight=data[a].maskheight,t.maskUploadHeight[t.sideIndex]=data[a].maskheight,t.maskUploadWidth[t.sideIndex]=data[a].maskwidth,t.maskUploadPrice[t.sideIndex]=e.price,t.productMaskId[t.sideIndex]=e.id,t.tempMaskData[t.sideIndex].mask_width=data[a].maskwidth,t.tempMaskData[t.sideIndex].mask_height=data[a].maskheight,t.getBase64(t.url)},t.deleteMaskById=function(e){if(1==t.demoStatus)t.$emit(s.SHOW_MASK_NOTIFICATION,{message:"Demo Mode Active",type:"info"});else{t.maskIndex=e;var a="mask delete";t.$emit(s.SHOW_PRODUCT_WARNING_MODAL,"mask",a)}},a.$on(s.PRODUCT_WARNING_MODAL_CONFIRM,function(e,a){try{"mask"==a&&o.deleteCustomMaskData(t.allCustomMaskData[t.maskIndex].id).then(function(e){e.data&&(t.selectedMaskName==t.allCustomMaskData[t.maskIndex].name&&(t.selectedMaskName=i.translateText("Printing Masks")),t.$emit(s.SHOW_MASK_NOTIFICATION,{message:"Delete Successfully",type:"success"}),n.setMaskList(e.data),t.getMaskSize())})}catch(r){console.log()}}),a.$on(s.CUSTOM_MASK_LIST_LOADED,function(){t.allCustomMaskData=n.getMaskList()}),t.sortProductList=function(e){t.predicate=e,t.reverse=t.predicate===e?!t.reverse:!1,t.productList=T(t.productList,e,t.reverse)},t.applyWhiteBasePrice=function(e,a,o){t.additionalPrice[e].price[a].is_whitebase=1==o?"1":"0"},t.updateColorWhitebaseData=function(){1==t.demoStatus?t.$emit(s.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"info"}):o.saveAdditionalPrice(t.pId,t.additionalPrice).then(function(e){"success"==e.data.status?(t.tempadditionalPrice=t.additionalPrice,t.$emit(s.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):t.$emit(s.SHOW_NOTIFICATION,{message:"Error in server",type:"info"})})},t.getMaskHeight=function(e){return V(),t.CustoMask.height=parseFloat(parseFloat(e)*(1/t.aRatio)).toFixed(2),e},t.getMaskWidth=function(e){return V(),t.CustoMask.width=parseFloat(parseFloat(e)*t.aRatio).toFixed(2),e};var V=function(){if(""!=t.uploadMaskPath){var e=Raphael.pathBBox(t.uploadMaskPath);parseFloat(e.width)>0&&parseFloat(e.height)>0&&(t.aRatio=parseFloat(e.width)/parseFloat(e.height))}};t.getEditMaskHeight=function(e,a){var o=0;return z(a),r(function(){o=H(),t.allCustomMaskData[a].maskheight=parseFloat(parseFloat(e)*(1/o)).toFixed(2)},1e3),e},t.getEditMaskWidth=function(e,a){var o=0;return z(a),r(function(){o=H(),t.allCustomMaskData[a].maskwidth=parseFloat(parseFloat(e)*o).toFixed(2)},1e3),e};var H=function(e){if(""!=e){var a=Raphael.pathBBox(t.editMaskPath);if(parseFloat(a.width)>0&&parseFloat(a.height)>0){var o=parseFloat(a.width)/parseFloat(a.height);return o}}},z=function(a){e.get(t.allCustomMaskData[a].url).then(function(e){G(e.data)})},G=function(e){var a=e,o="",r="",i=new DOMParser,n=i.parseFromString(a,"text/xml"),s=0;$(n).find("path").each(function(){o+=$(this).attr("d"),r+=$(this).attr("d")+"#",s++}),1>=s?t.editMaskPath=o:(r=r.replace(/\#$/,""),t.editMaskPath=r)};t.getMaskSize=function(){t.allCustomMaskData=angular.copy(n.getMaskList())},t.updateCustomMask=function(){if(1==t.demoStatus)t.$emit(s.SHOW_MASK_NOTIFICATION,{message:"Demo Mode Active",type:"info"});else{var e=q();e?o.updateCustoMask(t.allCustomMaskData).then(function(e){e.data instanceof Array&&(t.clearMaskInfo(),n.setMaskList(e.data),t.getMaskSize(),t.$emit(s.SHOW_MASK_NOTIFICATION,{message:"Saved successfully",type:"success"}))}):t.$emit(s.SHOW_MASK_NOTIFICATION,{message:"Please enter all the field",type:"info"})}};var q=function(){var e=t.allCustomMaskData.length;if(e>0)for(var a=0;e>a;a++)if(""==t.allCustomMaskData[a].name||0==parseFloat(t.allCustomMaskData[a].maskwidth)||0==parseFloat(t.allCustomMaskData[a].maskheight))return!1;
return!0},K=function(){var e=t.printSizes.length;if(e>0)for(var a=0;e>a;a++)if(0==parseFloat(t.printSizes[a].width)||0==parseFloat(t.printSizes[a].height))return!1;return!0},j=function(){t.selectedMaskName=i.translateText("Printing Masks");var e=t.allCustomMaskData.length;if(e>0)for(var a=0;e>a;a++)if(t.allCustomMaskData[a].id==t.tempMaskData[t.sideIndex].mask_id){var o=t.allCustomMaskData[a].maskwidth,r=t.allCustomMaskData[a].maskheight;t.selectedMaskName=t.tempMaskData[t.sideIndex].mask_name,t.originalMaskData[t.sideIndex].mask_width=o,t.originalMaskData[t.sideIndex].mask_height=r,t.actualWidth=o,t.actualHeight=r;break}};t.getProductInfoPop=function(e){var t=e.length;return t>67?"mouseenter":"none"},t.assignProductTemplate=function(e){t.noTemplate=!1,t.selectedTemplate=t.productTemplateDetails[e].name,t.selectedTemplateId=t.productTemplateDetails[e].product_temp_id,t.selectedTemplateIndex=e},t.saveProductTemplate=function(e){1==t.demoStatus?t.$emit(s.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"info"}):(t.templateStatus=!0,o.saveProductTemplate(t.pId,t.selectedTemplateId).then(function(a){a.data?(n.setProductData(a.data),X(),t.templateStatus=!1,"true"==e&&$("#assignTemplateModal").modal("hide")):t.templateStatus=!1}))};var Y=function(){t.noTemplate=!1,t.productTemplateDetails=[],t.selectedTemplateId=0,t.templateTempId=0,o.loadProductTemplates().then(function(e){if(e.data.product_templist instanceof Array){var a=e.data.product_templist.length;t.productTemplateDetails.push({product_temp_id:0,name:i.translateText("No Template")});for(var o=0;a>o;o++)t.productTemplateDetails.push(e.data.product_templist[o]);for(var a=t.productTemplateDetails.length,o=0;a>o;o++)n.getTemplateId()==t.productTemplateDetails[o].product_temp_id&&(t.selectedTemplate=t.productTemplateDetails[o].name,t.selectedTemplateId=t.productTemplateDetails[o].product_temp_id,t.selectedTemplateIndex=o,t.templateTempId=angular.copy(t.productTemplateDetails[o].product_temp_id));t.templateStatus=!1,0==t.selectedTemplateId&&(t.noTemplate=!0)}})},X=function(){t.tabModel="boundary",t.selectedThumbIndex=t.sideIndex,t.initCanvas(t.sideIndex)};t.createTemplate=function(){if(t.prntMethodByProduct.length>0)if("dev"==RIAXEAPP.localSettings.enviroment||"opencart"==RIAXEAPP.localSettings.store_type){var e=a.baseUrl+"designer-tool/designer-app/index.html";Z(e)}else if("prestashop"==RIAXEAPP.localSettings.store_type||"prestashop17"==RIAXEAPP.localSettings.store_type)o.getCmsPageIdPshop().then(function(e){var t=e.data,o=a.baseUrl+"content/"+t+"-designer-tool";Z(o)});else{var e=a.baseUrl+"product-designer";Z(e)}else t.$emit(s.SHOW_NOTIFICATION,{message:"Please select at least one print method",type:"info"})};var Z=function(e){for(var a=[],o=0;t.prntMethodByProduct.length>o;o++)a.push(t.prntMethodByProduct[o].print_method_id);a=a.join(),g.open(e+"?pid="+t.pId+"&pt="+a+"&pdp=1","_blank")};t.enableBleed=function(e){if(e)t.isBleedMark=!0;else{for(var a=0;v>a;a++)t.tempMaskData[a].is_cropMark="0",t.tempMaskData[a].is_safeZone="0";t.isBleedMark=!1}},t.onPositionChange=function(e){var a=t.canvas.top.attrs;t.canvas&&("l"==e?a.x-=1:"t"==e?a.y-=1:"r"==e?a.x+=1:"b"==e&&(a.y+=1),t.drawBoundary(),F(a))},t.setCropValue=function(e){for(var a=0;v>a;a++)t.tempMaskData[a].cropValue=e},t.setSafeValue=function(e){for(var a=0;v>a;a++)t.tempMaskData[a].safeValue=e},t.exchangeSize=function(){var e=t.tempMaskData[t.selectedThumbIndex].bounds.boundwidth;t.tempMaskData[t.selectedThumbIndex].bounds.boundwidth=t.tempMaskData[t.selectedThumbIndex].bounds.boundheight,t.tempMaskData[t.selectedThumbIndex].bounds.boundheight=e,t.drawBoundary()};var J=function(){return A=!1,L=!1,P=!1,O=!1,D=!1,w=!0,k=!0,t.isVariableAreaDimention={status:!0,keyField:""},angular.forEach(t.originalMaskData,function(e,a){if("mask"==t.boundary.name)k&&(k=""!=t.tempMaskData[a].mask.path&&null!=t.tempMaskData[a].mask.path&&t.tempMaskData[a].mask_id>0?!0:!1),L=!0,e.mask.path=t.tempMaskData[a].mask.path,e.mask.left=t.tempMaskData[a].mask.left,e.mask.top=t.tempMaskData[a].mask.top,e.mask.height=t.tempMaskData[a].mask.height,e.mask.width=t.tempMaskData[a].mask.width;else if("bound"==t.boundary.name)k&&(k=t.tempMaskData[a].bounds.boundwidth>0&&t.tempMaskData[a].bounds.boundheight>0&&t.tempPrintSizeData[a].size?!0:!1),P=!0,e.bounds.boundwidth=parseFloat(t.tempMaskData[a].bounds.boundwidth),e.bounds.boundheight=parseFloat(t.tempMaskData[a].bounds.boundheight),e.bounds.boundx=t.tempMaskData[a].bounds.boundx,e.bounds.boundy=t.tempMaskData[a].bounds.boundy;else if("variableMask"==t.boundary.name)t.isVariableAreaDimention.status&&(t.isVariableAreaDimention=h.validateDimension(t.tempMaskData[a].custom_mask.height,t.tempMaskData[a].custom_mask.width,t.tempMaskData[a].custom_max_height_mask,t.tempMaskData[a].custom_max_width_mask,t.tempMaskData[a].custom_min_height_mask,t.tempMaskData[a].custom_min_width_mask)),O=!0,e.custom_mask.left=t.tempMaskData[a].custom_mask.left,e.custom_mask.top=t.tempMaskData[a].custom_mask.top,e.custom_mask.height=t.tempMaskData[a].custom_mask.height,e.custom_mask.width=t.tempMaskData[a].custom_mask.width,e.custom_min_height_mask=t.tempMaskData[a].custom_min_height_mask,e.custom_min_width_mask=t.tempMaskData[a].custom_min_width_mask,e.custom_max_height_mask=t.tempMaskData[a].custom_max_height_mask,e.custom_max_width_mask=t.tempMaskData[a].custom_max_width_mask,e.custom_boundary_price=t.tempMaskData[a].custom_boundary_price,e.custom_mask.path=e.mask.path=t.tempMaskData[a].mask.path,e.isSidesAdded=t.isSidesAdded[a],e.sidesAllowed=t.sidesAllowed[a];else if("customBoundry"==t.boundary.name)t.isVariableAreaDimention.status&&(t.isVariableAreaDimention=h.validateDimension(t.tempMaskData[a].customsize.height,t.tempMaskData[a].customsize.width,t.tempMaskData[a].custom_max_height,t.tempMaskData[a].custom_max_width,t.tempMaskData[a].custom_min_height,t.tempMaskData[a].custom_min_width)),k=!0,A=!0,e.customsize.left=t.tempMaskData[a].customsize.left,e.customsize.top=t.tempMaskData[a].customsize.top,e.customsize.height=t.tempMaskData[a].customsize.height,e.customsize.width=t.tempMaskData[a].customsize.width,e.custom_min_height=t.tempMaskData[a].custom_min_height,e.custom_min_width=t.tempMaskData[a].custom_min_width,e.custom_max_height=t.tempMaskData[a].custom_max_height,e.custom_max_width=t.tempMaskData[a].custom_max_width,e.custom_boundary_price=t.tempMaskData[a].custom_boundary_price,e.isBorderEnable=t.isBorderEnable[a],e.isSidesAdded=t.isSidesAdded[a],e.sidesAllowed=t.sidesAllowed[a];else if("multipleBoundary"==t.boundary.name){if(k=""!=t.multiBoundData[a].svg?!0:!1,D=!0,w)for(var o=t.multiBoundData[a].child_masks.length,r=0;o>r;r++){if(!(t.multiBoundData[a].name&&t.multiBoundData[a].child_masks[r].boundary_name&&t.multiBoundData[a].child_masks[r].print_methods.length>0)){w=!1;break}w=!0}t.multiBoundData[a].scaleRatio_unit=t.selectedScaleUnit.id}e.is_cropMark=t.tempMaskData[a].is_cropMark,e.is_safeZone=t.tempMaskData[a].is_safeZone,e.cropValue=t.tempMaskData[a].cropValue,e.safeValue=t.tempMaskData[a].safeValue,e.scaleRatio_unit=t.selectedScaleUnit.id,e.mask_width=t.tempMaskData[a].mask_width,e.mask_height=t.tempMaskData[a].mask_height,e.mask_id=t.tempMaskData[a].mask_id,e.mask_name=t.tempMaskData[a].mask_name}),!0};t.enableTemplate=function(e){t.tstatus=e?!0:!1},t.selectedMultipleArea="Select",t.multiBoundaryList=[],t.restric=[],t.boundaryPrintMethod="Assign print method",t.allBoundary=[];var Q=0,et=0;t.uploadSvg=function(e){var a=["svg"];if(e&&e.length){for(var o=0;e.length>o;o++)var i=e[o];var n=i.name.replace(/.*\./,"").toLowerCase();if(a.indexOf(n)>=0){var d=new FileReader;d.onload=function(e){r(function(){var a=e.target.result,o=a.indexOf("base64");t.uploadBase64Svg=a.substring(o+7);var r=atob(t.uploadBase64Svg);t.restric=[],t.multiBoundData[t.sideIndex].child_masks=[],tt(r,!0)})},d.readAsDataURL(i)}else t.$emit(s.SHOW_MASK_NOTIFICATION,{message:"Invalid File Format",type:"info"})}};var tt=function(e,a){if(U(),e){xmlDoc=$.parseXML(e),$xml=$(xmlDoc),t.svgElement=$xml.find("svg"),Q=parseFloat($xml.find("svg").attr("x")),et=parseFloat($xml.find("svg").attr("y")),t.allBoundary=$xml.find("g").children();var o=$xml.find("g").children().length;t.activeElement=t.canvas.set(),t.bIndex=0;for(var r=0;o>r;r++){if("rect"==t.allBoundary[r].nodeName)var i=$(t.allBoundary[r]).attr("x"),n=$(t.allBoundary[r]).attr("y"),s=$(t.allBoundary[r]).attr("width"),d=$(t.allBoundary[r]).attr("height"),l=t.canvas.rect(i,n,s,d).attr({fill:"#ffffff",stroke:"black","fill-opacity":0});else if("path"==t.allBoundary[r].nodeName)var c=$(t.allBoundary[r]).attr("d"),l=t.canvas.path(c).attr({fill:"#ffffff",stroke:"black","fill-opacity":0});l.translate(Q,et),t.activeElement.push(l),t.activeElement.hover(function(e){e.currentTarget.style.cursor="move"}),a&&t.multiBoundData[t.sideIndex].child_masks.push({boundary_name:"",print_methods:[],restrict_design:"0"})}t.multiBoundData[t.sideIndex].svg=e,ot(),at()}},at=function(){var e=function(){t.activeElement.oBB=t.activeElement.getBBox()},a=function(e,a){var o=t.activeElement.getBBox();t.activeElement.translate(t.activeElement.oBB.x-o.x+e,t.activeElement.oBB.y-o.y+a),Q=t.activeElement[0].matrix.e,et=t.activeElement[0].matrix.f},o=function(){t.svgElement.attr("x",Q),t.svgElement.attr("y",et),F(t.svgElement[0])};t.activeElement.drag(a,e,o)};t.changeSubBoundary=function(e){e>-1&&t.allBoundary.length>e&&(t.bIndex=e,ot())};var ot=function(){t.displayCanvas&&t.displayCanvas.clear(),document.getElementById("xe_display_only").innerHTML="";var e=document.getElementById("xe_display_only");if(t.displayCanvas=Raphael(e,200,200,0,0),"rect"==t.allBoundary[t.bIndex].nodeName){var a=$(t.allBoundary[t.bIndex]).attr("width"),o=$(t.allBoundary[t.bIndex]).attr("height"),r=o/a;t.mAratio=r,t.multiBoundData[t.sideIndex].child_masks[t.bIndex].actual_width=parseFloat(a).toFixed(2),t.multiBoundData[t.sideIndex].child_masks[t.bIndex].actual_height=parseFloat(o).toFixed(2),a>o?(a=150,o=a*r):(o=150,a=o/r),t.displayCanvas.rect(25,25,a,o).attr({fill:"#ffffff",stroke:"black","fill-opacity":0})}else if("path"==t.allBoundary[t.bIndex].nodeName){var i=$(t.allBoundary[t.bIndex]).attr("d"),n=Raphael.pathBBox(i),a=n.width,o=n.height;if(t.mAratio=o/a,t.multiBoundData[t.sideIndex].child_masks[t.bIndex].actual_width=a.toFixed(2),t.multiBoundData[t.sideIndex].child_masks[t.bIndex].actual_height=o.toFixed(2),a>150){var r=150/a;a*=r,o*=r}else{var r=150/o;a*=r,o*=r}i=Raphael.transformPath(i,"t"+-n.x+","+-n.y),i=Raphael.transformPath(i,"s"+a/n.width+","+a/n.width+",0,0"),t.displayCanvas.path(i).attr({fill:"#ffffff",stroke:"black","fill-opacity":0})}for(var s=0;t.allBoundary.length>s;s++)t.activeElement[s].attr({stroke:"black","stroke-width":1});t.activeElement[t.bIndex].attr({stroke:"blue","stroke-width":3}),rt()};t.changeOnMBrestrictDesign=function(e){t.multiBoundData[t.sideIndex].child_masks[t.bIndex].restrict_design=e?"1":"0"},t.selectmultiBoundary=function(e){console.log(t.multiBoundaryList[e].svg),t.multiBoundData[t.sideIndex]=t.multiBoundaryList[e],t.selectedMultipleArea=t.multiBoundaryList[e].name,t.multiBoundData[t.sideIndex].id=t.multiBoundaryList[e].id,tt(t.multiBoundaryList[e].svg,!1)},t.selectBoundaryPrintMethod=function(e){t.boundaryPrintMethod=t.allPrintMethod[e].name,t.multiBoundData[t.sideIndex].child_masks[t.bIndex].print_methods[0]=t.allPrintMethod[e].id};var rt=function(){t.boundaryPrintMethod="Assign print method";for(var e=t.allPrintMethod.length,a=t.multiBoundData[t.sideIndex].child_masks[t.bIndex].print_methods[0],o=0;e>o;o++)if(a==t.allPrintMethod[o].id){t.boundaryPrintMethod=t.allPrintMethod[o].name;break}};t.updateMaskdefaultDimesion=function(e){var a=0;a=it(),"h"==e?t.tempMaskData[t.sideIndex].custom_mask.height=(parseFloat(t.tempMaskData[t.sideIndex].custom_mask.width)*a).toFixed(2):"w"==e&&(t.tempMaskData[t.sideIndex].custom_mask.width=(parseFloat(t.tempMaskData[t.sideIndex].custom_mask.height)*(1/a)).toFixed(2)),t.drawBoundary()};var it=function(){var e=Raphael.pathBBox(t.tempMaskData[t.sideIndex].mask.path);if(parseFloat(e.width)>0&&parseFloat(e.height)>0){var a=parseFloat(e.width)/parseFloat(e.height);return a}};a.$on(s.MULTI_BOUNDARY_LIST_LOADED,function(){t.multiBoundaryList=n.getMultipleBoundaryList()}),t.enableAddSides=function(e){for(var a=t.tempMaskData.length,o=0;a>o;o++)t.isSidesAdded[o]="1"==e?1:0},t.sideValidate=function(e){e>10&&(e=0);for(var a=t.tempMaskData.length,o=0;a>o;o++)t.sidesAllowed[o]=e},t.setDefaultDimension=function(e,a){if("height"==a)for(var o=0;v>o;o++)t.tempMaskData[o].customsize.height=e;else if("width"==a)for(var o=0;v>o;o++)t.tempMaskData[o].customsize.width=e;t.drawBoundary()},t.setMinDimension=function(e,a){if("height"==a)for(var o=0;v>o;o++)t.tempMaskData[o].custom_min_height=e;else if("width"==a)for(var o=0;v>o;o++)t.tempMaskData[o].custom_min_width=e},t.setMaxDimension=function(e,a){if("height"==a)for(var o=0;v>o;o++)t.tempMaskData[o].custom_max_height=e;else if("width"==a)for(var o=0;v>o;o++)t.tempMaskData[o].custom_max_width=e},t.changeDimension=function(e){var a=angular.copy(t.multiBoundData[t.sideIndex].child_masks[t.bIndex].actual_height),o=angular.copy(t.multiBoundData[t.sideIndex].child_masks[t.bIndex].actual_width);"h"==e?t.multiBoundData[t.sideIndex].child_masks[t.bIndex].actual_width=parseFloat(a/t.mAratio).toFixed():"w"==e&&(t.multiBoundData[t.sideIndex].child_masks[t.bIndex].actual_height=parseFloat(o*t.mAratio).toFixed())}}]),angular.module("product").directive("rectangleSetting",function(){return{restrict:"E",link:function(e,t,a){e.getContentUrl=function(){return""!=a.container?"modules/product/views/partials/"+a.container+"_setting.html":void 0}},template:'<div ng-include="getContentUrl()"></div>'}}).directive("clickOut",["$document",function(){return{restrict:"A",link:function(e,t){$(document).bind("click",function(a){var o=t.find(a.target).length>0;o||e.$apply(function(){e.customDropDown.status=!1})})}}}]),angular.module("product").factory("ProductService",["$http","AppConfig","$rootScope","ProductModel",function(e,t,a,o){var r=t.API_KEY;return loadCategories=function(){var t=e.get(a.serviceAPI+"?reqmethod=getCategories&apikey="+encodeURIComponent(r)).success(function(e){o.setCategoryList(e)}).error(function(e){console.log("error load category List: ",e)});return t},loadProducts=function(t,i,n,s){var d=e.get(a.serviceAPI+"?reqmethod=getAllProducts&offset="+n+"&range="+t+"&searchstring="+s+"&categoryid="+i+"&loadVariants=true&preDecorated=true&apikey="+encodeURIComponent(r)).success(function(e){o.setProductList(e)}).error(function(e){console.log("error load product List: ",e)});return d},fetchPrintSizeList=function(){var t=e.get(a.serviceAPI+"?reqmethod=getSizeInfo&apikey="+encodeURIComponent(r));return t},loadProductDetails=function(t){e.get(a.serviceAPI+"?reqmethod=getSimpleProduct&id="+t+"&apikey="+encodeURIComponent(r)+"&confId="+t).success(function(e){o.setProductData(e)}).error(function(e){console.log("error load product by id : ",e)})},updateProductFeature=function(t,o,i){var n=$.param({apikey:r,reqmethod:"updateProductFeature",productId:t,featureIds:o,statusArray:i}),s=e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s},saveMaskBoundsData=function(t,o,i,n,s,d,l,c,u,g,p,m,f,h,C,S,y,I,_){o=encodeURIComponent((""+o).trim());var v=$.param({apikey:r,reqmethod:"saveMaskData",productid:t,jsondata:o,maskstatus:i,boundsstatus:n,customsizestatus:s,customMask:d,unitid:l,pricePerUnit:c,maxWidth:u,maxHeight:g,maskScaleHeight:m,maskScalewidth:p,maskPrice:f,scaleRatio:h,scaleRatio_unit:C,isSidesAdded:y,isBorderEnable:S,multiBoundStatus:I,multiple_boundary:_}),T=e({method:"POST",url:a.serviceAPI,data:v,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}});return T},saveMaskData=function(t,o,i,n,s){var d=$.param({apikey:r,reqmethod:"saveCustomMaskData",name:t,maskdata:o,maskheight:i,maskwidth:n,price:s}),l=e({method:"POST",url:a.serviceAPI,data:d,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return l},getAllMaskData=function(){var t=e.get(a.serviceAPI+"?reqmethod=fetchCustomMaskData").success(function(e){o.setMaskList(e)}).error(function(e){console.log("error load fetchCustomMaskData: ",e)});return t},deleteCustomMaskData=function(t){var o=e.get(a.serviceAPI+"?reqmethod=deleteCustomMaskData&mask_id="+t);return o},loadVariants=function(t){var o=e.get(a.serviceAPI+"?reqmethod=getVariants&conf_pid="+t+"&apikey="+encodeURIComponent(r));return o},getSizeAndQuantities=function(t,o){var i=e.get(a.serviceAPI+"?reqmethod=getSizeAndQuantity&productId="+t+"&simplePdctId="+o+"&apikey="+encodeURIComponent(r));return i},savePrintSizes=function(t,o){o=JSON.stringify(o);var i=e.get(a.serviceAPI+"?reqmethod=setDtgPrintSizesOfProductSides&productid="+t+"&printsizes="+o+"&apikey="+encodeURIComponent(r));return i},getProductFeatureList=function(){var t=e.get(a.serviceAPI+"?reqmethod=getProductFeatureList&apikey="+encodeURIComponent(r));return t},getTemplateList=function(t,o,r,i){var n=$.param({reqmethod:"getTemplateList",srtIndex:t,range:o,categoryId:r,subCategoryId:i}),s=e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s},getTemplateByProductId=function(t){var o=e.get(a.serviceAPI+"?reqmethod=getTemplateByProductId&productId="+t+"&apikey="+encodeURIComponent(r));return o},assignTemplatesToProduct=function(t,o){var i=e.get(a.serviceAPI+"?reqmethod=assignTemplatesToProduct&productId="+t+"&templateIds="+o+"&apikey="+encodeURIComponent(r));return i},activePrintMethod=function(){var t=e.get(a.serviceAPI+"?reqmethod=getAllPrintMethods&apikey="+encodeURIComponent(r));return t},saveproductPrintMethod=function(t,o){var i=e.get(a.serviceAPI+"?reqmethod=setProductPrintmethod&productId="+t+"&prntmethodid="+o+"&apikey="+encodeURIComponent(r));return i},getproductPrintMethod=function(t){var o=e.get(a.serviceAPI+"?reqmethod=getProductPrintMethod&productid="+t+"&apikey="+encodeURIComponent(r));return o},getPrintMethodByPCategory=function(t){var o=e.get(a.serviceAPI+"?reqmethod=getPrintMethodByProduct&isAdmin=true&pid="+t+"&apikey="+encodeURIComponent(r));return o},getAdditionalPrice=function(t){var o=e.get(a.serviceAPI+"?reqmethod=getProductAdditionalPrice&productid="+t+"&apikey="+encodeURIComponent(r));return o},saveAdditionalPrice=function(t,o){o=JSON.stringify(o);var i=$.param({apikey:r,reqmethod:"setProductAdditionalPrice",productid:t,variantDetails:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},saveCustomPrintSize=function(t,o,i,n){var s=$.param({apikey:r,reqmethod:"addNewPrintSize",name:t,height:o,width:i,is_user_defined:n}),d=e({method:"POST",url:a.serviceAPI,data:s,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return d},getColorList=function(){var t=e.get(a.serviceAPI+"?reqmethod=getColorArr&apikey="+encodeURIComponent(r)).success(function(e){o.setColorList(e)}).error(function(e){console.log("error load color List: ",e)});return t},getProductSizeList=function(){var t=e.get(a.serviceAPI+"?reqmethod=getSizeArr&apikey="+encodeURIComponent(r)).success(function(e){o.setProductSizeList(e)}).error(function(e){console.log("error load productSize List: ",e)});return t},saveProductDetails=function(t,o){var i={apikey:r,productData:o},n=t.image[0].fileObj;t.image[0].type;var s=new FormData;s.append("data",angular.toJson(i)),s.append("configFile",n);for(var d=0;t.variants.length>d;d++)for(var l=0;t.variants[d].imageArr.length>l;l++){var c=t.variants[d].imageArr[l].fileObj;t.variants[d].imageArr[l].type,s.append("simpleFile[]",c)}var u=e({method:"POST",url:a.serviceAPI+"?reqmethod=addProducts",data:s,headers:{"Content-Type":void 0},transformRequest:angular.identity});return u},updateProducVariant=function(t,o){var i={apikey:r,productData:o},n=new FormData;n.append("data",angular.toJson(i));for(var s=0;t.variants.length>s;s++)for(var d=0;t.variants[s].imageArr.length>d;d++){var l=t.variants[s].imageArr[d].fileObj;t.variants[s].imageArr[d].type,n.append("simpleFile[]",l)}var c=e({method:"POST",url:a.serviceAPI+"?reqmethod=addProducts",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity});return c},updatePrintArea=function(t){var o=$.param({apikey:r,reqmethod:"updatePrintSizeArea",print_size:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},deletePrintArea=function(t){var o=$.param({apikey:r,reqmethod:"deletePrintArea",printId:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},saveSizeAdditionalPrice=function(t,o){var i=$.param({apikey:r,reqmethod:"setSizeVariantAdditionalPrice",product_id:t,print_detail:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},checkDuplicateSku=function(t){var o=$.param({apikey:r,reqmethod:"checkDuplicateSku",sku_arr:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},setDefaultPrintArea=function(t){var o=$.param({apikey:r,reqmethod:"setBoundsGeneralSetting",bounds:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},saveBleedMark=function(t,o){var i=$.param({apikey:r,reqmethod:"updateBleed",productid:t,data:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},loadVariantList=function(t){var o=e.get(a.serviceAPI+"?reqmethod=getVariantList&conf_pid="+t+"&apikey="+encodeURIComponent(r));return o},fetchProductDiscountList=function(){var t=e.get(a.serviceAPI+"?reqmethod=fetchDiscountData&apikey="+encodeURIComponent(r));return t},saveProductDiscount=function(t,o){var i=$.param({apikey:r,reqmethod:"addDiscountToProduct",pid:t,discount:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},updateCustoMask=function(t){var o=$.param({apikey:r,reqmethod:"updateCustomMaskData",customMaskList:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},loadProductTemplates=function(){var t=e.get(a.serviceAPI+"?reqmethod=getProductTempList&apikey="+encodeURIComponent(r)+"&start=0&productTempId=100");return t},saveProductTemplate=function(t,o){var i=e.get(a.serviceAPI+"?reqmethod=addTemplateToProduct&apiKey="+encodeURIComponent(r)+"&pid="+t+"&productTempId="+o);return i},getCustomBoundaryUnit=function(){var t=e.get(a.serviceAPI+"?reqmethod=getCustomBoundaryUnit&apikey="+encodeURIComponent(r));return t},deleteBoundaryUnit=function(t){var o=$.param({apikey:r,reqmethod:"deleteCustomBoundaryUnit",id:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},updateUnitData=function(t){var o=$.param({apikey:r,reqmethod:"updateCustomBoundaryUnit",unitList:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},saveUnit=function(t,o){var i=e.get(a.serviceAPI+"?reqmethod=addNewCustomBoundaryUnit&name="+t+"&price="+o+"&apikey="+encodeURIComponent(r));return i},getCmsPageIdPshop=function(){var t=e.get(a.serviceAPI+"?reqmethod=getCmsPageId");return t},getMultipleBoundaryList=function(){var t=e.get(a.serviceAPI+"?reqmethod=getMultipleBoundaryList&apikey="+encodeURIComponent(r)).success(function(e){o.setMultipleBoundaryList(e)}).error(function(e){console.log("error load MultipleBoundaryList: ",e)});return t},{loadCategories:loadCategories,loadProducts:loadProducts,loadProductDetails:loadProductDetails,updateProductFeature:updateProductFeature,saveMaskBoundsData:saveMaskBoundsData,loadVariants:loadVariants,getSizeAndQuantities:getSizeAndQuantities,savePrintSizes:savePrintSizes,getProductFeatureList:getProductFeatureList,getTemplateList:getTemplateList,getTemplateByProductId:getTemplateByProductId,assignTemplatesToProduct:assignTemplatesToProduct,activePrintMethod:activePrintMethod,fetchPrintSizeList:fetchPrintSizeList,saveproductPrintMethod:saveproductPrintMethod,getproductPrintMethod:getproductPrintMethod,getPrintMethodByPCategory:getPrintMethodByPCategory,getAdditionalPrice:getAdditionalPrice,saveAdditionalPrice:saveAdditionalPrice,saveCustomPrintSize:saveCustomPrintSize,getColorList:getColorList,getProductSizeList:getProductSizeList,saveProductDetails:saveProductDetails,updateProducVariant:updateProducVariant,updatePrintArea:updatePrintArea,deletePrintArea:deletePrintArea,saveSizeAdditionalPrice:saveSizeAdditionalPrice,checkDuplicateSku:checkDuplicateSku,setDefaultPrintArea:setDefaultPrintArea,saveBleedMark:saveBleedMark,saveMaskData:saveMaskData,getAllMaskData:getAllMaskData,deleteCustomMaskData:deleteCustomMaskData,loadVariantList:loadVariantList,fetchProductDiscountList:fetchProductDiscountList,saveProductDiscount:saveProductDiscount,updateCustoMask:updateCustoMask,loadProductTemplates:loadProductTemplates,saveProductTemplate:saveProductTemplate,getCustomBoundaryUnit:getCustomBoundaryUnit,deleteBoundaryUnit:deleteBoundaryUnit,updateUnitData:updateUnitData,saveUnit:saveUnit,getCmsPageIdPshop:getCmsPageIdPshop,getMultipleBoundaryList:getMultipleBoundaryList}}]),angular.module("product").factory("colorVariantPriceFactory",function(){var e=[],t=0,a=function(a,o,r){if(e=[],t=r.length,t>0)for(var i=0;a.length>i;i++){var n={};n.variantid=a[i].id,n.price=[];for(var s=0;o.length>s;s++){var d={},l=-1;if(d.prntmthdid=o[s].print_method_id,r[i]){for(var c in r[i].price)if(o[s].print_method_id==r[i].price[c].prntmthdid){l=c;break}d.prntmthdprice=-1!=l?r[i].price[l].prntmthdprice:0,d.is_whitebase=-1!=l?r[i].price[l].is_whitebase:0}n.price.push(d)}e.push(n)}else for(var i=0;a.length>i;i++){var n={};n.variantid=a[i].id,n.price=[];for(var s=0;o.length>s;s++){var d={};d.prntmthdid=o[s].print_method_id,d.prntmthdprice=0,d.is_whitebase=0,n.price.push(d)}e.push(n)}return e};return{createColorPriceJson:a}}),angular.module("product").factory("sizeVariantPriceFactory",function(){var e=[],t=0,a=function(a,o,r){if(e=[],t=r.length,t>0)for(var i=0;a.length>i;i++){var n={};n.xe_size_id=a[i].xe_size_id,n.sizeName=a[i].xe_size,n.sizePrice=[];for(var s=0;o.length>s;s++){var d={},l=-1;d.print_method_id=o[s].print_method_id,d.pk_id=0,d.percentage=0;for(var c=0;t>c;c++)if(a[i].xe_size_id==r[c].xe_size_id&&r[c]){for(var u in r[c].sizePrice)if(o[s].print_method_id==r[c].sizePrice[u].print_method_id){l=u;break}d.percentage=-1!=l?r[c].sizePrice[l].percentage:0,d.pk_id=-1!=l?r[i]&&r[i].sizePrice[l].pk_id:0}n.sizePrice.push(d)}e.push(n)}else for(var i=0;a.length>i;i++){var n={};n.xe_size_id=a[i].xe_size_id,n.sizeName=a[i].xe_size,n.sizePrice=[];for(var s=0;o.length>s;s++){var d={};d.pk_id=0,d.print_method_id=o[s].print_method_id,d.percentage=0,n.sizePrice.push(d)}e.push(n)}return e};return{createSizePriceJson:a}}),angular.module("product").factory("svgFactory",function(){return svgStringToPath=function(e){var t={fullpath:"",multiPath:"",pathCount:0},a=new DOMParser,o=a.parseFromString(e,"text/xml");return $(o).find("path").each(function(){t.fullpath+=$(this).attr("d"),t.multiPath+=$(this).attr("d")+"#",t.pathCount++}),t},{svgStringToPath:svgStringToPath}}),angular.module("product").factory("unitFactory",function(){return inchToMM=function(e,t,a){for(var o=0;e.length>o;o++)1!=e[o].is_user_defined&&(e[o][t]=Math.round(25.4*e[o][t]),e[o][a]=Math.round(25.4*e[o][a]));return e},inchToCM=function(e,t,a){for(var o=0;e.length>o;o++)1!=e[o].is_user_defined&&(e[o][t]=Math.round(25.4*e[o][t])/10,e[o][a]=Math.round(25.4*e[o][a])/10);return e},inchToFT=function(e,t,a){for(var o=0;e.length>o;o++)1!=e[o].is_user_defined&&(e[o][t]=Math.round(e[o][t]/12),e[o][a]=Math.round(e[o][a]/12));return e},mmToInch=function(e,t,a){for(var o=0;e.length>o;o++)1!=e[o].is_user_defined&&(e[o][t]=(.03937*e[o][t]).toFixed(2),e[o][a]=(.03937*e[o][a]).toFixed(2));return e},cmToInch=function(e,t,a){for(var o=0;e.length>o;o++)1!=e[o].is_user_defined&&(e[o][t]=(.3937*e[o][t]).toFixed(2),e[o][a]=(.3937*e[o][a]).toFixed(2));return e},ftToInch=function(e,t,a){for(var o=0;e.length>o;o++)1!=e[o].is_user_defined&&(e[o][t]=(12*e[o][t]).toFixed(2),e[o][a]=(12*e[o][a]).toFixed(2));return e},{inchToMM:inchToMM,inchToCM:inchToCM,inchToFT:inchToFT,mmToInch:mmToInch,cmToInch:cmToInch,ftToInch:ftToInch}}),angular.module("product").factory("variableBoundaryFactory",function(){return validateDimension=function(e,t,a,o,r,i){var n={status:!0,keyField:""};return e=parseFloat(e),e=parseFloat(e),t=parseFloat(t),a=parseFloat(a),o=parseFloat(o),r=parseFloat(r),i=parseFloat(i),e&&t&&a&&o&&r&&i&&(t>o||i>t?(n.status=!1,n.keyField="Width"):(e>a||r>e)&&(n.status=!1,n.keyField="Height")),n},{validateDimension:validateDimension}}),angular.module("productTemplate").controller("productTemplateCtrl",["$scope","$rootScope","$timeout","translateService","MainEvent","DashBoardModel","productTempModel","productTemplateService",function(e,t,a,o,r,i,n,s){e.isAddViewActive=!1,e.isEditViewActive=!1,e.addpreloader=!0,e.preloader=!1,e.isPreLoader=!1,e.productTempRange=10,e.uploadPTemplate={name:"",is_default:0,temp_side_list:[{side_name:"",sort_order:"",url:""}],product_category:[]},e.editProductTemplate={},e.productCategoryIds=[],e.showMsg=o.translateText("Invalid file format"),e.init=function(){e.defaultImage="./assets/images/no-img.png",e.isLoadMore=n.getLoadMoreStatus(),n.getProductTempLoadStatus()?(e.preloader=!1,e.productCategory=i.getProductCatList(),e.productTemplateList=n.getProductTempList()):(e.preloader=!0,s.loadProductTemplates(n.getStartIndex(),e.productTempRange),a(function(){e.productCategory=i.getProductCatList()},4e3))},t.$on(r.PRODUCT_TEMP_LIST_LOADED,function(t,a){e.productTemplateList=n.getProductTempList(),e.productTempRange>a||void 0==a?(n.setLoadMoreStatus(!1),e.isLoadMore=!1):(n.setLoadMoreStatus(!0),e.isLoadMore=!0),e.preloader=!1,e.isPreLoader=!1}),e.loadMore=function(){e.preloader=!1,e.isPreLoader=!0,n.setStartIndex(e.productTempRange),s.loadProductTemplates(n.getStartIndex(),e.productTempRange)},e.changeTemplateDefault=function(t,a){e.demoStatus?e.$emit(r.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"}):(e.defaultTemplate=t,e.selectedId=e.productTemplateList[a].product_temp_id,e.selectedIndex=a,e.warningType="set default",e.productTemplateList[a].is_default?(e.warningMessage=o.translateText("set as default template"),$("#productTempModal").modal({backdrop:"static",keyboard:!1}),$("#productTempModal").modal("show")):e.productTemplateList[a].is_default||(e.warningMessage=o.translateText("Choose default template"),$("#templateOkModalId").modal({backdrop:"static",keyboard:!1}),$("#templateOkModalId").modal("show")))},e.onWarningModalConfirm=function(){"set default"==e.warningType?s.updateDefaultTempStatus(e.selectedId).then(function(t){t.data.product_templist?(n.resetTemplateList(),n.setProductTempList(t.data.product_templist),e.$emit(r.SHOW_NOTIFICATION,{message:"Status updated",type:"success"})):e.$emit(r.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})}):(e.warningType="delete template")&&s.deleteProductTemplate(e.selectedId).then(function(t){t.data.product_templist instanceof Array?(n.resetTemplateList(),n.setProductTempList(t.data.product_templist),e.$emit(r.SHOW_NOTIFICATION,{message:"Delete successfully",type:"success"})):e.$emit(r.SHOW_NOTIFICATION,{message:"Error in server",type:"danger"})})},e.onWarningModalCancel=function(){e.productTemplateList[e.selectedIndex].is_default=!e.defaultTemplate},e.uploadTemplateImage=function(t,o){e.uploadSideIndex=o;var r=["png","jpg","jpeg"];t=t[0],e.showError1=!1;var i=t.name.replace(/.*\./,"").toLowerCase();if(e.extension=i,r.indexOf(i)>=0){var n=new FileReader;n.onload=function(t){a(function(){e.uploadPTemplate.temp_side_list[o].url=t.target.result})},n.readAsDataURL(t)}else e.showError1=!0,console.log("Invalid file format")
},resetUploadView=function(){e.isAddViewActive=!1,e.isEditViewActive=!1,e.uploadPTemplate={name:"",is_default:0,temp_side_list:[{side_name:"",sort_order:"",url:""}],product_category:[]},e.productCategoryIds=[],e.showError1=!1},e.addNewSide=function(){e.uploadPTemplate.temp_side_list.push({side_name:"",sort_order:"",url:""})},e.removeSide=function(t){e.uploadPTemplate.temp_side_list.splice(t,1)},e.addProductTemplate=function(){resetUploadView(),resetEditView(),e.isAddViewActive=!0},e.cancelAddProductTemplate=function(){resetUploadView()},validateProductTemplate=function(e){var t=e.temp_side_list.length;if(t>0)for(var a=0;t>a;a++)if(!e.temp_side_list[a].side_name||!e.temp_side_list[a].sort_order||!e.temp_side_list[a].url)return!1;return!0},validateSortOrder=function(e){var t=e.temp_side_list.map(function(e){return e.sort_order}),a=t.some(function(e,a){return t.indexOf(e)!=a});return a},checkDuplicateName=function(t){var a=e.productTemplateList.length;if(a>0)for(var o=0;a>o;o++)if(e.editIndex!=o&&e.productTemplateList[o].name.toUpperCase()==t.toUpperCase())return!1;return!0},e.saveProductTemplate=function(){if(1==e.demoStatus)e.$emit(r.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else{var t=validateProductTemplate(e.uploadPTemplate),a=checkDuplicateName(e.uploadPTemplate.name),o=validateSortOrder(e.uploadPTemplate);if(a)if(t)if(o)e.addpreloader=!0,e.$emit(r.SHOW_NOTIFICATION,{message:"Please enter valid sort order.",type:"info"});else{for(var i=e.productCategory.length,d=0;i>d;d++)e.productCategoryIds[d]&&e.uploadPTemplate.product_category.push(e.productCategory[d].id);e.addpreloader=!1,s.uploadProductTemplate(e.uploadPTemplate).then(function(t){t.data.product_templist instanceof Array?(n.resetTemplateList(),n.setProductTempList(t.data.product_templist),e.addpreloader=!0,resetUploadView(),e.$emit(r.SHOW_NOTIFICATION,{message:"Upload successfully",type:"success"})):(e.addpreloader=!0,e.$emit(r.SHOW_NOTIFICATION,{message:"Upload failed",type:"info"}))})}else e.addpreloader=!0,e.$emit(r.SHOW_NOTIFICATION,{message:"Please enter all side details",type:"info"});else e.addpreloader=!0,e.$emit(r.SHOW_NOTIFICATION,{message:"Template name already exists",type:"info"})}},e.editTemplateImage=function(t,o){e.editSideIndex=o;var r=["png","jpg","jpeg"];t=t[0],e.showError2=!1;var i=t.name.replace(/.*\./,"").toLowerCase();if(e.extension=i,r.indexOf(i)>=0){var n=new FileReader;n.onload=function(t){a(function(){e.editProductTemplate.temp_side_list[o].url=t.target.result})},n.readAsDataURL(t)}else e.showError2=!0,console.log("Invalid file format")},e.getEditSelectedCategory=function(){for(var t=e.productCategory.length,a=e.editProductTemplate.product_category.length,o=0;t>o;o++)for(var r=0;a>r;r++)if(e.productCategory[o].id==e.editProductTemplate.product_category[r]){e.editCatetgory[o]=!0;break}$("html, body").animate({scrollTop:0},"slow")},e.addNewSideToUpdate=function(){e.editProductTemplate.temp_side_list.push({side_name:"",sort_order:"",url:""})},e.removeEditSide=function(t){e.editProductTemplate.temp_side_list.splice(t,1)},e.editProductTemplates=function(t){e.editIndex=t,resetUploadView(),e.editCatetgory=[],e.isEditViewActive=!0,e.showError2=!1,e.editProductTemplate=angular.copy(e.productTemplateList[t]),$("html, body").animate({scrollTop:0},"slow")},resetEditView=function(){e.isEditViewActive=!1,e.showError2=!1},e.cancelEditProductTemplate=function(){resetEditView()},e.updateProductTemplate=function(){if(1==e.demoStatus)e.$emit(r.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else{var t=validateProductTemplate(e.editProductTemplate),a=checkDuplicateName(e.editProductTemplate.name),o=validateSortOrder(e.editProductTemplate);if(a)if(t)if(o)e.addpreloader=!0,e.$emit(r.SHOW_NOTIFICATION,{message:"Please enter valid sort order.",type:"info"});else{e.editProductTemplate.product_category=[];for(var i=e.productCategory.length,d=0;i>d;d++)e.editCatetgory[d]&&e.editProductTemplate.product_category.push(e.productCategory[d].id);e.addpreloader=!1,s.updateProductTemplate(e.editProductTemplate).then(function(t){t.data.product_templist instanceof Array?(n.resetTemplateList(),n.setProductTempList(t.data.product_templist),e.addpreloader=!0,resetEditView(),e.$emit(r.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):(e.addpreloader=!0,e.$emit(r.SHOW_NOTIFICATION,{message:"Error in server",type:"info"}))})}else e.addpreloader=!0,e.$emit(r.SHOW_NOTIFICATION,{message:"Please enter all side details",type:"info"});else e.addpreloader=!0,e.$emit(r.SHOW_NOTIFICATION,{message:"Template name already exists",type:"info"})}},e.deleteProductTemplate=function(t){e.demoStatus?e.$emit(r.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"danger"}):(e.selectedId=e.productTemplateList[t].product_temp_id,e.selectedIndex=t,e.warningType="delete template",e.warningMessage=o.translateText("delete template"),$("#productTempModal").modal("show"))}}]),angular.module("productTemplate").factory("productTemplateService",["$http","AppConfig","$rootScope","productTempModel",function(e,t,a,o){var r=t.API_KEY;return loadProductTemplates=function(t,i){e.get(a.serviceAPI+"?reqmethod=getProductTempList&apikey="+encodeURIComponent(r)+"&start="+t+"&count="+i).success(function(e){o.setProductTempList(e.product_templist)}).error(function(){console.log("error on setProductTempList : ",response)})},uploadProductTemplate=function(t){var o=$.param({apiKey:r,reqmethod:"setProductTempList",product_templist:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},updateProductTemplate=function(t){var o=$.param({apiKey:r,reqmethod:"updateProductTemp",product_templist:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},updateDefaultTempStatus=function(t){var o=$.param({apiKey:r,reqmethod:"setDefaultProductTemp",templateId:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},deleteProductTemplate=function(t){var o=$.param({apiKey:r,reqmethod:"removeProductTemplate",templateId:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},{loadProductTemplates:loadProductTemplates,uploadProductTemplate:uploadProductTemplate,updateDefaultTempStatus:updateDefaultTempStatus,updateProductTemplate:updateProductTemplate,deleteProductTemplate:deleteProductTemplate}}]),angular.module("setting").controller("SettingController",["$scope","$rootScope","$timeout","MainEvent","translateService","SettingService","AppModel","MainService",function(e,t,a,o,r,i,n,s){e.tabList=[],e.subTabList=[],e.isSubTabVisible=!1,e.featureList=[],e.featureIds=[],e.featureStatus=[],e.featureName=[],e.itemIds=[],e.itemValues=[],e.socialIds=[],e.socialKeyValues=[],e.socialKeyIndex=[],e.socialSites=[],e.featureRangeIds=[],e.featureRangeValues=[],e.theme={},e.selectedLanguage="",e.selectedCurrency="",e.selectedUnit="",e.themeIds=[],e.tabIds=[],e.subTabIds=[],e.customTheme=!0,e.customColor=[],e.themeColorArray=[],e.currency={symbol:""},e.customColor=[{colorName:"Brand Primary",chosseColor:"colorValue1",color:"#0bb3a5"},{colorName:"Border Color",chosseColor:"colorValue2",color:"#c2d5d9"},{colorName:"Panel Color",chosseColor:"colorValue3",color:"#f1f6f7"},{colorName:"Stage Color",chosseColor:"colorValue4",color:"#dee6e9"},{colorName:"Text Color",chosseColor:"colorValue5",color:"#58666e"}],e.language={id:"",name:"",code:""},e.isDirectPost=!0,e.showMsg=r.translateText("Start value should less than End value"),e.showMsg1=r.translateText("Enter a valid value"),e.showErr=r.translateText("Enter a valid Url"),e.showMsg2=r.translateText("Enter a valid Email Address"),e.isFont=!1,e.isStep=!1,e.isEmail=!1,e.isValidate=!1,e.addToCartSetting,e.tabModel="facebook",e.isIdStatus=!1,e.selectedIndex=0,e.nextPage="chooseThemeColor",e.settingTabList=[{name:"Theme Colors",file:"chooseThemeColor"},{name:"Lang",file:"chooseLanguage"},{name:"Unit",file:"unitSetting"},{name:"Currency",file:"currencySetting"},{name:"File Image",file:"fileSize"},{name:"Price Styling",file:"priceStyle"},{name:"Font Size",file:"fontSize"},{name:"Default Tab Or Subtab",file:"chooseTab"},{name:"Direct Cart Post",file:"cartPost"},{name:"add to cart",file:"cartTermsCondition"},{name:"Notes",file:"NoteSetting"},{name:"Image Upload",file:"imgUploadTermsCondition"},{name:"Number of preloaded items",file:"preloadedItems"},{name:"Number of elements",file:"noOfElementsAllowed"},{name:"Enable Or Disable Features",file:"featureSettings"},{name:"Mail Designs To Customers",file:"emailSetting"},{name:"Css Overriding",file:"cssSetting"}],e.css={text:""},e.imgUploadTermsCondition={note:""},e.featureTabList=[],e.featureSubList=[],e.selectedAdminLanguage="",e.themeColorChooser={Val:"#000000"},e.themeCol=[],e.init=function(){e.shopify_Style="col-md-6",e.themeCol=angular.copy(n.getThemeColor()),e.themeColorChooser.Val=e.themeCol.name,e.addToCartSetting=angular.copy(n.getAddToCartPopUpStatus()),e.addToCartSetting.image_height=parseInt(e.addToCartSetting.image_height),e.addToCartSetting.image_width=parseInt(e.addToCartSetting.image_width),e.imgUploadTermsCondition.note=e.addToCartSetting.img_terms_condition.replace(/<br[^>]*>/g,"\n").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&curl;/g,"{").replace(/&curlr;/g,"}"),e.addToCartSetting.terms_condition=e.addToCartSetting.terms_condition.replace(/<br[^>]*>/g,"\n").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&curl;/g,"{").replace(/&curlr;/g,"}"),e.addToCartSetting.img_terms_condition=e.imgUploadTermsCondition.note.replace(/<br[^>]*>/g,"\n").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&curl;/g,"{").replace(/&curlr;/g,"}"),e.price=100.02,e.addToCartSetting.font_size_min=parseInt(e.addToCartSetting.font_size_min),e.addToCartSetting.font_size_max=parseInt(e.addToCartSetting.font_size_max),e.addToCartSetting.step=parseInt(e.addToCartSetting.step),e.addToCartSetting.notes=e.addToCartSetting.notes.replace(/<br[^>]*>/g,"\n").replace(/&quot;/g,'"').replace(/&curl;/g,"{").replace(/&curlr;/g,"}"),e.addToCartSetting.no_of_chars=parseInt(e.addToCartSetting.no_of_chars),e.addToCartSetting.app_id=parseInt(e.addToCartSetting.app_id),e.addToCartSetting.domain_name=e.addToCartSetting.domain_name,e.addToCartSetting.site_url=e.addToCartSetting.site_url,e.css.text=angular.copy(n.getCssData()),"shopify"==RIAXEAPP.localSettings.store_type&&(e.isDirectPost=!1,e.shopify_Style="col-md-12"),e.languages=angular.copy(n.getLanguages());for(var a=0;e.languages.length>a;a++)"1"==e.languages[a].status&&(e.selectedLanguage=e.languages[a].name,e.languageId=e.languages[a].id,e.langId=e.languages[a].id,e.selectedLang=e.languages[a].name,e.langValue=e.languages[a].value);e.adminLanguages=angular.copy(e.languages);for(var o=0;e.adminLanguages.length>o;o++)e.adminLanguages[o].value==t.language&&(e.selectedAdminLanguage=e.adminLanguages[o].name,e.adminLanguageId=e.adminLanguages[o].id,e.adminLangValue=e.adminLanguages[o].value);e.tabDetails=angular.copy(n.getTabDetails());for(var r=0;e.tabDetails.tabs.length>r;r++)1==e.tabDetails.tabs[r].is_default&&(e.defaultTabId=e.tabDetails.tabs[r].id,e.defaultTab=e.tabDetails.tabs[r].name),e.tabIds.push(e.tabDetails.tabs[r].id),e.subTabIds.push(e.tabDetails.tabs[r].default_subtab_id),e.tabList.push({id:e.tabDetails.tabs[r].id,name:e.tabDetails.tabs[r].name,is_default:e.tabDetails.tabs[r].is_default,default_subtab_id:e.tabDetails.tabs[r].default_subtab_id}),e.subTabList.push(e.tabDetails.tabs[r].subtabs);e.featureRanges=angular.copy(n.getFeatureRanges());for(var r=0;e.featureRanges.length>r;r++)e.featureRangeIds.push(e.featureRanges[r].pk_id),e.featureRangeValues.push(e.featureRanges[r].value);angular.forEach(e.tabList,function(t,a){1==t.is_default&&(e.curentTabIndex=a)}),e.isSubTabVisible="Product"!=e.tabList[e.curentTabIndex].name&&"Name & Number"!=e.tabList[e.curentTabIndex].name||1!=e.tabList[e.curentTabIndex].is_default?!0:!1;for(var r=0;e.subTabList[e.curentTabIndex].length>r;r++)e.subTabList[e.curentTabIndex][r].id==e.tabList[e.curentTabIndex].default_subtab_id&&(e.selectedSubTab=e.subTabList[e.curentTabIndex][r].name);e.itemList=angular.copy(n.getItemList());for(var r=0;e.itemList.length>r;r++)e.itemIds.push(e.itemList[r].id),e.itemValues.push(e.itemList[r].value);e.socialDetailsList=angular.copy(n.getSocialDetailList());for(var r=0;e.socialDetailsList.length>r;r++){e.socialIds.push(e.socialDetailsList[r].site_id);for(var a=0;e.socialDetailsList[r].keyArra.length>a;a++)e.socialKeyIndex.push(e.socialDetailsList[r].keyArra[a].key_index),e.socialKeyValues.push(e.socialDetailsList[r].keyArra[a].key_value)}if(e.AllFeature=[],e.AllFeature=angular.copy(n.getFeatureList()),e.getCurrentFeature(),e.featureTabList=angular.copy(e.AllFeature),angular.forEach(e.AllFeature,function(t,a){e.featureTabList[a].subtabs_list=[],angular.forEach(e.AllFeature[a].subtabs_list,function(t){angular.forEach(e.allowedModules,function(o){t.type==o&&e.featureTabList[a].subtabs_list.push(t)})})}),"chooseLanguage"==t.Id||"unitSetting"==t.Id||"currencySetting"==t.Id||"fileSize"==t.Id||"featureSettings"==t.Id)for(r=0;e.settingTabList.length>r;r++)if(t.Id==e.settingTabList[r].file){var i=r;e.goToNextStep(i)}},e.checkRange=function(t,a){return 0!=a?parseInt(t)>e.itemList[0].value&&parseInt(t)>e.itemValues[0]?(e.$emit(o.SHOW_NOTIFICATION,{message:"Item Value Should be Smaller than Total",type:"info"}),e.itemList[a].value):t:t},e.getCurrentFeature=function(){for(var a=s.getrevdata(t.license_key),o="AAIfFAUTBFwAHBEZHiQVCARcAAIfFAUTBDMRHgYRA1wUFQMZFx5cExECBFwZHREXFTUUGQRcHQk5HREXFQ==",r=a.split("|"),i=r[0].split(","),n=s.getrevdata(o),d=0;i.length>d;d++){if(-1!=window.location.hostname.search(i[d])&&-1!=document.URL.search(i[d])){e.allowedModules=r[2].split(",");break}e.allowedModules=n.split(",")}},e.tabChanged=function(t){e.isSubTabVisible="Product"==e.tabDetails.tabs[t].name||"Name & Number"==e.tabDetails.tabs[t].name?!1:!0,e.curentTabIndex=t,e.defaultTab=e.tabDetails.tabs[t].name,e.defaultTabId=e.tabDetails.tabs[t].id;for(var a=0;e.subTabList[t].length>a;a++)e.subTabList[t][a].id==e.tabList[t].default_subtab_id&&(e.selectedSubTab=e.subTabList[t][a].name,e.subTabIds[t]=e.subTabList[t][a].id)},e.subTabSelected=function(t){e.selectedSubTab=t.name;var a=e.tabIds.indexOf(e.defaultTabId);e.subTabIds[a]=t.id},e.changedFeaturesTab=function(t,a,o){e.featureTabList[o].status=t?1:0,a.status=1==e.featureTabList[o].status?1:0,angular.forEach(e.featureTabList[o].subtabs_list,function(t){t.status=e.featureTabList[o].status})},e.changedFeaturesSubTab=function(t,a,o,r){var i;a.status=t?1:0;for(var n=0,s=0;r.length>s;s++)r[s].status||n++;e.featureTabList[o].status=n==r.length?0:1,"Social Image"==a.name&&(i=a)},e.editSocialImage=function(){e.socialImageModalLabel=r.translateText("Facebook"),e.socialImageInstaLabel=r.translateText("Instagram"),$("#socialimagemodal").modal("show")},e.languageSelected=function(t){e.languageId=t.id,e.selectedLanguage=t.name},e.adminLanguageSelected=function(t){e.adminLanguageId=t.id,e.selectedAdminLanguage=t.name,e.adminLangValue=t.value},e.updateGeneralSetting=function(){e.demoStatus||(e.addToCartSetting.terms_condition=e.addToCartSetting.terms_condition.replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/{/g,"&curl;").replace(/}/g,"&curlr;"),e.addToCartSetting.notes=e.addToCartSetting.notes.replace(/"/g,"&quot;").replace(/{/g,"&curl;").replace(/}/g,"&curlr;"),e.addToCartSetting.img_terms_condition=e.imgUploadTermsCondition.note.replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/{/g,"&curl;").replace(/}/g,"&curlr;"),e.isValidate=!1,i.updateGeneralSetting(e.addToCartSetting).then(function(t){e.addToCartSetting.terms_condition=e.addToCartSetting.terms_condition.replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&curl;/g,"{").replace(/&curlr;/g,"}"),e.addToCartSetting.notes=e.addToCartSetting.notes.replace(/&quot;/g,'"').replace(/&curl;/g,"{").replace(/&curlr;/g,"}"),e.addToCartSetting.img_terms_condition=e.imgUploadTermsCondition.note.replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&curl;/g,"{").replace(/&curlr;/g,"}"),t.data?(n.setGeneralSettings(t.data),e.$emit(o.SHOW_NOTIFICATION,{message:"Update Successfully",type:"success"})):e.$emit(o.SHOW_NOTIFICATION,{message:"Update failed",type:"success"})}))},e.updateSocialImageFacebookDetails=function(){if(!e.demoStatus){var t=/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/;""!=e.addToCartSetting.app_id?t.test(e.addToCartSetting.site_url)?(e.isValidate=!1,e.addToCartSetting.terms_condition=e.addToCartSetting.terms_condition.replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/{/g,"&curl;").replace(/}/g,"&curlr;"),e.addToCartSetting.notes=e.addToCartSetting.notes.replace(/"/g,"&quot;").replace(/{/g,"&curl;").replace(/}/g,"&curlr;"),e.addToCartSetting.img_terms_condition=e.imgUploadTermsCondition.note.replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/{/g,"&curl;").replace(/}/g,"&curlr;"),i.updateGeneralSetting(e.addToCartSetting).then(function(t){e.addToCartSetting.terms_condition=e.addToCartSetting.terms_condition.replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&curl;/g,"{").replace(/&curlr;/g,"}"),e.addToCartSetting.notes=e.addToCartSetting.notes.replace(/&quot;/g,'"').replace(/&curl;/g,"{").replace(/&curlr;/g,"}"),e.addToCartSetting.img_terms_condition=e.imgUploadTermsCondition.note.replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&curl;/g,"{").replace(/&curlr;/g,"}"),t.data?(n.setGeneralSettings(t.data),e.showNotification("socialImageModal","Update Successfully","success")):e.showNotification("socialImageModal","Update failed","info")})):e.isValidate=!0:e.showNotification("socialImageModal","App Id should be greater than Zero","info")}},e.checksocialImageDetailsRange=function(){for(var t=0;e.socialKeyValues.length>t;t++)if(0==parseInt(e.socialKeyValues[t])||void 0==e.socialKeyValues[t]||""==e.socialKeyValues[t])return!1;return!0},e.updateSocialImageInstaDetails=function(){if(!e.demoStatus){var t=e.checksocialImageDetailsRange();t?i.updateSocialImageDetails(e.socialIds,e.socialKeyValues,e.socialKeyIndex).then(function(t){t.data?(n.setGeneralSettings(t.data),e.showNotification("socialImageModal","Update Successfully","success")):e.showNotification("socialImageModal","Update failed","info")}):e.showNotification("socialImageModal","Client Id should be greater than Zero","info")}},e.updateLang_Cur_Unit_Tab=function(){e.demoStatus||i.update_LangCurUnit_Tab(e.languageId,e.unitId,e.adminLangValue).then(function(t){t.data?(n.setGeneralSettings(t.data),e.$emit(o.SHOW_NOTIFICATION,{message:"Update Successfully",type:"success"})):e.$emit(o.SHOW_NOTIFICATION,{message:"Update failed",type:"success"})})},e.updateDefaultTabs=function(){e.demoStatus||i.updateTabs(e.defaultTabId,e.tabIds,e.subTabIds).then(function(t){t.data?(n.setGeneralSettings(t.data),e.$emit(o.SHOW_NOTIFICATION,{message:"Update Successfully",type:"success"})):e.$emit(o.SHOW_NOTIFICATION,{message:"Update failed",type:"success"})})},e.updateFeatureElementSetting=function(){e.demoStatus||i.updateFeature(e.featureTabList).then(function(t){t.data?(n.setGeneralSettings(t.data),e.$emit(o.SHOW_NOTIFICATION,{message:"Update Successfully",type:"success"})):e.$emit(o.SHOW_NOTIFICATION,{message:"Update failed",type:"success"})})},e.checkFeatureRange=function(){for(var t=0;e.featureRangeValues.length>t;t++)if(0==parseInt(e.featureRangeValues[t])||void 0==e.featureRangeValues[t]||""==e.featureRangeValues[t])return!1;return!0},e.updateElementLoaded=function(){if(!e.demoStatus){var t=e.checkFeatureRange();t?i.updateElementLoaded(e.featureRangeIds,e.featureRangeValues).then(function(t){t.data?(n.setGeneralSettings(t.data),e.$emit(o.SHOW_NOTIFICATION,{message:"Update Successfully",type:"success"})):e.$emit(o.SHOW_NOTIFICATION,{message:"Update failed",type:"success"})}):e.$emit(o.SHOW_NOTIFICATION,{message:"Range should be greater than Zero.",type:"info"})}},e.validateItemValues=function(e){for(var t=e[0],a=0;e.length>a;a++)if(parseInt(e[a])>parseInt(t)||""==e[a])return!1;return!0},e.updateElementLoadedOnStage=function(){if(!e.demoStatus){var t=e.validateItemValues(e.itemValues);t?i.updateElementOnstage(e.itemIds,e.itemValues).then(function(t){t.data?(n.setGeneralSettings(t.data),e.$emit(o.SHOW_NOTIFICATION,{message:"Update Successfully",type:"success"})):e.$emit(o.SHOW_NOTIFICATION,{message:"Update failed",type:"success"})}):e.$emit(o.SHOW_NOTIFICATION,{message:"Item Value Should be Smaller than Total",type:"info"})}},e.addToCartPopUp=function(){e.addToCartSetting.is_popup_enable=1,e.addToCartSetting.is_direct_cart=0},e.directCartPosting=function(){e.addToCartSetting.is_direct_cart=1,e.addToCartSetting.is_popup_enable=0},e.languageSelectedOnModal=function(t){e.langValue=t.value,e.langId=t.id,e.selectedLang=t.name},e.addNewLanguageModal=function(){e.newLangStatus=!0,e.languageModalLabel=r.translateText("Add New Language"),$("#languagemodal").modal("show")},e.editLanguageModal=function(){e.newLangStatus=!1,e.languageModalLabel=r.translateText("Update Language File"),$("#languagemodal").modal("show")},e.downloadLanguageFile=function(){if(!e.demoStatus){var a=t.baseUrl+"designer-tool/designer-app/languages/locale-"+e.langValue+".json",o="locale-"+e.langValue+".json";$.getJSON(a,function(t){e.saveFile(t,o)})}},e.saveFile=function(e,t){if(t){var a=document.createElement("a");document.body.appendChild(a),a.style="display: none";var o=JSON.stringify(e,null,2),r=new Blob([o],{type:"application/json"}),i=window.URL.createObjectURL(r);a.href=i,a.download=t,a.click(),window.URL.revokeObjectURL(i)}},e.validateLanguage=function(){for(var t=e.languages.length,a=0;t>a;a++)if(e.languages[a].name.toUpperCase()===e.language.name.toUpperCase()||e.languages[a].value.toUpperCase()===e.language.code.toUpperCase())return!1;return!0},e.AddUpdateLanguage=function(){e.newLangStatus?e.addNewLanguage():e.updateLanguage()},e.addNewLanguage=function(){if(!e.demoStatus){e.buttonStatus=!0,e.langFile=document.getElementById("fileinput");var t=e.langFile.files[0],a=e.validateLanguage();""!=e.language.code&&""!=e.language.name&&void 0!=t?a?i.addNewLanguage(e.language.name,e.language.code,t).then(function(t){t.data?(e.cancelLanguageModal(),n.setGeneralSettings(t.data),e.languages=n.getLanguages(),e.adminLanguages=angular.copy(e.languages),e.buttonStatus=!1,e.showNotification("languageModal","Update Successfully","success")):(e.buttonStatus=!1,e.showNotification("languageModal","Update failed","info"))}):(e.buttonStatus=!1,e.showNotification("languageModal","Language Already Exist.","info")):(e.buttonStatus=!1,e.showNotification("languageModal","Please Enter All the Field","info"))}},e.updateLanguage=function(){if(!e.demoStatus){e.buttonStatus=!0,e.langFile=document.getElementById("fileinput");var t=e.langFile.files[0];""!=e.langId&&void 0!=t?i.updateLanguage(e.langId,t).then(function(t){t.data?(e.cancelLanguageModal(),n.setGeneralSettings(t.data),e.buttonStatus=!1,e.showNotification("languageModal","Update Successfully","success")):(e.buttonStatus=!1,e.showNotification("languageModal","Update failed","info"))}):(e.buttonStatus=!1,e.showNotification("languageModal","Please Upload a File","info"))}},e.cancelLanguageModal=function(){e.language={id:"",name:"",code:""},e.langFile="",$("#fileinput").val(function(){return this.defaultValue})},e.showNotification=function(e,t,a){$("#"+e).show(),$(".pgn-wrapper").empty(),$("#"+e).pgNotification({style:"bar",message:r.translateText(t),position:"top",timeout:1e3,type:a}).show()},e.loadLocalSettings=function(){e.localsettings={},e.localsettings.client_remove_white_background=RIAXEAPP.localSettings.client_remove_white_background,e.localsettings.client_qrcode_whitebase=RIAXEAPP.localSettings.client_qrcode_whitebase,e.localsettings.load_variant_as_color_bg={},e.localsettings.load_variant_as_color_bg.value=RIAXEAPP.localSettings.load_variant_as_color_bg.value,e.localsettings.load_variant_as_color_bg.sides=RIAXEAPP.localSettings.load_variant_as_color_bg.sides,e.localsettings.stroke_allow=RIAXEAPP.localSettings.stroke_allow,e.localsettings.image_add_as_vector=RIAXEAPP.localSettings.image_add_as_vector,e.localsettings.image_quality_check=RIAXEAPP.localSettings.image_quality_check},e.updateExtraSettings=function(){i.updateLocalSettings(e.localsettings).then(function(t){"success"==t.data.status?e.$emit(o.SHOW_NOTIFICATION,{message:"Update Successfully",type:"success"}):e.$emit(o.SHOW_NOTIFICATION,{message:"Update failed",type:"success"})})},e.compare=function(){e.isFont=parseInt(e.addToCartSetting.font_size_min)>parseInt(e.addToCartSetting.font_size_max)||parseInt(e.addToCartSetting.font_size_min)==parseInt(e.addToCartSetting.font_size_max)?!0:!1,e.isStep=e.addToCartSetting.font_size_max!=e.addToCartSetting.step?!1:!0},e.compareStep=function(){e.isStep=e.addToCartSetting.step&&0!=e.addToCartSetting.step&&e.addToCartSetting.step!=e.addToCartSetting.font_size_max?!1:!0},e.changedTermsAndCondition=function(t){e.addToCartSetting.is_terms_and_condition_allow="0"!=t?1:0},e.getCurrentStep=function(t){return e.selectedIndex==t?"active":""},e.goToNextStep=function(t){e.selectedIndex=t,e.nextPage=e.settingTabList[t].file},e.changedEmailAddress=function(t){e.addToCartSetting.is_email_allowed="0"!=t?1:0,0==e.addToCartSetting.is_email_allowed&&(e.isEmail=!1)},e.validateEmail=function(t){e.isEmail=void 0==t?!0:!1},e.changeSocialImageTab=function(t){e.tabModel!=t&&(e.tabModel=t)},e.updateCssSetting=function(){if(!e.demoStatus){var t=btoa(e.css.text);i.updateCss(t).then(function(a){e.css.text=atob(t),a.data?(n.setGeneralSettings(a.data),e.$emit(o.SHOW_NOTIFICATION,{message:"Update Successfully",type:"success"})):e.$emit(o.SHOW_NOTIFICATION,{message:"Update failed",type:"success"})})}},e.onThemeColorChooserChange=function(t){e.themeColor=t},e.updateThemeDetails=function(){e.demoStatus||i.updateTheme(e.themeColor).then(function(t){t.data?(n.setGeneralSettings(t.data),e.themeColorChooser.val=angular.copy(n.getThemeColor()),e.$emit(o.SHOW_NOTIFICATION,{message:"Update Successfully",type:"success"})):e.$emit(o.SHOW_NOTIFICATION,{message:"Update failed",type:"success"})})}}]),angular.module("setting").factory("SettingService",["$http","AppConfig","$rootScope",function(e,t,a){var o=t.API_KEY,r=function(e){for(var t=[],a=e.length-1;a>=0;a--)t.unshift(["&#",e[a].charCodeAt(),";"].join(""));return t.join("")};return{updateTheme:function(t){var r=$.param({apikey:o,reqmethod:"updateThemeSetting",themeColor:t}),i=e({method:"POST",url:a.serviceAPI,data:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},update_LangCurUnit_Tab:function(t,r,i){var n=$.param({apikey:o,reqmethod:"updateLangCurUnitSetting",languageId:t,adminLanguageVal:i}),s=e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s},updateTabs:function(t,r,i){var n=$.param({apikey:o,reqmethod:"updateTabSetting",defaultTabId:t,tabIds:r,subTabIds:i}),s=e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s},updateFeature:function(t){var r=$.param({apikey:o,reqmethod:"updateFeatureSetting",featureList:t}),i=e({method:"POST",url:a.serviceAPI,data:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},updateElementLoaded:function(t,r){var i=$.param({apikey:o,reqmethod:"updatePreloadItemSetting",featureRangeIds:t,featureRangeValues:r}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},updateElementOnstage:function(t,r){var i=$.param({apikey:o,reqmethod:"updateItemOnStageSetting",itemIds:t,itemValues:r}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},updateSocialImageDetails:function(t,r,i){var n=$.param({apikey:o,reqmethod:"updateSocialImageDetails",socialIds:t,socialKeyValues:r,socialKeyIndex:i}),s=e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s},updateGeneralSetting:function(t){var i=JSON.parse(JSON.stringify(t));i.currency=r(i.currency);var n=$.param({apikey:o,reqmethod:"setGeneralSetting",settings:i}),s=e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s},addNewLanguage:function(t,r,i){var n=new FormData;n.append("apikey",o),n.append("name",t),n.append("value",r),n.append("languageFile",i);var s=e({method:"POST",url:a.serviceAPI+"?reqmethod=saveLanguage",data:n,headers:{"Content-Type":void 0},transformRequest:angular.identity});return s},updateLanguage:function(t,r){var i=new FormData;i.append("apikey",o),i.append("id",t),i.append("languageFile",r);var n=e({method:"POST",url:a.serviceAPI+"?reqmethod=editLanguage",data:i,headers:{"Content-Type":void 0},transformRequest:angular.identity});return n},updateLocalSettings:function(t){var r=$.param({apikey:o,reqmethod:"localSettingsUpdate",client_remove_white_background:t.client_remove_white_background,client_qrcode_whitebase:t.client_qrcode_whitebase,stroke_allow:t.stroke_allow,image_add_as_vector:t.image_add_as_vector,image_quality_check:t.image_quality_check,load_variant_as_color_bg:t.load_variant_as_color_bg}),i=e({method:"POST",url:a.serviceAPI,data:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},updateCss:function(t){var r=$.param({apikey:o,reqmethod:"updateStyleCss",cssText:t}),i=e({method:"POST",url:a.serviceAPI,data:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i}}}]),angular.module("shape").controller("ShapeController",["$scope","$rootScope","$timeout","ShapeService","ShapeModel","translateService","MainEvent",function(e,t,a,o,r,i,n){e.isEditViewActive=!1,e.isUploadViewActive=!1,e.isSelectedShapeVisible=!1,e.isUploadShapeVisible=!1,e.isMultipleEditFileCount=!1,e.isUploadFileCount=!1,e.shapeList=[],e.shapeCategoryList=[],e.searchStr="",e.shapeRange=30,e.shapeCheck=[],e.fileCount=0,e.categoryElms=[],e.uploadTags=[],e.uploadPrice="",e.uploadName="",e.editTagList=[],e.editTags=[],e.editCategoryElms=[],e.modalShapeCategoryList=[],e.showClosebtn=!1,e.showBadge=[],e.addCat=!1,e.uploadShape={id:"",name:"",price:"",url:"",tags:[]},e.editShape={id:"",name:"",price:"",url:"",tags:[]},e.editIds=[],e.preloader=!0,e.catPlaceHolder=i.translateText("Enter Category"),e.catDetail={id:"",name:""},e.showMsg=i.translateText("Invalid file format"),e.init=function(){if(e.dataLoaded=!1,e.isLoadMore=r.getLoadMoreStatus(),e.selectedCategory=r.getCategory(),r.getShapeLoadStatus()){e.dataLoaded=!0,e.shapeCategoryList=r.getShapeCategories(),e.modalShapeCategoryList=e.shapeCategoryList.reverse(),e.shapeList=r.getShapeList(),0==e.shapeList.length&&(e.noData=!0);for(var t=0;e.shapeList.length>t;t++)e.loadShapeFromURL(e.shapeList[t].url,t)}else o.loadShapeCategories(),e.loadShapesList()},t.$on(n.SHAPE_CATEGORIES_LOADED,function(){e.shapeCategoryList=r.getShapeCategories(),e.modalShapeCategoryList=e.shapeCategoryList.reverse()}),e.loadShapesList=function(){var t=e.selectedCategory;t==i.translateText("All Categories")&&(t=""),o.loadShapes(e.searchStr,t,r.getStartIndex(),e.shapeRange)},t.$on(n.SHAPE_LIST_LOADED,function(t,a){$(".shape-admin-box-wrap").animate({scrollTop:1e3},"slow"),e.noData=!1,e.uncheckAll(),e.shapeList=r.getShapeList(),0==e.shapeList.length&&(e.noData=!0);for(var o=0;e.shapeList.length>o;o++)e.loadShapeFromURL(e.shapeList[o].url,o);e.shapeRange>a?(r.setLoadMoreStatus(!1),e.isLoadMore=!1):(r.setLoadMoreStatus(!0),e.isLoadMore=!0),e.isLoadMorePreloader=!1,e.dataLoaded=!0,e.dataList=!1}),e.loadShapeFromURL=function(e,t){$.ajax({url:e,dataType:"text",index:t,success:function(e){element=angular.element(e),$("#divsvg_"+t).empty(),$("#divsvg_"+t).append(element)},error:function(e,t,a){console.log("loadTemplateFromURL >> ",a)}})},e.categorySelected=function(t){e.noData=!1,e.dataLoaded=!1,e.dataList=!0,e.selectedCategory=""==t?i.translateText("All Categories"):t.category_name,r.resetShapeList(),r.setCategory(e.selectedCategory),e.loadShapesList()
},e.loadMore=function(){e.isLoadMorePreloader=!0,r.setStartIndex(e.shapeRange),e.loadShapesList()},e.shapeSelected=function(t){t?(e.fileCount++,e.fileCount==e.shapeList.length&&(e.allChecked=!0)):(e.fileCount--,(0==e.fileCount||e.fileCount!=e.shapeList.length)&&(e.allChecked=!1))},e.selectAllChecked=function(t){for(var a=0;e.shapeList.length>a;a++)e.shapeCheck[a]=t;e.fileCount=t?e.shapeList.length:0},e.uncheckAll=function(){for(var t=0;e.shapeList.length>t;t++)e.shapeCheck[t]=!1;e.fileCount=0,e.allChecked=!1},e.deleteSelectedShape=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){var t="Shape Delete";e.$emit(n.SHOW_WARNING_MODAL,"shape",t)}else console.log("No files selected")},t.$on(n.WARNING_MODAL_CONFIRM,function(t,a){if("shape"==a){for(var i=[],s=[],d=0;e.shapeCheck.length>d;d++)1==e.shapeCheck[d]&&(i.push(e.shapeList[d].file_name),s.push(e.shapeList[d].id));o.removeShapeImage(""+i,""+s).then(function(t){"success"==t.data.status?(e.uncheckAll(),r.resetShapeList(),e.isEditViewActive=!1,e.resetUploadView(),e.loadShapesList()):e.$emit(n.SHOW_NOTIFICATION,{message:"Delete failed",type:"info"})})}}),e.upload=function(t){e.base64List=[];var o=["svg"];if(t&&t.length){e.uploadFileCount=t.length,t.length>1?(e.isUploadShapeVisible=!1,e.isUploadFileCount=!0):(e.isUploadShapeVisible=!0,e.isUploadFileCount=!1);for(var r=0;t.length>r;r++){var i=t[r],n=i.name.replace(/.*\./,"").toLowerCase();if(o.indexOf(n)>=0){e.showError=!1;var s=new FileReader;s.onload=function(t){a(function(){e.uploadShape.url=t.target.result;var a=t.target.result,o=a.indexOf("base64"),r=a.substring(o+7);e.base64List.push(r)})},s.readAsDataURL(i)}else e.showError=!0,e.isUploadShapeVisible=!1,console.log("Invalid file format")}}},e.getUploadFiles=function(){e.uploadFiles=[];for(var t=0;e.base64List.length>t;t++)e.uploadFiles.push(e.base64List[t])},$(document).on("keydown",function(t){13==t.keyCode&&e.uploadShape.name&&e.base64List&&e.uploadShapeDetails()}),e.uploadShapeDetails=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else{var t=[];e.getUploadFiles();for(var a=0;e.categoryElms.length>a;a++)""!=e.categoryElms[a].categoryId&&null!=e.categoryElms[a].categoryId&&t.push(e.categoryElms[a].categoryId);e.getUploadTagList(),e.uploadShape.name&&e.base64List&&t.length>0?(e.preloader=!1,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpload",!0),o.postShapeDetails(e.uploadShape.name,e.uploadShape.price,t,e.uploadShape.tags,e.uploadFiles).then(function(t){"Success"==t.data.status?(e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpload",!1),r.resetShapeList(),e.resetUploadView(),e.loadShapesList(),e.$emit(n.SHOW_NOTIFICATION,{message:"Upload successfully",type:"success"})):e.$emit(n.SHOW_NOTIFICATION,{message:"Upload failed",type:"info"})})):e.$emit(n.SHOW_NOTIFICATION,{message:"Please Enter All the Field",type:"info"})}},e.resetUploadView=function(){e.uploadShape={id:"",name:"",price:"",url:"",tags:""},e.uploadTags=[],e.categoryElms=[],e.isUploadViewActive=!1,e.isUploadShapeVisible=!1,e.isUploadFileCount=!1,e.uploadFileCount="",e.categoryElms.push({category:i.translateText("Select Category"),categoryId:""})},e.addNewShape=function(){e.resetUploadView(),e.preloader=!0,e.uncheckAll(),e.isEditViewActive=!1,e.isUploadViewActive=!0,e.showError=!1},e.cancelUploadShape=function(){e.resetUploadView(),e.isUploadViewActive=!1,e.isUploadShapeVisible=!1},e.addUploadCategoyElm=function(){e.categoryElms.push({category:i.translateText("Select Category"),categoryId:""})},e.uploadCategorySelected=function(t,a){e.categoryElms[a].category=t.category_name,e.categoryElms[a].categoryId=t.id;var o=t.category_name;"All Categories"==o&&(o="")},e.selectCategoryDefault=function(t,a){e.categoryElms[a].category=t,e.categoryElms[a].categoryId=""},e.removeUploadCategoryElms=function(t){e.categoryElms.splice(t,1)},e.getUploadTagList=function(){e.uploadShape.tags=[];for(var t=0;e.uploadTags.length>t;t++)e.uploadShape.tags.push(e.uploadTags[t].text)},e.editSelectedShape=function(){if(e.isUploadViewActive=!1,e.editIds=[],e.fileCount>0){e.resetEditView(),e.preloader=!1,e.isEditViewActive=!0;for(var t=0;e.shapeCheck.length>t;t++)if(1==e.shapeCheck[t])if(e.fileCount>1)e.preloader=!0,e.editIds.push(e.shapeList[t].id),e.isSelectedShapeVisible=!1,e.isMultipleEditFileCount=!0;else if(1==e.fileCount){e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!0),e.isMultipleEditFileCount=!1,e.editIds.push(e.shapeList[t].id);var a=e.shapeList[t].url;o.loadShapeDetails(e.shapeList[t].id).then(function(t){e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!1),e.preloader=!0,e.showShapeDetails(a,t.data)})}}else e.isEditViewActive=!1,e.isUploadViewActive=!1,console.log("No files selected")},e.showShapeDetails=function(t,a){e.selectedShapeUrl=t,e.editShape.name=a.shape_details.shape_name,e.editShape.price=a.shape_details.price,e.editCategoryElms=a.categories;for(var o=0;a.tags.length>o;o++)e.editShape.tags.push(a.tags[o].tag_name);e.editTags=e.editShape.tags,e.isSelectedShapeVisible=!0},e.updateShapeDetail=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){var t=e.editIds;e.uploadTags;for(var a=e.editShape.price,i=e.editShape.name,s=[],d=0;e.editCategoryElms.length>d;d++)""!=e.editCategoryElms[d].category_id&&null!=e.editCategoryElms[d].category_id&&s.push(e.editCategoryElms[d].category_id);e.editShape.tags=[];for(var l=0;e.editTags.length>l;l++)e.editShape.tags.push(e.editTags[l].text);e.editShape.name&&s.length>0?(e.preloader=!1,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!0),o.updateShapeDetail(t,i,a,s,e.editShape.tags).then(function(t){"Success"==t.data.status?(e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!1),e.uncheckAll(),r.resetShapeList(),e.isEditViewActive=!1,e.loadShapesList(),e.$emit(n.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(n.SHOW_NOTIFICATION,{message:"Update failed",type:"info"})})):e.$emit(n.SHOW_NOTIFICATION,{message:"Please Enter All the Field",type:"info"})}else e.$emit(n.SHOW_NOTIFICATION,{message:"No file selected",type:"info"})},e.resetEditView=function(){e.editShape={id:"",name:"",price:"",url:"",tags:[]},e.editCategoryElms=[],e.editCategoryElms.push({category_name:i.translateText("Select Category"),category_id:""}),e.editTags=[]},e.editMultipleShape=function(){},e.editCategorySelected=function(t,a){e.editCategoryElms[a].category_name=t.category_name,e.editCategoryElms[a].category_id=t.id},e.categoryDefault=function(t,a){e.editCategoryElms[a].category_name=t,e.editCategoryElms[a].category_id=""},e.addEditCategoyElm=function(){e.editCategoryElms.push({category_name:i.translateText("Select Category"),category_id:""})},e.removeEditCategoryElms=function(t){e.editCategoryElms.splice(t,1)},e.cancelEditShape=function(){e.isEditViewActive=!1},e.openCatModal=function(){$("#shapeCategoryModal").modal("show")},e.addNewCategory=function(t){1==e.demoStatus?e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):(e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnCategoryAdd",!0),o.addShapeCategory(t).then(function(t){"Success"==t.data.status?(e.addCat=!0,o.loadShapeCategories(),e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnCategoryAdd",!1),e.$emit(n.SHOW_SHAPE_NOTIFICATION,{message:"Saved successfully",type:"success"})):(e.$emit(n.SHOW_SHAPE_NOTIFICATION,{message:"Adding failed",type:"info"}),e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnCategoryAdd",!1))}))},e.deleteCat=function(t){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(null!=t){e.catIndex=t;var a="Category Delete";e.$emit(n.CATEGORY_DELETE_MODAL,"Shape Category",a)}else console.log("No files selected")},t.$on(n.CATEGORY_DELETE_MODAL_CONFIRM,function(t,a){if("Shape Category"==a&&null!=e.catIndex){e.showBadge[e.catIndex]=!1;var r=e.shapeCategoryList[e.catIndex].category_name;o.removeShapeCategory(r).then(function(t){1==t.data.status?(e.catIndex=null,o.loadShapeCategories(),e.$emit(n.SHOW_SHAPE_NOTIFICATION,{message:"Delete Successfully",type:"success"})):e.$emit(n.SHOW_SHAPE_NOTIFICATION,{message:"Delete failed",type:"info"})})}}),"AddShape"==t.Id?e.addNewShape():"AddShapeCategory"==t.Id&&setTimeout(function(){e.openCatModal()},1e3),e.editCategory=function(t){e.catDetail.id=e.shapeCategoryList[t].id,e.catDetail.name=e.shapeCategoryList[t].category_name,$("#categoryUpdateModal").modal("show")},e.updateCategory=function(){1==e.demoStatus?e.$emit(n.SHOW_SHAPE_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):o.updateCategoryName(e.catDetail.id,e.catDetail.name).then(function(t){t.data.msg?($("#categoryUpdateModal").modal("hide"),e.$emit(n.SHOW_SHAPE_NOTIFICATION,{message:"Adding failed",type:"info"})):(e.addCat=!0,o.loadShapeCategories(),$("#categoryUpdateModal").modal("hide"),e.$emit(n.SHOW_SHAPE_NOTIFICATION,{message:"Update Successfully",type:"success"}))})}}]),angular.module("shape").factory("ShapeService",["$http","AppConfig","$rootScope","ShapeModel",function(e,t,a,o){var r=t.API_KEY,i=function(){e.get(a.serviceAPI+"?reqmethod=allShapeCatagory").success(function(e){o.setShapeCategories(e)}).error(function(e){console.log("error on loadShapeCategories : ",e)})},n=function(t,r,i,n){e.get(a.serviceAPI+"?reqmethod=fetchShapesBySearchForAdmin&searchval="+t+"&categoryValue="+r+"&lastLoaded="+i+"&loadCount="+n+"&randomNumber="+Math.random()).success(function(e){o.setShapeList(e)}).error(function(e){console.log("error on loadShapes : ",e)})},s=function(t){var o=e.get(a.serviceAPI+"?reqmethod=getShapeDetails"+"&shape_id="+t);return o},d=function(){var t=e.get(a.serviceAPI+"?reqmethod=fetchShapeTags");return t},l=function(t,o,i,n,s){var d=$.param({apikey:r,reqmethod:"addBulkShape",shape_name:t,price:o,category_id:i,tags:n,files:s}),l=e({method:"POST",url:a.serviceAPI,data:d,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return l},c=function(t,o){var i=e.get(a.serviceAPI+"?reqmethod=removeAppImage&apikey="+encodeURIComponent(r)+"&category=shape"+"&name="+t+"&shapeIdArr="+o);return i},u=function(t,o,i,n,s){var d=$.param({apikey:r,reqmethod:"updateShapeData",id:t,shape_name:o,price:i,category_id:n,tags:s}),l=e({method:"POST",url:a.serviceAPI,data:d,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return l},g=function(t){var o=e.get(a.serviceAPI+"?reqmethod=addShapeCategory"+"&category_name="+t);return o},p=function(t){var o=e.get(a.serviceAPI+"?reqmethod=removeShapeCategory"+"&removeCategory="+t);return o},m=function(t){var o=e.get(a.serviceAPI+"?reqmethod=editShapeCategory"+"&categoryId="+t.id+"&categoryName="+t.name);return o},f=function(t,o){var r=e.get(a.serviceAPI+"?reqmethod=updateShapeCategory"+"&id="+t+"&name="+o);return r};return{loadShapeCategories:i,loadShapes:n,loadShapeDetails:s,loadAllTags:d,postShapeDetails:l,removeShapeImage:c,updateShapeDetail:u,addShapeCategory:g,removeShapeCategory:p,editShapeCategory:m,updateCategoryName:f}}]),angular.module("template").controller("TemplateController",["$scope","$rootScope","$timeout","TemplateService","TemplateModel","translateService","MainEvent",function(e,t,a,o,r,i,n){function s(e){d(e);var t=e.childNodes[0].getBBox();scaleValue=1,scaleValue=t.width>t.height?500/t.width:500/t.height,scaleValue*=.2;var a=-scaleValue*t.x+(130-t.width*scaleValue)/2,o=-scaleValue*t.y+(130-t.height*scaleValue)/2;$(e).css({"-webkit-transform":"scale("+scaleValue+")","-moz-transform":"scale("+scaleValue+")","-ms-transform":"scale("+scaleValue+")","-o-transform":"scale("+scaleValue+")",transform:"scale("+scaleValue+")","-moz-transform-origin":"0px 0px","-ms-transform-origin":"0px 0px","-o-transform-origin":"0px 0px","-webkit-transform-origin":"0px 0px","transform-origin":"0px 0px",left:""+a+"px",top:""+o+"px"})}function d(e){for(var t=0;e.childNodes[0].childNodes.length>t;t++){var a=e.childNodes[0].childNodes[t];"g"==a.nodeName&&"layer_background"==a.getAttribute("id")&&a.parentNode.removeChild(a)}}e.isEditViewActive=!1,e.isSelectedTemplateVisible=!1,e.isMultipleEditFileCount=!1,e.templateList=[],e.templateCategoryList=[],e.searchStr="",e.templateRange=29,e.templateCheck=[],e.fileCount=0,e.categoryElms=[],e.editCategoryElms=[],e.modalTemplateCategoryList=[],e.showClosebtn=!1,e.showBadge=[],e.addCat=!1,e.editTemplate={id:"",name:"",url:""},e.editIds=[],e.preloader=!0,e.catPlaceHolder=i.translateText("Enter Category"),e.editTemplateCatList=[],e.selectedEditCategory={id:0,name:i.translateText("Select Category")},e.selectedDefultCategory={id:0,name:i.translateText("All Categories")},e.templateJson=[],e.catDetail={id:"",name:""},e.viewTemplate=!0,e.init=function(){if(e.dataLoaded=!1,e.selectedCategory=r.getCategory(),r.getTemplateLoadStatus()){e.dataLoaded=!0,e.isLoadMore=r.getLoadMoreStatus(),e.templateCategoryList=r.getTemplateCategories(),e.modaltemplateCategoryList=e.templateCategoryList.reverse(),e.templateList=r.getTemplateList(),0==e.templateList.length&&(e.noData=!0);for(var t=0;e.templateList.length>t;t++)e.loadTemplateFromURL(e.templateList[t].template_imagePath,t)}else o.loadTemplateCategories(),e.loadTemplatesList()},t.$on(n.TEMPLATE_CATEGORIES_LOADED,function(){e.templateCategoryList=r.getTemplateCategories(),e.modaltemplateCategoryList=e.templateCategoryList.reverse()}),e.loadTemplatesList=function(){var t=e.selectedCategory;categoryId=t==i.translateText("All Categories")?"":e.selectedCategoryId,o.loadTemplate(e.searchStr,r.getStartIndex(),e.templateRange,categoryId)},t.$on(n.TEMPLATE_LIST_LOADED,function(t,a){e.noData=!1,e.uncheckAll(),e.templateList=r.getTemplateList(),0==e.templateList.length&&(e.noData=!0);for(var o=0;e.templateList.length>o;o++)e.loadTemplateFromURL(e.templateList[o].template_imagePath,o);e.templateRange>a||void 0==a?(r.setLoadMoreStatus(!1),e.isLoadMore=!1):(r.setLoadMoreStatus(!0),e.isLoadMore=!0),e.isLoadMorePreloader=!1,e.dataLoaded=!0,e.dataList=!1}),e.loadTemplateFromURL=function(e,t){$.ajax({url:e,dataType:"text",index:t,success:function(e){element=angular.element(e),$("#template_"+t).empty(),$("#template_"+t).append(element),s(element[0])},error:function(e,t,a){console.log("loadTemplateFromURL >> ",a)}})},e.loadSingleTemplateFromURL=function(t){""==t||void 0==t?e.viewTemplate=!1:($("#template_").empty(),e.viewTemplate=!0,$.ajax({url:t,dataType:"text",success:function(e){element=angular.element(e),$("#template_").append(element),s(element[0])},error:function(e,t,a){console.log("loadTemplateFromURL >> ",a)}}))},e.categorySelected=function(t){e.noData=!1,e.dataLoaded=!1,e.dataList=!0,e.selectedCategory=""==t?i.translateText("All Categories"):t.name,e.selectedCategoryId=t.id,r.resettemplateList(),r.setCategory(e.selectedCategory),e.loadTemplatesList()},e.loadMore=function(){e.isLoadMorePreloader=!0,r.setStartIndex(e.templateRange),e.loadTemplatesList()},e.templateSelected=function(t){t?(e.fileCount++,e.fileCount==e.templateList.length&&(e.allChecked=!0)):(e.fileCount--,(0==e.fileCount||e.fileCount!=e.templateList.length)&&(e.allChecked=!1))},e.selectAllChecked=function(t){for(var a=0;e.templateList.length>a;a++)e.templateCheck[a]=t;e.fileCount=t?e.templateList.length:0},e.uncheckAll=function(){for(var t=0;e.templateList.length>t;t++)e.templateCheck[t]=!1;e.fileCount=0,e.allChecked=!1},e.deleteSelectedTemplate=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){var t="Template Delete";e.$emit(n.SHOW_WARNING_MODAL,"template",t)}else console.log("No files selected")},t.$on(n.WARNING_MODAL_CONFIRM,function(t,a){if("template"==a){for(var i=[],s=0;e.templateCheck.length>s;s++)1==e.templateCheck[s]&&i.push(e.templateList[s].id);o.removeTemplateImage(""+i).then(function(t){"success"==t.data.status?(e.uncheckAll(),r.resettemplateList(),e.isEditViewActive=!1,e.loadTemplatesList()):e.$emit(n.SHOW_NOTIFICATION,{message:"Delete failed",type:"info"})})}}),e.editSelectedTemplate=function(){if(e.editIds=[],e.fileCount>0){e.resetEditView(),e.preloader=!1,e.isEditViewActive=!0;for(var t=0;e.templateCheck.length>t;t++)1==e.templateCheck[t]&&(e.fileCount>1?(e.preloader=!0,e.editIds.push(e.templateList[t].id),e.isSelectedTemplateVisible=!1,e.isMultipleEditFileCount=!0):1==e.fileCount&&(e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!0),e.isMultipleEditFileCount=!1,e.editIds.push(e.templateList[t].id),o.loadTemplateDetails(e.templateList[t].id).then(function(t){e.templateJson=t.data,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!1),e.preloader=!0,e.showTemplateDetails(t.data)})));e.editIds.length>1&&e.loadSingleTemplateFromURL()}else e.isEditViewActive=!1,console.log("No files selected")},e.showTemplateDetails=function(t){e.isSelectedTemplateVisible=!0,e.editTemplate.name=t.templateConfig.name,e.selectedTemplateUrl=t.templateConfig.templateImage,e.loadSingleTemplateFromURL(e.selectedTemplateUrl),e.editTemplateCatList=e.templateCategoryList;for(var a=0;e.editTemplateCatList.length>a;a++)e.editTemplateCatList[a].id==t.templateConfig.category&&(e.selectedEditCategory={id:e.editTemplateCatList[a].id,name:e.editTemplateCatList[a].name})},e.updateTemplateDetail=function(){1==e.demoStatus?e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):e.fileCount>0?e.editTemplate.name&&0!=e.selectedEditCategory.id?(e.preloader=!1,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!0),o.updateTemplateDetail(e.editTemplate.name,e.selectedEditCategory.id,e.editIds).then(function(t){"success"==t.data.status?(e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!1),e.uncheckAll(),r.resettemplateList(),e.isEditViewActive=!1,e.loadTemplatesList(),e.$emit(n.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(n.SHOW_NOTIFICATION,{message:"Update failed",type:"info"})})):e.$emit(n.SHOW_NOTIFICATION,{message:"Please Enter All the Field",type:"info"}):e.$emit(n.SHOW_NOTIFICATION,{message:"No file selected",type:"info"})},e.validateCategoryName=function(t){if(e.templateCategoryList.length>0)for(var a=0;e.templateCategoryList.length>a;a++)if(e.templateCategoryList[a].name==t)return!1;return!0},e.resetEditView=function(){e.editTemplate={id:"",name:"",url:""}},e.editCategorySelected=function(t){e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!0),e.selectedEditCategory=t},e.editCategoryDefault=function(t){e.selectedEditCategory=""==t?{id:0,name:i.translateText("Select Category")}:t},e.removeEditCategoryElms=function(t){e.editCategoryElms.splice(t,1)},e.cancelEditTemplate=function(){e.isEditViewActive=!1},e.openCatModal=function(){$("#templateCategoryModal").modal("show")},e.addNewCategory=function(t){if(1==e.demoStatus)e.$emit(n.SHOW_TEMPLATE_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else{var a=e.validateCategoryName(t);a?o.addTemplateCategory(t).then(function(t){"success"==t.data.status?(e.addCat=!0,o.loadTemplateCategories(),e.$emit(n.SHOW_TEMPLATE_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(n.SHOW_TEMPLATE_NOTIFICATION,{message:"Adding failed",type:"info"})}):e.$emit(n.SHOW_TEMPLATE_NOTIFICATION,{message:"Adding failed",type:"info"})}},e.deleteCat=function(t){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(0/0!=parseInt(t.id)){e.cateId=t.id;var a="Category Delete";e.$emit(n.CATEGORY_DELETE_MODAL,"Template Category",a)}else console.log("No files selected")},t.$on(n.CATEGORY_DELETE_MODAL_CONFIRM,function(t,a){"Template Category"==a&&null!=e.cateId&&(e.showBadge[e.cateIndex]=!1,o.removeTemplateCategory(e.cateId).then(function(t){"success"==t.data.status?(e.cateId=null,o.loadTemplateCategories(),e.$emit(n.SHOW_TEMPLATE_NOTIFICATION,{message:"Delete Successfully",type:"success"})):e.$emit(n.SHOW_TEMPLATE_NOTIFICATION,{message:"Delete failed",type:"info"})}))}),e.editCategory=function(t){e.catDetail.id=e.templateCategoryList[t].id,e.catDetail.name=e.templateCategoryList[t].name,$("#categoryUpdateModal").modal("show")},e.updateCategory=function(){1==e.demoStatus?e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):o.updateCategoryName(e.catDetail.id,e.catDetail.name).then(function(t){t.data.msg?($("#categoryUpdateModal").modal("hide"),e.$emit(n.SHOW_TEMPLATE_NOTIFICATION,{message:"Adding failed",type:"info"})):(e.addCat=!0,o.loadTemplateCategories(),$("#categoryUpdateModal").modal("hide"),e.$emit(n.SHOW_TEMPLATE_NOTIFICATION,{message:"Update Successfully",type:"success"}))})}}]),angular.module("template").factory("TemplateService",["$http","AppConfig","$rootScope","TemplateModel",function(e,t,a,o){var r=t.API_KEY,i=function(){e.get(a.serviceAPI+"?reqmethod=getTemplateCategory").success(function(e){o.setTemplateCategories(e)}).error(function(e){console.log("error on loadTemplateCategories : ",e)})},n=function(t,r,i,n){e.get(a.serviceAPI+"?reqmethod=getTemplateList&categoryId="+n+"&lastLoaded="+r+"&loadCount="+i).success(function(e){o.setTemplateList(e)}).error(function(e){console.log("error on loadTemplate : ",e)})},s=function(){var t=e.get(a.serviceAPI+"?reqmethod=fetchShapeTags");return t},d=function(t){var o=e.get(a.serviceAPI+"?reqmethod=saveTemplateCategory&category="+t);return o},l=function(t){var o=e.get(a.serviceAPI+"?reqmethod=removeTemplateCategory&categoryId="+t);return o},c=function(t){var o=e.get(a.serviceAPI+"?reqmethod=removeTemplate&templtId="+t);return o},u=function(t,o,i){var n=$.param({apikey:r,reqmethod:"updateTemplate",name:t,cate_id:o,id:i}),s=e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s},g=function(t){var o=$.param({templtId:t}),r=e({method:"POST",url:a.serviceAPI+"?reqmethod=getTemplate&templtId="+t,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return r},p=function(t,o){var r=e.get(a.serviceAPI+"?reqmethod=updateTemplateCategory"+"&id="+t+"&name="+o);return r};return{loadTemplateCategories:i,loadTemplate:n,loadTemplateDetails:g,addTemplateCategory:d,removeTemplateCategory:l,loadAllTags:s,removeTemplateImage:c,updateTemplateDetail:u,updateCategoryName:p}}]),angular.module("textFX").controller("textFXController",["$scope","$rootScope","$timeout","TextFXService","TextFXModel","translateService","MainEvent",function(e,t,a,o,r,i,n){e.isEditViewActive=!1,e.isUploadViewActive=!1,e.isSelectedDesignVisible=!1,e.isUploadDesignVisible=!1,e.isUploadFileCount=!1,e.isCategoryListUpdated=!1,e.textFxList=[],e.uploadCharacters=[],e.searchStr="",e.textFxRange=30,e.textFxCharRange="",e.textFxCheck=[],e.fileCount=0,e.uploadTextFx={name:""},e.editCategoryElms=[],e.editTextFX={url:"",name:"",price:"",tags:[],scalable:!1},e.editIds=[],e.preloader=!0,e.init=function(){e.dataLoaded=!1,e.isLoadMore=r.getLoadMoreStatus(),e.textFxPath=t.assertsPath+"fxfonts/",r.getTextFxLoadStatus()?(e.dataLoaded=!0,e.textFxList=r.getTextFxList(),0==e.textFxList.length&&(e.noData=!0)):o.loadTextFxs(e.textFxCharRange)},t.$on(n.TEXTFX_LIST_LOADED,function(t,a){e.textFxList=r.getTextFxList(),e.noData=!1,0==e.textFxList.length&&(e.noData=!0),e.textFxRange>a?(r.setLoadMoreStatus(!1),e.isLoadMore=!1):(r.setLoadMoreStatus(!0),e.isLoadMore=!0),e.dataLoaded=!0,e.dataList=!1;try{$(".textFx-list").animate({scrollTop:$(".textFx-list")[0].scrollHeight},800)}catch(o){}}),e.loadMore=function(){e.dataList=!1,e.dataLoaded=!0,r.setStartIndex(e.textFxRange),o.loadTextFxs(e.textFxCharRange)},e.textFxSelected=function(t){t?(e.fileCount++,e.fileCount==e.textFxList.length&&(e.allChecked=!0)):(e.fileCount--,(0==e.fileCount||e.fileCount!=e.textFxList.length)&&(e.allChecked=!1))},e.selectAllChecked=function(t){for(var a=0;e.textFxList.length>a;a++)e.textFxCheck[a]=t;e.fileCount=t?e.textFxList.length:0},e.uncheckAll=function(){for(var t=0;e.textFxList.length>t;t++)e.textFxCheck[t]=!1;e.fileCount=0,e.allChecked=!1},e.removeTextFxStyle=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){var t="textfx delete";e.$emit(n.SHOW_WARNING_MODAL,"textFx",t)}else console.log("No files selected")},t.$on(n.WARNING_MODAL_CONFIRM,function(t,a){if("textFx"==a){for(var i=[],s=0;e.textFxCheck.length>s;s++)1==e.textFxCheck[s]&&i.push(e.textFxList[s].textfx_style_id);o.removeTextFxStyle(""+i).then(function(t){"OK"==t.statusText?(e.uncheckAll(),r.resetTextFxList(),e.isEditViewActive=!1,e.isUploadViewActive=!1,e.resetUploadView(),o.loadTextFxs(e.textFxCharRange)):e.$emit(n.SHOW_NOTIFICATION,{message:"Delete failed",type:"info"})})}}),e.uploadFX=function(t){e.extainsionArr=[],e.base64List=[],e.textFXFontList=[],e.uploadCharacters=[],e.showUploadCharCloseBtn=[],e.showUploadCharConfirmBtn=[];var o=["svg"];if(t&&t.length)for(var r=0;t.length>r;r++){var i=t[r],s=i.name.replace(/.*\./,"").toLowerCase();if(o.indexOf(s)>=0){e.extainsionArr.push(s);var d=new FileReader;d.onload=function(t){a(function(){if(-1==e.textFXFontList.indexOf(t.target.result)){e.textFXFontList.push(t.target.result);var a=t.target.result,o=a.indexOf("base64"),r=a.substring(o+7);e.base64List.push(r)}else e.$emit(n.SHOW_NOTIFICATION,{message:"Duplicate fonts",type:"danger"})})},d.readAsDataURL(i)}else console.log("Invalid file format")}},e.getUploadFiles=function(){e.uploadFiles=[],e.charCount=0;for(var t=0;e.base64List.length>t;t++)e.uploadCharacters[t]?e.uploadFiles.push({alphabate:e.uploadCharacters[t],base64Data:e.base64List[t]}):e.charCount++},$(document).on("keydown",function(t){13==t.keyCode&&e.uploadTextFx.name&&e.base64List&&e.base64List.length&&e.uploadTextFxFonts()}),e.uploadTextFxFonts=function(){1==e.demoStatus?e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):e.base64List&&e.base64List.length&&e.uploadTextFx.name&&(e.getUploadFiles(),0==e.charCount?(e.preloader=!1,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpload",!0),o.addTextFxDetails(e.uploadTextFx.name,e.uploadFiles).then(function(t){(t.statusText="OK")?(e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpload",!1),r.resetTextFxList(),e.resetUploadView(),o.loadTextFxs(e.textFxCharRange),e.$emit(n.SHOW_NOTIFICATION,{message:"Upload successfully",type:"success"})):e.$emit(n.SHOW_NOTIFICATION,{message:"Upload failed",type:"info"})})):e.$emit(n.SHOW_NOTIFICATION,{message:"characters only",type:"danger"}))},e.uploadCharCloseBtnClick=function(t){e.showUploadCharCloseBtn[t]=!1,e.showUploadCharConfirmBtn[t]=!0},e.deleteCharInUploadView=function(t){e.textFXFontList.splice(t,1),e.uploadCharacters.splice(t,1),e.base64List.splice(t,1)},e.resetUploadView=function(){e.textFXFontList=[],e.uploadTextFx={name:""},e.isUploadViewActive=!1,e.showUploadCharCloseBtn=[],e.showUploadCharConfirmBtn=[],e.base64List=[]},e.addNewTextFx=function(){e.resetUploadView(),e.base64List=[],e.preloader=!0,e.uncheckAll(),e.isEditViewActive=!1,e.isUploadViewActive=!0},e.cancelUploadTextFx=function(){e.resetUploadView(),e.isUploadViewActive=!1},e.browseMoreFxFonts=function(t){var o=["svg"];if(t&&t.length)for(var r=0;t.length>r;r++){var i=t[r],s=i.name.replace(/.*\./,"").toLowerCase();if(o.indexOf(s)>=0){e.extainsionArr.push(s);var d=new FileReader;d.onload=function(t){a(function(){if(-1==e.textFXFontList.indexOf(t.target.result)){e.textFXFontList.push(t.target.result);var a=t.target.result,o=a.indexOf("base64"),r=a.substring(o+7);e.base64List.push(r)}else e.$emit(n.SHOW_NOTIFICATION,{message:"Duplicate fonts",type:"danger"})})},d.readAsDataURL(i)}else console.log("Invalid file format")}},e.editSelectedTextFx=function(){if(1==e.fileCount){e.isEditViewActive=!0,e.isUploadViewActive=!1,e.resetEditView();for(var t=0;e.textFxCheck.length>t;t++)1==e.textFxCheck[t]&&(e.fileCount>1?e.editIds.push(e.textFxList[t].textfx_style_id):1==e.fileCount&&(e.editIds.push(e.textFxList[t].textfx_style_id),e.editSelectedId=e.textFxList[t].textfx_style_id,e.showTextFxDetails(e.textFxList[t])))}else e.isEditViewActive=!1,console.log("No files selected")},e.showTextFxDetails=function(t){e.editTextFx.name=t.name,e.editFontUrl=e.textFxPath+t.textfx_style_id+"_",e.textFxEditFontList=t.alphabate;for(var a=0;t.alphabate.length>a;a++)e.textFxEditCharList.push(t.alphabate[a].charecter)},e.resetEditView=function(){e.editTextFx={name:""},e.editCharacters=[],e.editIds=[],e.editSelectedId="",e.textFxEditCharList=[],e.textFxEditFontList=[],e.showCharEditCloseBtn=[],e.showEditCharConfirmBtn=[]},e.editCharCloseBtnClick=function(t){e.showCharEditCloseBtn[t]=!1,e.showEditCharConfirmBtn[t]=!0},e.deleteCharInEditView=function(t,a){1==e.demoStatus?e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):o.removeTextFxChar(e.editSelectedId,t.id).then(function(t){(t.statusText="OK")?(e.textFxEditFontList.splice(a,1),e.editSelectedTextFx()):e.$emit(n.SHOW_NOTIFICATION,{message:"Delete failed",type:"info"})})},e.checkCharacter=function(){var t=e.editedTextFxChar.length;if(t>0){for(var a=0;t>a;a++)if(""==e.editedTextFxChar[a].charecter)return!1;return!0}return!0},e.saveEditTextFxFonts=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.getEditChars(),1==e.fileCount&&e.editTextFx.name){var t=e.checkCharacter();t?(e.preloader=!1,o.updateTextFxDetails(e.editTextFx.name,e.editSelectedId,e.editedTextFxChar).then(function(t){(t.statusText="OK")?(e.preloader=!0,e.isEditViewActive=!1,e.uncheckAll(),r.resetTextFxList(),o.loadTextFxs(e.textFxCharRange),e.$emit(n.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(n.SHOW_NOTIFICATION,{message:"Update failed",type:"info"})})):e.$emit(n.SHOW_NOTIFICATION,{message:"Please enter all character",type:"info"})}},e.getEditChars=function(){e.editedTextFxChar=[];for(var t=0;e.textFxEditCharList.length>t;t++)e.textFxEditCharList[t]!=e.textFxEditFontList[t].charecter&&e.editedTextFxChar.push({charecter:e.textFxEditCharList[t],id:e.textFxEditFontList[t].id})},e.cancelEditTextFx=function(){e.resetEditView(),e.isEditViewActive=!1},"AddTextFx"==t.Id&&e.addNewTextFx()}]),angular.module("textFX").factory("TextFXService",["$http","AppConfig","$rootScope","TextFXModel",function(e,t,a,o){var r=t.API_KEY;return loadTextFxs=function(t){e.get(a.serviceAPI+"?reqmethod=getTextfxStyle&charecter_nos="+t).success(function(e){o.setTextFxList(e)}).error(function(){console.log("error on loadTextFxs : ",response)})},loadTextFxDetails=function(t){var o=e.get(a.serviceAPI+"?reqmethod=getTextFxDetails"+"&TextFx_id="+t);return o},addTextFxDetails=function(t,o){var i=$.param({apikey:r,reqmethod:"addBulkTextfx",name:t,files:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},updateTextFxDetails=function(t,o,i){var n=$.param({apikey:r,reqmethod:"updateTextfx",name:t,textfx_style_id:o,alphabets:i}),s=e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s},removeTextFxStyle=function(t){var o=$.param({apikey:r,reqmethod:"deleteTextfxStyle",textfx_style_id:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},removeTextFxChar=function(t,o){var i=$.param({apikey:r,reqmethod:"deleteTextfxCharacter",textfx_style_id:t,charecter_id:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},{loadTextFxs:loadTextFxs,loadTextFxDetails:loadTextFxDetails,addTextFxDetails:addTextFxDetails,removeTextFxStyle:removeTextFxStyle,updateTextFxDetails:updateTextFxDetails,removeTextFxChar:removeTextFxChar}}]),angular.module("webfonts").controller("WebfontsController",["$scope","$rootScope","$timeout","WebfontsService","WebfontsModel","translateService","MainEvent",function(e,t,a,o,r,i,n){e.isEditViewActive=!1,e.isUploadViewActive=!1,e.isSelectedWebfontsVisible=!1,e.isUploadWebfontsVisible=!1,e.webfontsList=[],e.isMultipleEditFileCount=!1,e.isUploadFileCount=!1,e.webfontsCategoryList=[],e.searchStr="",e.webfontsRange=30,e.webfontsCheck=[],e.fileCount=0,e.categoryElms=[],e.uploadPrice="",e.uploadName="",e.uploadTags=[],e.editTagList=[],e.editCategoryElms=[],e.editIds=[],e.tagInputs=["hello World","quotes","inspiration"],e.modalWebfontsCategoryList=[],e.showClosebtn=!1,e.showBadge=[],e.addCat=!1,e.uploadFonts={id:"",name:"",label:"",price:0,tags:[],family:""},e.uploadPrintType=[],e.printMethods=[],e.editTags=[],e.editPrintType=[],e.editFont={id:"",name:"",price:0,tags:[],printmethod:""},e.fontscssPathURL="",e.preloader=!0,e.catPlaceHolder=i.translateText("Enter Category"),e.catDetail={id:"",name:""},e.showMsg=i.translateText("Invalid file format"),e.init=function(){e.fontscssPathURL=t.assertsPath+"fonts/fonts.css?"+Math.floor(1e3*Math.random())+1,e.dataLoaded=!1,e.isLoadMore=r.getLoadMoreStatus(),e.selectedCategory=r.getCategory(),e.printMethods=[],o.getPrintMethods().then(function(t){for(var a=0;t.data.length>a;a++)"1"==t.data[a].is_enable&&e.printMethods.push(t.data[a])
}),r.getWebfontsLoadStatus()?(e.dataLoaded=!0,e.webfontsCategoryList=r.getWebfontsCategories(),e.webfontsCategoryList=e.webfontsCategoryList.reverse(),e.webfontsList=r.getWebfontsList(),0==e.webfontsList.length&&(e.noData=!0)):(o.loadWebfontsCategories(),e.loadWebfontsList())},t.$on(n.WEBFONTS_CATEGORIES_LOADED,function(){e.webfontsCategoryList=r.getWebfontsCategories()}),e.getCurrentIndex=function(t){e.currentIndex=e.webfontsCategoryList.indexOf(t)},e.getUpdateIndex=function(t){for(var a=0;e.webfontsCategoryList.length>a;a++)e.webfontsCategoryList[a].sort_order=a,e.webfontsCategoryList[a].id==t.id&&(e.updateIndex=a);e.currentIndex!=e.updateIndex&&(r.setWebfontsCategories(e.webfontsCategoryList),o.dragCategoryList(e.webfontsCategoryList))},e.loadWebfontsList=function(){var t=e.selectedCategory;t==i.translateText("All Categories")&&(t=""),o.loadWebfonts(e.searchStr,t,r.getStartIndex(),e.webfontsRange)},t.$on(n.WEBFONTS_LIST_LOADED,function(t,a){$(".font-box-wrap").animate({scrollTop:1e3},"slow"),e.uncheckAll(),e.webfontsList=r.getWebfontsList(),e.noData=!1,0==e.webfontsList.length&&(e.noData=!0),e.webfontsRange>a?(r.setLoadMoreStatus(!1),e.isLoadMore=!1):(r.setLoadMoreStatus(!0),e.isLoadMore=!0),e.isLoadMorePreloader=!1,e.dataLoaded=!0,e.dataList=!1}),e.categorySelected=function(t){e.noData=!1,e.dataLoaded=!1,e.dataList=!0,e.selectedCategory=""==t?i.translateText("All Categories"):t.category_name,r.resetWebfontsList(),r.setCategory(e.selectedCategory),e.loadWebfontsList()},e.loadMore=function(){e.isLoadMorePreloader=!0,r.setStartIndex(e.webfontsRange),e.loadWebfontsList()},e.webfontsSelected=function(t){t?(e.fileCount++,e.fileCount==e.webfontsList.length&&(e.allChecked=!0)):(e.fileCount--,(0==e.fileCount||e.fileCount!=e.webfontsList.length)&&(e.allChecked=!1))},e.selectAllChecked=function(t){for(var a=0;e.webfontsList.length>a;a++)e.webfontsCheck[a]=t;e.fileCount=t?e.webfontsList.length:0},e.uncheckAll=function(){for(var t=0;e.webfontsList.length>t;t++)e.webfontsCheck[t]=!1;e.fileCount=0,e.allChecked=!1},e.deleteSelectedwebfonts=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){var t="webfont delete";e.$emit(n.SHOW_WARNING_MODAL,"Webfonts",t)}else console.log("No files selected")},t.$on(n.WARNING_MODAL_CONFIRM,function(t,a){if("Webfonts"==a){for(var i=[],s=[],d=0;e.webfontsCheck.length>d;d++)1==e.webfontsCheck[d]&&(i.push(e.webfontsList[d].name),s.push(e.webfontsList[d].id));o.removeWebfontImage(i,s).then(function(t){"success"==t.data.status?(e.uncheckAll(),r.resetWebfontsList(),e.isEditViewActive=!1,e.isUploadViewActive=!1,e.isSelectedWebfontsVisible=!1,e.isUploadWebfontsVisible=!1,e.loadWebfontsList()):e.$emit(n.SHOW_NOTIFICATION,{message:"Delete failed",type:"info"})})}}),e.upload=function(t){var o=["ttf","eot","woff"];if(e.showError=!1,t&&t.length){e.base64List=[],e.fontFamilyArr=[],e.uploadFileCount=t.length,t.length>1?(e.isUploadWebfontsVisible=!1,e.isUploadFileCount=!0):(e.isUploadWebfontsVisible=!0,e.isUploadFileCount=!1);for(var r=0;t.length>r;r++){var i=t[r],n=i.name.substr(0,i.name.lastIndexOf("."))||i.name,s=i.name.replace(/.*\./,"").toLowerCase();if(o.indexOf(s)>=0){e.fontFamilyArr.push(n);var d=new FileReader;d.onload=function(t){a(function(){e.uploadFonts.name=n,e.uploadFonts.family=n,e.uploadFonts.label=n;var a=t.target.result,o=a.indexOf("base64"),r=a.substring(o+7);e.base64List.push(r)})},d.readAsDataURL(i)}else e.showError=!0,e.base64List="",console.log("Invalid file format")}}else e.showError=!0,e.base64List="",console.log("Invalid file format")},e.getUploadFiles=function(){e.uploadFiles=[];for(var t=0;e.base64List.length>t;t++)e.uploadFiles.push({font_family:e.fontFamilyArr[t],base64:e.base64List[t]})},e.addFontToHead=function(a,o){e.ttfUrl=t.assertsPath+"fonts/";for(var r="",i=0;a.length>i;i++)r+="@font-face {font-family:'"+a[i]+"'; src: url('"+e.ttfUrl+o[i]+".ttf"+"')  format('truetype');}";$("head").append("<style>"+r+"</style>")},$(document).on("keydown",function(t){13==t.keyCode&&e.uploadFonts.name&&e.base64List&&e.uploadWebfontsTTF()}),e.uploadWebfontsTTF=function(){var t=[],a=[];e.getUploadFiles(),e.getUploadTagList();for(var i=0;e.uploadPrintType.length>i;i++)1==e.uploadPrintType[i]&&t.push(e.printMethods[i].id);for(var s=0;e.categoryElms.length>s;s++)""!=e.categoryElms[s].categoryId&&null!=e.categoryElms[s].categoryId&&a.push(e.categoryElms[s].categoryId);1==e.demoStatus?e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):e.uploadFonts.name&&e.base64List&&a.length>0?(e.preloader=!1,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpload",!0),o.postWebfontDetailsFile(e.uploadFonts.name,e.uploadFonts.label,e.uploadFonts.price,a,t,e.uploadFonts.tags,e.uploadFiles).then(function(t){"Success"==t.data.status?(e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpload",!1),e.resetUploadView(),r.resetWebfontsList(),e.isUploadViewActive=!1,e.addFontToHead(t.data.family_name,t.data.extracted_name),e.loadWebfontsList(),e.$emit(n.SHOW_NOTIFICATION,{message:"Upload successfully",type:"success"})):e.$emit(n.SHOW_NOTIFICATION,{message:"Upload failed",type:"info"})})):e.$emit(n.SHOW_NOTIFICATION,{message:"Please Enter All the Field",type:"info"})},e.resetUploadView=function(){e.categoryElms=[],e.uploadTags=[],e.isUploadViewActive=!1,e.isUploadWebfontsVisible=!1,e.isUploadFileCount=!1,uploadPrintTypeIds=[],e.base64List="",e.uploadFonts={id:"",name:"",label:"",price:0,tags:[],family:""},e.showError=!1},e.addNewWebfonts=function(){e.preloader=!0,e.uncheckAll(),e.resetUploadView(),e.isEditViewActive=!1,e.isUploadViewActive=!0,e.categoryElms.push({category:i.translateText("Select Category"),categoryId:""})},e.cancelUploadWebfonts=function(){e.resetUploadView(),e.isUploadViewActive=!1},e.addUploadCategoyElm=function(){e.categoryElms.push({category:i.translateText("Select Category"),categoryId:""})},e.uploadCategorySelected=function(t,a){e.categoryElms[a].category=t.category_name,e.categoryElms[a].categoryId=t.id;var o=t.category_name;"All Categories"==o&&(o="")},e.selectCategoryDefault=function(t,a){e.categoryElms[a].category=t,e.categoryElms[a].categoryId=""},e.categoryDefault=function(t,a){e.editCategoryElms[a].category_name=t,e.editCategoryElms[a].category_id=""},e.removeUploadCategoryElms=function(t){e.categoryElms.splice(t,1)},e.changeEditTagList=function(t){e.uploadTags=t.split(",")},e.getUploadTagList=function(){e.uploadFonts.tags=[];for(var t=0;e.uploadTags.length>t;t++)e.uploadFonts.tags.push(e.uploadTags[t].text)},e.editSelectedWebfonts=function(){if(e.isUploadViewActive=!1,e.resetEditView(),e.fileCount>0){e.isEditViewActive=!0;for(var t=0;e.webfontsCheck.length>t;t++)if(1==e.webfontsCheck[t])if(e.fileCount>1)e.editIds.push(e.webfontsList[t].id),e.isSelectedWebfontsVisible=!1,e.isMultipleEditFileCount=!0;else if(1==e.fileCount){e.preloader=!1,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!0),e.isMultipleEditFileCount=!1,e.editIds.push(e.webfontsList[t].id);var a=e.webfontsList[t].name,r=e.webfontsList[t].family;o.loadWebfontDetails(e.webfontsList[t].id).then(function(t){e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!1),e.showWebfontsDetails(a,r,t.data)})}}else e.isEditViewActive=!1,e.isUploadViewActive=!1,console.log("No files selected")},e.resetEditView=function(){e.selectedWebfontsName="",e.selectedWebfontsFamily="",e.editCategoryElms=[],e.editTagList=[],e.editTags=[],e.editIds=[],e.editPrintType=[],e.editFont={id:"",name:"",price:0,tags:[],printmethod:[]}},e.editMultipleWebfonts=function(){console.log("Multiple files selected")},e.editCategorySelected=function(t,a){e.editCategoryElms[a].category_name=t.category_name,e.editCategoryElms[a].category_id=t.id},e.showWebfontsDetails=function(t,a,o){e.selectedWebfontsName=t,e.selectedWebfontsFamily=a,e.editFont.name=o.Font_detail.font_name,e.editFont.price=o.Font_detail.Price,e.editCategoryElms=o.categories,0==o.categories.length&&e.editCategoryElms.push({category_name:i.translateText("Select Category"),category_id:""});for(var r=0;o.tags.length>r;r++)e.editFont.tags.push(o.tags[r]);e.editTags=e.editFont.tags,e.isSelectedWebfontsVisible=!0},e.getEditSelectedPrintMethods=function(t){for(var a=0;e.printMethods.length>a;a++)for(var o=0;t.length>o;o++)if(e.printMethods[a].id==t[o]){e.editPrintType[a]=!0;break}},e.updateWebfontsDetails=function(){if(e.fileCount>0){for(var t=e.editIds,a=e.editFont.name,i=e.editFont.price,s=[],d=[],l=0;e.editCategoryElms.length>l;l++)""!=e.editCategoryElms[l].category_id&&null!=e.editCategoryElms[l].category_id&&s.push(e.editCategoryElms[l].category_id);e.editFont.tags=[];for(var c=0;e.editTags.length>c;c++)e.editFont.tags.push(e.editTags[c].text);1==e.demoStatus?e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):e.editFont.name&&s.length>0?(e.preloader=!1,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!0),o.updateWebFontDetail(t,a,i,s,e.editFont.tags,d).then(function(t){"Success"==t.data.status?(e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!1),e.uncheckAll(),r.resetWebfontsList(),e.isEditViewActive=!1,e.loadWebfontsList(),e.resetEditView(),e.$emit(n.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(n.SHOW_NOTIFICATION,{message:"Update failed",type:"info"})})):e.$emit(n.SHOW_NOTIFICATION,{message:"Please Enter All the Field",type:"info"})}else e.$emit(n.SHOW_NOTIFICATION,{message:"No file selected",type:"info"})},e.addEditCategoyElm=function(){e.editCategoryElms.push({category_name:i.translateText("Select Category"),category_id:""})},e.removeEditCategoryElms=function(t){e.editCategoryElms.splice(t,1)},e.cancelEditWebfonts=function(){e.resetEditView(),e.isEditViewActive=!1},e.openCatModal=function(){$("#webFontsCategoryModal").modal("show")},e.addNewCategory=function(t){1==e.demoStatus?e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):(e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnCategoryAdd",!0),o.addWebFontCategory(t).then(function(t){"success"==t.data.status?(e.addCat=!0,o.loadWebfontsCategories(),e.$emit(n.SHOW_WEBFONT_NOTIFICATION,{message:"Saved successfully",type:"success"})):(e.$emit(n.SHOW_WEBFONT_NOTIFICATION,{message:" Adding Failed",type:"info"}),e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnCategoryAdd",!1))}))},e.deleteCat=function(t){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(null!=t){e.catIndex=t;var a="Category Delete";e.$emit(n.CATEGORY_DELETE_MODAL,"Font Category",a)}else console.log("No files selected")},t.$on(n.CATEGORY_DELETE_MODAL_CONFIRM,function(t,a){if("Font Category"==a&&null!=e.catIndex){e.showBadge[e.catIndex]=!1;var r=e.webfontsCategoryList[e.catIndex].category_name;o.removeWebFontCategory(r).then(function(t){1==t.data.status?(e.catIndex=null,o.loadWebfontsCategories(),e.$emit(n.SHOW_WEBFONT_NOTIFICATION,{message:"Delete Successfully",type:"success"})):e.$emit(n.SHOW_WEBFONT_NOTIFICATION,{message:"Delete failed",type:"info"})})}}),"AddWebfont"==t.Id?e.addNewWebfonts():"AddWebfontCategory"==t.Id&&setTimeout(function(){e.openCatModal()},1e3),e.editCategory=function(t){e.catDetail.id=e.webfontsCategoryList[t].id,e.catDetail.name=e.webfontsCategoryList[t].category_name,$("#categoryUpdateModal").modal("show")},e.updateCategory=function(){1==e.demoStatus?e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):o.updateCategoryName(e.catDetail.id,e.catDetail.name).then(function(t){t.data.msg?($("#categoryUpdateModal").modal("hide"),e.$emit(n.SHOW_WEBFONT_NOTIFICATION,{message:" Adding Failed",type:"info"})):(e.addCat=!0,o.loadWebfontsCategories(),$("#categoryUpdateModal").modal("hide"),e.$emit(n.SHOW_WEBFONT_NOTIFICATION,{message:"Update Successfully",type:"success"}))})}}]),angular.module("webfonts").factory("WebfontsService",["$http","AppConfig","$rootScope","WebfontsModel",function(e,t,a,o){var r=t.API_KEY,i=function(){var t=e.get(a.serviceAPI+"?reqmethod=getFontRevisionNo");return t},n=function(){e.get(a.serviceAPI+"?reqmethod=allWebFontsCatagory").success(function(e){o.setWebfontsCategories(e)}).error(function(e){console.log("error on loadWebfontsCategories : ",e)})},s=function(t,r,i,n){e.get(a.serviceAPI+"?reqmethod=searchFontForAdmin"+"&category="+r+"&searchString="+t+"&start="+i+"&range="+n).success(function(e){o.setWebfontsList(e)}).error(function(e){console.log("error on loadWebfonts : ",e)})},d=function(t){var o=e.get(a.serviceAPI+"?reqmethod=getFontDetails"+"&FontId="+t);return o},l=function(t){var o=e.get(a.serviceAPI+"?reqmethod=addWebFontCategory"+"&category="+t);return o},c=function(t,o,i,n,s,d,l){var c=$.param({apikey:r,reqmethod:"addBulkWebfont",font_name:t,font_label:o,price:i,category_id:n,print_method_id:s,tags:d,files:l}),u=e({method:"POST",url:a.serviceAPI,data:c,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return u},u=function(){var t=e.get(a.serviceAPI+"?reqmethod=getAllPrintMethods&apikey="+encodeURIComponent(r));return t},g=function(t,o,i,n,s,d){var l=$.param({apikey:r,reqmethod:"updateWebFontsData",id:t,font_name:o,price:i,category_id:n,print_method_id:d,tags:s}),c=e({method:"POST",url:a.serviceAPI,data:l,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return c},p=function(t){var o=e.get(a.serviceAPI+"?reqmethod=removeWebFontCategory"+"&removeCategory="+t);return o},m=function(t,o){var i=e.get(a.serviceAPI+"?reqmethod=removeAppImage&apikey="+encodeURIComponent(r)+"&category=font"+"&name="+t+"&id="+o);return i},f=function(t,o){var r=e.get(a.serviceAPI+"?reqmethod=updateWebFontCategory"+"&id="+t+"&name="+o);return r},h=function(t){var o=$.param({apikey:r,reqmethod:"updateFontDragCategoryList",categoryData:t}),i=e({method:"POST",url:a.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i};return{loadFontRevesion:i,loadWebfontsCategories:n,loadWebfonts:s,loadWebfontDetails:d,addWebFontCategory:l,postWebfontDetailsFile:c,getPrintMethods:u,updateWebFontDetail:g,removeWebFontCategory:p,removeWebfontImage:m,updateCategoryName:f,dragCategoryList:h}}]),angular.module("wordCloud").controller("WordCloudController",["$scope","$rootScope","$timeout","WordCloudService","WordCloudModel","translateService","MainEvent",function(e,t,a,o,r,i,n){e.isEditViewActive=!1,e.isEditWordCloudVisible=!1,e.isWordCloudUploadViewActive=!1,e.isUploadWordCloudVisible=!1,e.isMultipleEditFileCount=!1,e.wordCloudList=[],e.wordCloudCheck=[],e.wordCloudRange=30,e.fileCount=0,e.editWordCloud={url:"",name:"",price:""},e.editIds=[],e.uploadWordCloud={id:"",name:"",imgUrl:""},e.uploadWordCloud={id:"",name:"",imgUrl:"",price:""},e.editWordCloudCopy={},e.preloader=!0,e.init=function(){e.wordCloudUrl=t.assertsPath+"wordcloud/",e.dataLoaded=!1,e.isLoadMore=r.getLoadMoreStatus(),r.getWorCloudLoadStatus()?(e.dataLoaded=!0,e.wordCloudList=r.getWordCloudList(),0==e.wordCloudList.length&&(e.noData=!0)):e.loadWordCloudList()},e.loadWordCloudList=function(){e.resetUploadView(),o.loadWordCloud(r.getStartIndex(),e.wordCloudRange)},t.$on(n.WORD_CLOUD_LOADED,function(t,a){e.wordCloudList=r.getWordCloudList(),e.noData=!1,0==e.wordCloudList.length&&(e.noData=!0),e.wordCloudRange>a?(r.setLoadMoreStatus(!1),e.isLoadMore=!1):(r.setLoadMoreStatus(!0),e.isLoadMore=!0),e.isLoadMorePreloader=!1,e.dataLoaded=!0,e.dataList=!1}),e.loadMore=function(){e.isLoadMorePreloader=!0,r.setStartIndex(e.wordCloudRange),e.loadWordCloudList()},e.selectAllChecked=function(t){for(var a=0;e.wordCloudList.length>a;a++)e.wordCloudCheck[a]=t;e.fileCount=t?e.wordCloudList.length:0},e.uncheckAll=function(){for(var t=0;e.wordCloudList.length>t;t++)e.wordCloudCheck[t]=!1;e.fileCount=0,e.allChecked=!1},e.wordCloudSelected=function(t){t?(e.fileCount++,e.fileCount==e.wordCloudList.length&&(e.allChecked=!0)):(e.fileCount--,(0==e.fileCount||e.fileCount!=e.wordCloudList.length)&&(e.allChecked=!1))},e.deleteSelectedWordCloud=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){var t="wordcloud delete";e.$emit(n.SHOW_WARNING_MODAL,"wordcloud",t)}else console.log("No files selected")},t.$on(n.WARNING_MODAL_CONFIRM,function(t,a){if("wordcloud"==a){for(var i=[],s=[],d=0;e.wordCloudCheck.length>d;d++)1==e.wordCloudCheck[d]&&(i.push(e.wordCloudList[d].id),s.push(e.wordCloudList[d].filename));o.removeWordCloudImage(s,i).then(function(t){"success"==t.data.status?(e.uncheckAll(),r.resetWordCloud(),e.isEditViewActive=!1,e.isWordCloudUploadViewActive=!1,e.loadWordCloudList()):e.$emit(n.SHOW_NOTIFICATION,{message:"Delete failed",type:"info"})})}}),e.resetUploadView=function(){e.uploadWordCloud={id:"",name:"",imgUrl:"",price:""},e.base64List="",e.isUploadFileCount=!1,e.isWordCloudUploadViewActive=!1,e.isUploadWordCloudVisible=!1},e.browseWordCloud=function(t){e.extainsionArr=[],e.base64List=[];var o=["png","jpg","jpeg","bmp"];if(t&&t.length){e.uploadFileCount=t.length,t.length>1?(e.isUploadWordCloudVisible=!1,e.isUploadFileCount=!0):(e.isUploadWordCloudVisible=!0,e.isUploadFileCount=!1);for(var r=0;t.length>r;r++){var i=t[r],n=i.name.replace(/.*\./,"").toLowerCase();if(o.indexOf(n)>=0){e.extainsionArr.push(n);var s=new FileReader;s.onload=function(t){a(function(){e.uploadWordCloud.imgUrl=t.target.result;var a=t.target.result,o=a.indexOf("base64"),r=a.substring(o+7);e.base64List.push(r),e.uploadFileExtensionImg=n})},s.readAsDataURL(i)}else console.log("Invalid file format")}}},e.getUploadFiles=function(){e.uploadFiles=[];for(var t=0;e.base64List.length>t;t++)e.uploadFiles.push({type:e.extainsionArr[t],base64:e.base64List[t]})},$(document).on("keydown",function(t){13==t.keyCode&&e.uploadWordCloud.name&&e.base64List&&e.uploadWordCloudToServer()}),e.uploadWordCloudToServer=function(){1==e.demoStatus?e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"}):(e.getUploadFiles(),e.uploadWordCloud.name&&e.base64List&&(e.preloader=!1,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpload",!0),o.saveWordCloud(e.uploadWordCloud.name,e.uploadWordCloud.price,e.uploadFiles).then(function(t){"Success"==t.data.status?(e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpload",!1),r.resetWordCloud(),e.loadWordCloudList(),e.resetUploadView(),e.$emit(n.SHOW_NOTIFICATION,{message:"Upload successfully",type:"success"})):e.$emit(n.SHOW_NOTIFICATION,{message:"Upload failed",type:"info"})})))},e.addNewWordCloud=function(){e.preloader=!0,e.uncheckAll(),e.isEditViewActive=!1,e.isEditWordCloudVisible=!1,e.isUploadWordCloudVisible=!1,e.resetUploadView(),e.isWordCloudUploadViewActive=!0},e.cancelWordCloudUploadView=function(){e.resetUploadView(),e.isWordCloudUploadViewActive=!1,e.isUploadWordCloudVisible=!1},e.editSelectedTwordCloud=function(){if(e.isWordCloudUploadViewActive=!1,e.fileCount>0){e.isEditViewActive=!0,e.isEditWordCloudVisible=!0,e.resetEditView();for(var t=0;e.wordCloudCheck.length>t;t++)if(1==e.wordCloudCheck[t])if(e.fileCount>1)e.editIds.push(e.wordCloudList[t].id),e.isEditWordCloudVisible=!1,e.isMultipleEditFileCount=!0;else if(1==e.fileCount){e.isMultipleEditFileCount=!1;var a=e.wordCloudUrl+e.wordCloudList[t].filename,o=e.wordCloudList[t].name,r=e.wordCloudList[t].price;e.editIds.push(e.wordCloudList[t].id),e.showWordCloudDetails(a,o,r)}}else e.isEditViewActive=!1,e.isWordCloudUploadViewActive=!1,console.log("No files selected")},e.resetEditView=function(){e.editIds=[],e.editWordCloud={url:"",name:"",price:""}},e.editMultipleWordCloud=function(){console.log("Multiple files selected")},e.showWordCloudDetails=function(t,a,o){e.editWordCloud.url=t,e.editWordCloud.name=a,e.editWordCloud.price=o,e.editWordCloud.currentName=a,angular.copy(e.editWordCloud,e.editWordCloudCopy)},e.updateWordCloudDetails=function(){if(1==e.demoStatus)e.$emit(n.SHOW_NOTIFICATION,{message:"Demo Mode Active",type:"warning"});else if(e.fileCount>0){var t=angular.equals(e.editWordCloud,e.editWordCloudCopy);if(0==t){var a=e.editIds,i=e.editWordCloud.name,s=e.editWordCloud.price;e.editWordCloud.name&&(e.preloader=!1,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!0),o.updateWordcloudData(a,i,s).then(function(t){"Success"==t.data.status?(e.preloader=!0,e.$emit(n.SHOW_HIDE_PRELOADER,".loader-OnUpdate",!1),e.uncheckAll(),r.resetWordCloud(),e.isEditViewActive=!1,e.resetEditView(),e.loadWordCloudList(),e.$emit(n.SHOW_NOTIFICATION,{message:"Saved successfully",type:"success"})):e.$emit(n.SHOW_NOTIFICATION,{message:"Update failed",type:"info"})}))}else e.$emit(n.SHOW_NOTIFICATION,{message:"No Data changed",type:"info"})}else e.$emit(n.SHOW_NOTIFICATION,{message:"No file selected",type:"info"})},e.cancelWordCloudEditView=function(){e.isEditViewActive=!1,e.resetEditView()},"AddWordcloud"==t.Id&&e.addNewWordCloud()}]),angular.module("wordCloud").factory("WordCloudService",["$http","AppConfig","$rootScope","WordCloudModel",function(e,t,a,o){var r=t.API_KEY,i=function(t,i){e.get(a.serviceAPI+"?reqmethod=getWordcloudDetails&apikey="+encodeURIComponent(r)+"&srtIndex="+t+"&range="+i).success(function(e){o.setWordCloud(e)}).error(function(){console.log("error on loadWordCloud : ",response)})},n=function(t,o,i){var n=$.param({apikey:r,reqmethod:"addBulkWordcloud",name:t,price:o,files:i}),s=e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s},s=function(t,o){var i=$.param({apikey:r,reqmethod:"removeWordcloud",fileNames:t,fileIds:o}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},d=function(t,o,i){var n=$.param({apikey:r,reqmethod:"updateWordcloudData",id:t,name:o,price:i}),s=e({method:"POST",url:a.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s};return{loadWordCloud:i,saveWordCloud:n,removeWordCloudImage:s,updateWordcloudData:d}}]),AppRoot.factory("ForgotpwdService",["$http","AppConfig","$rootScope",function(e,t,a){var o=t.API_KEY;return forgottenPassword=function(t,r){var i=$.param({apikey:o,reqmethod:"validateUser",email:t,license_key:r}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},{forgottenPassword:forgottenPassword}}]),AppRoot.factory("SigninService",["$http","AppConfig","$rootScope",function(e,t,a){var o=t.API_KEY;return authenticateUser=function(t,r){var i=$.param({apikey:o,reqmethod:"userAuthentication",email:t,password:r}),n=e({method:"POST",url:a.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},{authenticateUser:authenticateUser}}]),AppRoot.factory("MainService",["$http","$rootScope","AppConfig","AppModel",function(e,t,a,o){var r=a.API_KEY,i=function(){var t=e.get("../../settings.json");return t},n=function(){var a=e.get(t.serviceAPI+"?reqmethod=getDtgSizeDetails&apikey="+encodeURIComponent(r));return a},s=function(){e.get(t.serviceAPI+"?reqmethod=getGeneralSetting&apikey="+encodeURIComponent(r)).success(function(e){o.setGeneralSettings(e)}).error(function(e){console.log("error fetchgeneralSettings : ",e)})},d=function(e){var t="";try{t=Base64.decode(e),t=Base64.xor_encrypt(t,"*P&46X-(5u)>#12i06N%")}catch(a){console.log(a)}return t},l=function(){var a=e.get(t.serviceAPI+"?reqmethod=addLatestRevision&apikey="+encodeURIComponent(r)+"&comment=Update from admin");return a},c=function(){e.get(t.serviceAPI+"?reqmethod=getSizeInfo&apikey="+encodeURIComponent(r)).success(function(e){o.setPrintSizeData(e)}).error(function(e){console.log("error fetchPrintSizes : ",e)})},u=function(a,o){var i=$.param({apikey:r,reqmethod:"updatePassword",email:a,password:o}),n=e({method:"POST",url:t.serviceAPI,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n},g=function(a,o,i){var n=$.param({apikey:r,reqmethod:"validSecurity",email:a,security_question:o,security_answer:i}),s=e({method:"POST",url:t.serviceAPI,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return s},p=function(){var a=e.get(t.serviceAPI+"?reqmethod=checkDesignerTool&apikey="+encodeURIComponent(r));return a},m=function(){var a=e.get(t.serviceAPI+"?reqmethod=getVersionData&apiKey="+encodeURIComponent(r));return a},f=function(){var a=$.param({apiKey:r,reqmethod:"getInkxeUpdate"}),o=e({method:"POST",url:t.serviceAPI,data:a,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return o},h=function(a){var o=$.param({apiKey:r,reqmethod:"getUpgradeZip",new_tool_version:a}),i=e({method:"POST",url:t.serviceAPI,data:o,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i},C=function(){var a=$.param({apiKey:r,reqmethod:"clearTrash"}),o=e({method:"POST",url:t.serviceAPI,data:a,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return o},S=function(){var a=e.get(t.serviceAPI+"?reqmethod=userLogout&apikey="+encodeURIComponent(r));return a},y=function(a){var o=e.get(t.serviceAPI+"?reqmethod=fetchSubCategory"+"&selectedCategory="+a+"&apikey="+encodeURIComponent(r));return o},I=function(a,o){var r=$.param({reqmethod:"setDefaultCatSubcat",catId:a,subCatId:o}),i=e({method:"POST",url:t.serviceAPI,data:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}});return i};return{readSettings:i,fetchPrintSizeList:n,fetchgeneralSettings:s,getrevdata:d,addLatestRevision:l,fetchPrintSizes:c,adminResetPassword:u,checkSecretQuestion:g,getDesignerTool:p,getInkxeCurrentVersion:m,getInkxeUpdate:f,upgradeInkxeTool:h,clearJunk:C,userLogOut:S,loadSubCategories:y,setDefaultCatSubcat:I}}]),AppRoot.factory("translateService",["$http","$q","$rootScope","utilities","webStorage",function(e,t,a,o,r){var i={},n="",s=function(t){var a="./languages/locale-[lang].json",o=a.replace("[lang]",t),r=e.get(o);return r};return{init:function(){var e=o.getQueryStringVal("lang"),d=t.defer();return e!==void 0&&0!=e?(a.language=e,r.add("xelang",e.trim(),!1)):r.has("xelang",!0)&&(a.language=r.get("xelang",!1)),s(a.language).then(function(e){i=e.data,n=a.language,d.resolve({message:"Success"})}),d.promise},translateText:function(e){var t="No Label";try{var a=e.trim();a=a.replace(/\s+/g," "),a=a.replace(/[^a-zA-Z\s]/g,"").replace(/[\s]/g,"_"),a=a.toUpperCase(),a=a.replace(/__/g,"_"),t=i[a],t===void 0&&(t="No Label")}catch(o){t="No Label"}return t}}}]),AppRoot.factory("utilities",function(){var e=function(){var e=null,t=""+window.location.search;if(""!=t){t=t.substring(1),e=[];for(var a=t.split("&"),o=0;a.length>o;o++){var r=a[o].split("=");e[r[0]]=r[1]}}return e};return{getQueryStringVal:function(t){var a=e();return null!=a?void 0!=a[t]?a[t]:!1:!1},getRandomNo:function(){var e=new Date;return"?"+e.getTime()},getAssertPath:function(){var e,t=location.href,a=window.parent.location.hostname.replace(/\./g,"_");return a=a.replace(/www_/g,""),-1!=RIAXEAPP.localSettings.base_url.search("beta.inkxe.com")?(a="beta_inkxe_com",e="http://beta.inkxe.com/magento/designer-tool/designer-assets/"+a+"/images/capturedImage/preDecoProduct/"):e=t.substring(0,t.indexOf("/designer-tool"))+"/designer-tool/designer-assets/"+a+"/images/capturedImage/preDecoProduct/",e}}});